(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+7AZ":function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return u}),n.d(t,"__metadata",function(){return l}),n.d(t,"__awaiter",function(){return c}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return y}),n.d(t,"__spreadArrays",function(){return m}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return v}),n.d(t,"__asyncDelegator",function(){return b}),n.d(t,"__asyncValues",function(){return w}),n.d(t,"__makeTemplateObject",function(){return _}),n.d(t,"__importStar",function(){return C}),n.d(t,"__importDefault",function(){return E});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{(n=o[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,l):c(i[0][2],n)}catch(e){c(i[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,o,(t=e[n](t)).done,t.value)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}},"/7f5":function(e,t,n){"use strict";function r(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}n.r(t);var o=function(e){var t=new RegExp('["'+e+"\n]"),n=e.charCodeAt(0);function o(e,t){var r,o,i={},a={},s=[],u=e.length,l=0,c=0;function h(){if(l>=u)return a;if(o)return o=!1,i;var t,r=l;if(34===e.charCodeAt(r)){for(var s=r;s++<u;)if(34===e.charCodeAt(s)){if(34!==e.charCodeAt(s+1))break;++s}return l=s+2,13===(t=e.charCodeAt(s+1))?(o=!0,10===e.charCodeAt(s+2)&&++l):10===t&&(o=!0),e.slice(r+1,s).replace(/""/g,'"')}for(;l<u;){var c=1;if(10===(t=e.charCodeAt(l++)))o=!0;else if(13===t)o=!0,10===e.charCodeAt(l)&&(++l,++c);else if(t!==n)continue;return e.slice(r,l-c)}return e.slice(r)}for(;(r=h())!==a;){for(var d=[];r!==i&&r!==a;)d.push(r),r=h();t&&null==(d=t(d,c++))||s.push(d)}return s}function i(t){return t.map(a).join(e)}function a(e){return null==e?"":t.test(e+="")?'"'+e.replace(/\"/g,'""')+'"':e}return{parse:function(e,t){var n,i,a=o(e,function(e,o){if(n)return n(e,o-1);i=e,n=t?function(e,t){var n=r(e);return function(r,o){return t(n(r),o,e)}}(e,t):r(e)});return a.columns=i,a},parseRows:o,format:function(t,n){return null==n&&(n=function(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}(t)),[n.map(a).join(e)].concat(t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})).join("\n")},formatRows:function(e){return e.map(i).join("\n")}}},i=o(","),a=i.parse,s=i.parseRows,u=i.format,l=i.formatRows,c=o("\t"),h=c.parse,d=c.parseRows,f=c.format,p=c.formatRows;n.d(t,"dsvFormat",function(){return o}),n.d(t,"csvParse",function(){return a}),n.d(t,"csvParseRows",function(){return s}),n.d(t,"csvFormat",function(){return u}),n.d(t,"csvFormatRows",function(){return l}),n.d(t,"tsvParse",function(){return h}),n.d(t,"tsvParseRows",function(){return d}),n.d(t,"tsvFormat",function(){return f}),n.d(t,"tsvFormatRows",function(){return p})},0:function(e,t,n){e.exports=n("zUnb")},1:function(e,t){},"30Go":function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return u}),n.d(t,"__metadata",function(){return l}),n.d(t,"__awaiter",function(){return c}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return y}),n.d(t,"__spreadArrays",function(){return m}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return v}),n.d(t,"__asyncDelegator",function(){return b}),n.d(t,"__asyncValues",function(){return w}),n.d(t,"__makeTemplateObject",function(){return _}),n.d(t,"__importStar",function(){return C}),n.d(t,"__importDefault",function(){return E});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{(n=o[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,l):c(i[0][2],n)}catch(e){c(i[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,o,(t=e[n](t)).done,t.value)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}},"6Joi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,i=n("q/0M"),a=n("os0x"),s=n("zVF4"),u=n("x7I3"),l=o.SDK_VERSION,c=new i.Logger("@firebase/firestore"),h=function(e){return e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT",e}({});function d(){return c.logLevel===i.LogLevel.DEBUG?h.DEBUG:c.logLevel===i.LogLevel.SILENT?h.SILENT:h.ERROR}function f(e){switch(e){case h.DEBUG:c.logLevel=i.LogLevel.DEBUG;break;case h.ERROR:c.logLevel=i.LogLevel.ERROR;break;case h.SILENT:c.logLevel=i.LogLevel.SILENT;break;default:c.error("Firestore ("+l+"): Invalid value passed to `setLogLevel`")}}function p(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(c.logLevel<=i.LogLevel.DEBUG){var o=n.map(m);c.debug.apply(c,["Firestore ("+l+") ["+e+"]: "+t].concat(o))}}function y(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(c.logLevel<=i.LogLevel.ERROR){var r=t.map(m);c.error.apply(c,["Firestore ("+l+"): "+e].concat(r))}}function m(e){if("string"==typeof e)return e;var t=b.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function g(e){var t="FIRESTORE ("+l+") INTERNAL ASSERTION FAILED: "+e;throw y(t),new Error(t)}function v(e,t){e||g(t)}var b=function(){function e(){}return e.setPlatform=function(t){e.platform&&g("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||g("Platform not set"),e.platform},e}();function w(){return b.getPlatform().emptyByteString}var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},C=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(t,e),t}(Error);function E(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new C(_.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T(e,t){return void 0!==e?e:t}function I(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function D(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function k(e){for(var t in v(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function x(e,t){if(0!==t.length)throw new C(_.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+W(t.length,"argument")+".")}function N(e,t,n){if(t.length!==n)throw new C(_.INVALID_ARGUMENT,"Function "+e+"() requires "+W(n,"argument")+", but was called with "+W(t.length,"argument")+".")}function A(e,t,n){if(t.length<n)throw new C(_.INVALID_ARGUMENT,"Function "+e+"() requires at least "+W(n,"argument")+", but was called with "+W(t.length,"argument")+".")}function P(e,t,n,r){if(t.length<n||t.length>r)throw new C(_.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+W(t.length,"argument")+".")}function O(e,t,n,r){F(e,t,G(n)+" argument",r)}function M(e,t,n,r){void 0!==r&&O(e,t,n,r)}function R(e,t,n,r){F(e,t,n+" option",r)}function L(e,t,n,r){void 0!==r&&R(e,t,n,r)}function V(e,t,n,r,o){void 0!==r&&function(e,t,n,r,o){for(var i=[],a=0,s=o;a<s.length;a++){var u=s[a];if(u===r)return;i.push(B(u))}var l=B(r);throw new C(_.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+i.join(", "))}(e,0,n,r,o)}function F(e,t,n,r){if(!("object"===t?j(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var o=B(r);throw new C(_.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+o)}}function j(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function B(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":g("Unknown wrong type: "+typeof e)}function q(e,t,n){if(void 0===n)throw new C(_.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+G(t)+" argument, but it was undefined.")}function U(e,t,n){D(t,function(t,r){if(n.indexOf(t)<0)throw new C(_.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function z(e,t,n,r){var o=B(r);return new C(_.INVALID_ARGUMENT,"Function "+e+"() requires its "+G(n)+" argument to be a "+t+", but it was: "+o)}function G(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function W(e,t){return e+" "+t+(1===e?"":"s")}var H=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return v(20===t.length,"Invalid auto ID: "+t),t},e}();function Q(e,t){return e<t?-1:e>t?1:0}function K(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function $(e){return e+"\0"}function Y(){if("undefined"==typeof Uint8Array)throw new C(_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function J(){if(!b.getPlatform().base64Available)throw new C(_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Z,X=function(){function e(e){J(),this._binaryString=e}return e.fromBase64String=function(t){N("Blob.fromBase64String",arguments,1),O("Blob.fromBase64String","string",1,t),J();try{return new e(b.getPlatform().atob(t))}catch(e){throw new C(_.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(N("Blob.fromUint8Array",arguments,1),Y(),!(t instanceof Uint8Array))throw z("Blob.fromUint8Array","Uint8Array",1,t);return new e(Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join(""))},e.prototype.toBase64=function(){return N("Blob.toBase64",arguments,0),J(),b.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){N("Blob.toUint8Array",arguments,0),Y();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return Q(this._binaryString,e._binaryString)},e}(),ee=E(X,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),te="(default)",ne=function(){function e(e,t){this.projectId=e,this.database=t||te}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===te},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return Q(this.projectId,e.projectId)||Q(this.database,e.database)},e}(),re=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),oe=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&g("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&g("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return v(this.length>=(e=void 0===e?1:e),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return v(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var o=e.get(r),i=t.get(r);if(o<i)return-1;if(o>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new C(_.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter(function(e){return e.length>0}))},t.EMPTY_PATH=new t([]),t}(oe),ae=/^[_a-zA-Z][_a-zA-Z0-9]*$/,se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return ae.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",o=0,i=function(){if(0===r.length)throw new C(_.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;o<e.length;){var s=e[o];if("\\"===s){if(o+1===e.length)throw new C(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[o+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new C(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,o+=2}else"`"===s?(a=!a,o++):"."!==s||a?(r+=s,o++):(i(),o++)}if(i(),a)throw new C(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(oe),ue=function(){function e(t){this.path=t,v(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===ie.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return ie.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new ie(t.slice()))},e.fromPathString=function(t){return new e(ie.fromString(t))},e.EMPTY=new e(new ie([])),e}(),le=function(){return function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}}();!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction"}(Z||(Z={}));var ce=function(){function e(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new le,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,o,i){var a=new e(t,n,Date.now()+r,o,i);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new C(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),he=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(e){}):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw y("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),v(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var o=ce.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(o),o},e.prototype.verifyNotFailed=function(){this.failure&&g("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){v(e===Z.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var o=r[n];if(o.skipDelay(),e!==Z.All&&o.timerId===e)break}return t.drain()})},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);v(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),de="\x01",fe="\x01",pe="\x10",ye="\x11";function me(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ve(t)),t=ge(e.get(n),t);return ve(t)}function ge(e,t){for(var n=t,r=e.length,o=0;o<r;o++){var i=e.charAt(o);switch(i){case"\0":n+=de+pe;break;case de:n+=de+ye;break;default:n+=i}}return n}function ve(e){return e+de+fe}function be(e){var t=e.length;if(v(t>=2,"Invalid path "+e),2===t)return v(e.charAt(0)===de&&e.charAt(1)===fe,"Non-empty path "+e+" had length 2"),ie.EMPTY_PATH;for(var n=t-2,r=[],o="",i=0;i<t;){var a=e.indexOf(de,i);switch((a<0||a>n)&&g('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case fe:var s=e.substring(i,a),u=void 0;0===o.length?u=s:(u=o+=s,o=""),r.push(u);break;case pe:o+=e.substring(i,a),o+="\0";break;case ye:o+=e.substring(i,a+1);break;default:g('Invalid encoded resource path: "'+e+'"')}i=a+2}return new ie(r)}var we=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new C(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new C(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new C(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),_e=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new we(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new we(0,0)),e}(),Ce=function(){function e(e,t){this.comparator=e,this.root=t||Se.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Se.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Se.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Ee(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Ee(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Ee(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Ee(this.root,e,this.comparator,!0)},e}(),Ee=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var o=1;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Se=function(){function e(t,n,r,o,i){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=o?o:e.EMPTY,this.right=null!=i?i:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,o,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=i?i:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,o=n(e,r.key);return(r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===n(t,o.key)){if(o.right.isEmpty())return e.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw g("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw g("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}();Se.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw g("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw g("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw g("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw g("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw g("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,o){return this},e.prototype.insert=function(e,t,n){return new Se(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());var Te=function(){function e(e){this.comparator=e,this.data=new Ce(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach(function(e){n=n.add(e)}),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Ie(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Ie(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var o=n.getNext().key,i=r.getNext().key;if(0!==this.comparator(o,i))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Ie=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),De=new Ce(ue.comparator);function ke(){return De}function xe(){return ke()}var Ne=new Ce(ue.comparator);function Ae(){return Ne}var Pe=new Ce(ue.comparator);function Oe(){return Pe}var Me=new Te(ue.comparator);function Re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Me,r=0,o=e;r<o.length;r++)n=n.add(o[r]);return n}var Le=new Te(Q);function Ve(){return Le}var Fe=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,v(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&v(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var o=0;o<this.mutations.length;o++){var i=this.mutations[o];i.key.isEqual(e)&&(t=i.applyToRemoteDocument(t,r[o]))}return t},e.prototype.applyToLocalView=function(e,t){t&&v(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var o=t,i=0,a=this.mutations;i<a.length;i++){var s;(s=a[i]).key.isEqual(e)&&(t=s.applyToLocalView(t,o,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var o=t.applyToLocalView(r.key,e.get(r.key));o&&(n=n.insert(r.key,o))}),n},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Re())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&K(this.mutations,e.mutations)&&K(this.baseMutations,e.baseMutations)},e}(),je=function(){function e(e,t,n,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=o}return e.from=function(t,n,r,o){v(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var i=Oe(),a=t.mutations,s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new e(t,n,r,o,i)},e}(),Be=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&g("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,o){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,o)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,o)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,o=0,i=!1;t.forEach(function(t){++r,t.next(function(){++o,i&&o===r&&e()},function(e){return n(e)})}),i=!0,o===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next(function(n){return n?e.resolve(n):t()})},o=0,i=t;o<i.length;o++)r(i[o]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,o){r.push(t.call(n,e,o))}),this.waitFor(r)},e}(),qe=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,o){return v(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,o)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return We(e).iterate({index:nn.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Ge(n),Qe(e).put(t)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=Ge(t),Qe(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n,r){var o=this,i=He(e),a=We(e);return a.add({}).next(function(s){v("number"==typeof s,"Auto-generated key is not a number");var u=new Fe(s,t,n,r),l=o.serializer.toDbMutationBatch(o.userId,u);o.documentKeysByBatchId[s]=u.keys();for(var c=[],h=0,d=r;h<d.length;h++){var f=d[h],p=rn.key(o.userId,f.key.path,s);c.push(a.put(l)),c.push(i.put(p,rn.PLACEHOLDER)),c.push(o.indexManager.addToCollectionParentIndex(e,f.key.path.popLast()))}return Be.waitFor(c).next(function(){return u})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return We(e).get(t).next(function(e){return e?(v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Be.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]),i=null;return We(e).iterate({index:nn.userMutationsIndex,range:o},function(e,t,o){t.userId===n.userId&&(v(t.batchId>=r,"Should have found mutation after "+r),i=n.serializer.fromDbMutationBatch(t)),o.done()}).next(function(){return i})},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return We(e).iterate({index:nn.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return We(e).loadAll(nn.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=rn.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),i=[];return He(e).iterate({range:o},function(r,o,a){var s=r[0],u=r[2],l=be(r[1]);if(s===n.userId&&t.path.isEqual(l))return We(e).get(u).next(function(e){if(!e)throw g("Dangling document-mutation reference found: "+r+" which points to "+u);v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+u),i.push(n.serializer.fromDbMutationBatch(e))});a.done()}).next(function(){return i})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Te(Q),o=[];return t.forEach(function(t){var i=rn.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(i),s=He(e).iterate({range:a},function(e,o,i){var a=e[0],s=e[2],u=be(e[1]);a===n.userId&&t.path.isEqual(u)?r=r.add(s):i.done()});o.push(s)}),Be.waitFor(o).next(function(){return n.lookupMutationBatches(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;v(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,o=r.length+1,i=rn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(i),s=new Te(Q);return He(e).iterate({range:a},function(e,t,i){var a=e[0],u=e[2],l=be(e[1]);a===n.userId&&r.isPrefixOf(l)?l.length===o&&(s=s.add(u)):i.done()}).next(function(){return n.lookupMutationBatches(e,s)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],o=[];return t.forEach(function(t){o.push(We(e).get(t).next(function(e){if(null===e)throw g("Dangling document-mutation reference found, which points to "+t);v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),Be.waitFor(o).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return ze(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),Be.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Be.resolve();var r=IDBKeyRange.lowerBound(rn.prefixForUser(t.userId)),o=[];return He(e).iterate({range:r},function(e,n,r){if(e[0]===t.userId){var i=be(e[1]);o.push(i)}else r.done()}).next(function(){v(0===o.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+o.map(function(e){return e.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return Ue(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return Qe(e).get(this.userId).next(function(e){return e||new tn(t.userId,-1,"")})},e}();function Ue(e,t,n){var r=rn.prefixForPath(t,n.path),o=r[1],i=IDBKeyRange.lowerBound(r),a=!1;return He(e).iterate({range:i,keysOnly:!0},function(e,n,r){e[0]===t&&e[1]===o&&(a=!0),r.done()}).next(function(){return a})}function ze(e,t,n){var r=e.store(nn.store),o=e.store(rn.store),i=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(e,t,n){return s++,n.delete()});i.push(u.next(function(){v(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var d=h[c],f=rn.key(t,d.key.path,n.batchId);i.push(o.delete(f)),l.push(d.key)}return Be.waitFor(i).next(function(){return l})}function Ge(e){return e instanceof Uint8Array?(v("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function We(e){return Nn.getStore(e,nn.store)}function He(e){return Nn.getStore(e,rn.store)}function Qe(e){return Nn.getStore(e,tn.store)}var Ke=1,$e=function(e){return e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine",e}({}),Ye=function(){function e(e,t){this.generatorId=e,v((e&Ke)===e,"Generator ID "+e+" contains more than "+Ke+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<Ke,e},e.prototype.after=function(e){return this.seek(e+(1<<Ke)),this.next()},e.prototype.seek=function(e){v((e&Ke)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){return new e($e.QueryCache,2)},e.forSyncEngine=function(){return new e($e.SyncEngine)},e}(),Je="SimpleDb",Ze=function(){function e(t){this.db=t,12.2===e.getIOSVersion(s.getUA())&&y("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,r){return v(e.isAvailable(),"IndexedDB not supported in current environment."),p(Je,"Opening database:",t),new Be(function(o,i){var a=window.indexedDB.open(t,n);a.onsuccess=function(t){o(new e(t.target.result))},a.onblocked=function(){i(new C(_.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;i("VersionError"===t.name?new C(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):t)},a.onupgradeneeded=function(e){p(Je,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,o=new et(a.transaction);r.createOrUpgrade(n,o,e.oldVersion,Zt).next(function(){p(Je,"Database upgrade to version "+Zt+" complete")})}}).toPromise()},e.delete=function(e){return p(Je,"Removing database:",e),nt(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var t=s.getUA(),n=e.getIOSVersion(t),r=0<n&&n<10,o=e.getAndroidVersion(t),i=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)},e.getStore=function(e,t){return e.store(t)},e.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},e.prototype.runTransaction=function(e,t,n){var r=et.open(this.db,e,t),o=n(r).catch(function(e){return r.abort(e),Be.reject(e)}).toPromise();return o.catch(function(){}),r.completionPromise.then(function(){return o})},e.prototype.close=function(){this.db.close()},e}(),Xe=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return nt(this.dbCursor.delete())},e}(),et=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new le,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=ot(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(p(Je,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return v(!!t,"Object store not part of transaction: "+e),new tt(t)},e}(),tt=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(p(Je,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(p(Je,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),nt(n)},e.prototype.add=function(e){return p(Je,"ADD",this.store.name,e,e),nt(this.store.add(e))},e.prototype.get=function(e){var t=this;return nt(this.store.get(e)).next(function(n){return void 0===n&&(n=null),p(Je,"GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return p(Je,"DELETE",this.store.name,e),nt(this.store.delete(e))},e.prototype.count=function(){return p(Je,"COUNT",this.store.name),nt(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.deleteAll=function(e,t){p(Je,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Be(function(n,r){t.onerror=function(e){var t=ot(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},e.prototype.iterateCursor=function(e,t){var n=[];return new Be(function(r,o){e.onerror=function(e){o(e.target.error)},e.onsuccess=function(e){var o=e.target.result;if(o){var i=new Xe(o),a=t(o.primaryKey,o.value,i);if(a instanceof Be){var s=a.catch(function(e){return i.done(),Be.reject(e)});n.push(s)}i.isDone?r():null===i.skipToKey?o.continue():o.continue(i.skipToKey)}else r()}}).next(function(){return Be.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(v(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function nt(e){return new Be(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=ot(e.target.error);n(t)}})}var rt=!1;function ot(e){var t=Ze.getIOSVersion(s.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new C("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return rt||(rt=!0,setTimeout(function(){throw r},0)),r}}return e}var it=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=Ye.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return _e.fromTimestamp(new we(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return ut(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(o){return o.highestListenSequenceNumber=t,n&&(o.lastRemoteSnapshotVersion=n.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),r.saveMetadata(e,o)})},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return at(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return v(t.targetCount>0,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,o=0,i=[];return at(e).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(o++,i.push(r.removeQueryData(e,u)))}).next(function(){return Be.waitFor(i)}).next(function(){return o})},e.prototype.forEachTarget=function(e,t){var n=this;return at(e).iterate(function(e,r){var o=n.serializer.fromDbTarget(r);t(o)})},e.prototype.retrieveMetadata=function(e){return st(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Nn.getStore(n,ln.store)).put(ln.key,t);var n},e.prototype.saveQueryData=function(e,t){return at(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),i=null;return at(e).iterate({range:o,index:sn.queryTargetsIndexName},function(e,r,o){var a=n.serializer.fromDbTarget(r);t.isEqual(a.query)&&(i=a,o.done())}).next(function(){return i})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,o=[],i=lt(e);return t.forEach(function(t){var a=me(t.path);o.push(i.put(new un(n,a))),o.push(r.referenceDelegate.addReference(e,t))}),Be.waitFor(o)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,o=lt(e);return Be.forEach(t,function(t){var i=me(t.path);return Be.waitFor([o.delete([n,i]),r.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=lt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=lt(e),o=Re();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=be(e[1]),i=new ue(r);o=o.add(i)}).next(function(){return o})},e.prototype.containsKey=function(e,t){var n=me(t.path),r=IDBKeyRange.bound([n],[$(n)],!1,!0),o=0;return lt(e).iterate({index:un.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){0!==e[0]&&(o++,n.done())}).next(function(){return o>0})},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return at(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}();function at(e){return Nn.getStore(e,sn.store)}function st(e){return Ze.getStore(e,ln.store).get(ln.key).next(function(e){return v(null!==e,"Missing metadata row."),e})}function ut(e){return st(e).next(function(e){return e.highestListenSequenceNumber})}function lt(e){return Nn.getStore(e,un.store)}var ct=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new Te(se.comparator);return t.forEach(function(e){return n=n.add(e)}),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),ht=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),dt=function(e){return e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete",e}({}),ft=function(){function e(e,t){this.updateTime=e,this.exists=t,v(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Ft&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Ft:(v(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return n=e.updateTime,(null!==(t=this.updateTime)&&void 0!==t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),pt=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&v(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Ft?e.version:_e.MIN},e}(),yt=function(e){function t(t,n,r){var o=e.call(this)||this;return o.key=t,o.value=n,o.precondition=r,o.type=dt.Set,o}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by SetMutation."),new Ft(this.key,t.version,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=pt.getPostMutationVersion(e);return new Ft(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(pt),mt=function(e){function t(t,n,r,o){var i=e.call(this)||this;return i.key=t,i.data=n,i.fieldMask=r,i.precondition=o,i.type=dt.Patch,i}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Bt(this.key,t.version);var n=this.patchDocument(e);return new Ft(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=pt.getPostMutationVersion(e),o=this.patchDocument(e);return new Ft(this.key,r,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Ft?e.data():Rt.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}}),e},t}(pt),gt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=dt.Transform,r.precondition=ft.exists(!0),r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),v(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Bt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),o=t.version,i=this.transformObject(n.data(),r);return new Ft(this.key,o,{hasCommittedMutations:!0},i)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),o=this.localTransformResults(n,e,t),i=this.transformObject(r.data(),o);return new Ft(this.key,r.version,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var o=r[n],i=e instanceof Ft?e.field(o.field):void 0,a=o.transform.computeBaseValue(i||null);null!=a&&(t=null==t?Rt.EMPTY.set(o.field,a):t.set(o.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&K(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){v(e instanceof Ft,"Unknown MaybeDocument type "+e);var t=e;return v(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];v(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var o=this.fieldTransforms[r],i=o.transform,a=null;e instanceof Ft&&(a=e.field(o.field)),n.push(i.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],o=0,i=this.fieldTransforms;o<i.length;o++){var a=i[o],s=a.transform,u=null;t instanceof Ft&&(u=t.field(a.field)),null===u&&n instanceof Ft&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){v(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)e=e.set(this.fieldTransforms[n].field,t[n]);return e},t}(pt),vt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=dt.Delete,r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by DeleteMutation."),new jt(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&v(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new jt(this.key,_e.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(pt),bt=function(e){return e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue",e}({}),wt=function(e){return e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous",e}({}),_t=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(wt.Estimate,n);case"previous":return new e(wt.Previous,n);case"none":case void 0:return new e(wt.Default,n);default:return g("fromSnapshotOptions() called with invalid options.")}},e}(),Ct=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return v(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Q(this.typeOrder,e.typeOrder)},e}(),Et=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=bt.NullValue,t.internalValue=null,t}return a.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(Ct),St=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=bt.BooleanValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Q(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Ct),Tt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=bt.NumberValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue)<(r=e.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(e);var n,r},t}(Ct);function It(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&It(this.internalValue,e.internalValue)},t}(Tt),kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&It(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Tt),xt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=bt.StringValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Q(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Ct),Nt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=bt.TimestampValue,n}return a.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof At?-1:this.defaultCompareTo(e)},t}(Ct),At=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=bt.TimestampValue,r}return a.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===wt.Estimate?new Nt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===wt.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Nt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(Ct),Pt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=bt.BlobValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Ct),Ot=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=bt.RefValue,r}return a.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:ue.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(Ct),Mt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=bt.GeoPointValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Ct),Rt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=bt.ObjectValue,n}return a.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var o=n.getNext(),i=r.getNext();if(o.key!==i.key||!o.value.isEqual(i.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var o=n.getNext(),i=r.getNext(),a=Q(o.key,i.key)||o.value.compareTo(i.value);if(a)return a}return Q(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(v(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var o=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),o)},t.prototype.delete=function(e){if(v(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){v(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach(function(e){n=n instanceof t?n.internalValue.get(e):null}),n},t.prototype.fieldMask=function(){var e=new Te(se.comparator);return this.internalValue.forEach(function(n,r){var o=new se([n]);if(r instanceof t){var i=r.fieldMask().fields;i.isEmpty()?e=e.add(o):i.forEach(function(t){e=e.add(o.child(t))})}else e=e.add(o)}),ct.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new Ce(Q)),t}(Ct),Lt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=bt.ArrayValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var o=this.internalValue[r].compareTo(e.internalValue[r]);if(o)return o}return Q(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map(function(e){return e.toString()}).join(",")+"]"},t}(Ct),Vt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return ue.comparator(e.key,t.key)},e}(),Ft=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t,n)||this;return s.objectValue=o,s.proto=i,s.converter=a,v(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return a.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=Rt.EMPTY;D(this.proto.fields,function(n,r){t=t.set(new se([n]),e.converter(r))}),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){v(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields[e.firstSegment()],n=1;n<e.length;++n){if(!t||!t.mapValue)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),o=n.field(e);return null!==r&&null!==o?r.compareTo(o):g("Trying to compare documents on fields that don't exist")},t}(Vt),jt=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.hasCommittedMutations=!(!r||!r.hasCommittedMutations),o}return a.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Vt),Bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(Vt),qt=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,o=n;r<o.length;r++){var i=o[r],a=i[1];if(i[0].isEqual(e))return a}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var o=0;o<r.length;o++)if(r[o][0].isEqual(e))return void(r[o]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){D(this.inner,function(t,n){for(var r=0,o=n;r<o.length;r++){var i=o[r];e(i[0],i[1])}})},e.prototype.isEmpty=function(){return k(this.inner)},e}(),Ut=function(){function e(){this.changes=new qt(function(e){return e.toString()}),this.changesApplied=!1}return e.prototype.addEntry=function(e){this.assertNotApplied(),this.changes.set(e.key,e)},e.prototype.removeEntry=function(e){this.assertNotApplied(),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Be.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){v(!this.changesApplied,"Changes have already been applied.")},e}(),zt="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Gt=function(){function e(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=Ze.getStore(e,dn.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntry=function(e,t,n){var r=this;return Ht(e).put(Kt(t),n).next(function(){r.indexManager.addToCollectionParentIndex(e,t.path.popLast())})},e.prototype.removeEntry=function(e,t){var n=Ht(e),r=Kt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t,n){var r=this;return this.getMetadata(e).next(function(o){return o.byteSize+=n,r.setMetadata(e,o).next(function(){if(r.keepDocumentChangeLog)return Qt(e).put({changes:r.serializer.toDbResourcePaths(t)})})})},e.prototype.getEntry=function(e,t){var n=this;return Ht(e).get(Kt(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},e.prototype.getSizedEntry=function(e,t){var n=this;return Ht(e).get(Kt(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:$t(e)}:null})},e.prototype.getEntries=function(e,t){var n=this,r=xe();return this.forEachDbEntry(e,t,function(e,t){r=r.insert(e,t?n.serializer.fromDbRemoteDocument(t):null)}).next(function(){return r})},e.prototype.getSizedEntries=function(e,t){var n=this,r=xe(),o=new Ce(ue.comparator);return this.forEachDbEntry(e,t,function(e,t){t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),o=o.insert(e,$t(t))):(r=r.insert(e,null),o=o.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:o}})},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Be.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),o=t.getIterator(),i=o.getNext();return Ht(e).iterate({range:r},function(e,t,r){for(var a=ue.fromSegments(e);i&&ue.comparator(i,a)<0;)n(i,null),i=o.getNext();i&&i.isEqual(a)&&(n(i,t),i=o.hasNext()?o.getNext():null),i?r.skip(i.path.toArray()):r.done()}).next(function(){for(;i;)n(i,null),i=o.hasNext()?o.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Ae(),o=t.path.length+1,i=t.path.toArray(),a=IDBKeyRange.lowerBound(i);return Ht(e).iterate({range:a},function(e,i,a){if(e.length===o){var s=n.serializer.fromDbRemoteDocument(i);t.path.isPrefixOf(s.key.path)?s instanceof Ft&&t.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},e.prototype.getNewDocumentChanges=function(e){var t=this;v(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Re(),r=ke(),o=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),i=!0,a=Qt(e);return a.iterate({range:o},function(e,r){if(i&&(i=!1,t._lastProcessedDocumentChangeId+1!==r.id))return t.synchronizeLastDocumentChangeId(a).next(function(){return Be.reject(new C(_.DATA_LOSS,zt))});n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),t._lastProcessedDocumentChangeId=r.id}).next(function(){var o=[];return n.forEach(function(n){o.push(t.getEntry(e,n).next(function(e){var t=e||new jt(n,_e.forDeletedDoc());r=r.insert(n,t)}))}),Be.waitFor(o)}).next(function(){return r})},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return Qt(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},e.prototype.newChangeBuffer=function(){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return Wt(e).get(an.key).next(function(e){return v(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(e,t){return Wt(e).put(an.key,t)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n.documentSizes=new qt(function(e){return e.toString()}),n}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,o=Re();return this.changes.forEach(function(i,a){var s=t.documentSizes.get(i);if(v(void 0!==s,"Cannot modify a document that wasn't read (for "+i+")"),a){var u=t.documentCache.serializer.toDbRemoteDocument(a),l=$t(u);r+=l-s,n.push(t.documentCache.addEntry(e,i,u))}else r-=s,n.push(t.documentCache.removeEntry(e,i));o=o.add(i)}),n.push(this.documentCache.updateMetadata(e,o,r)),Be.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},t}(Ut),e}();function Wt(e){return Nn.getStore(e,an.store)}function Ht(e){return Nn.getStore(e,on.store)}function Qt(e){return Nn.getStore(e,dn.store)}function Kt(e){return e.path.toArray()}function $t(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw g("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Yt=function(){function e(){this.collectionParentIndex=new Jt}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Be.resolve()},e.prototype.getCollectionParents=function(e,t){return Be.resolve(this.collectionParentIndex.getEntries(t))},e}(),Jt=function(){function e(){this.index={}}return e.prototype.add=function(e){v(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Te(ie.comparator),o=!r.has(n);return this.index[t]=r.add(n),o},e.prototype.getEntries=function(e){return(this.index[e]||new Te(ie.comparator)).toArray()},e}(),Zt=8,Xt=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var o=this;v(n<r&&n>=0&&r<=Zt,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(e){e.createObjectStore(en.store)}(e),function(e){e.createObjectStore(tn.store,{keyPath:tn.keyPath}),e.createObjectStore(nn.store,{keyPath:nn.keyPath,autoIncrement:!0}).createIndex(nn.userMutationsIndex,nn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(rn.store)}(e),hn(e),function(e){e.createObjectStore(on.store)}(e));var i=Be.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(un.store),e.deleteObjectStore(sn.store),e.deleteObjectStore(ln.store)}(e),hn(e)),i=i.next(function(){return function(e){var t=e.store(ln.store),n=new ln(0,0,_e.MIN.toTimestamp(),0);return t.put(ln.key,n)}(t)})),n<4&&r>=4&&(0!==n&&(i=i.next(function(){return function(e,t){return t.store(nn.store).loadAll().next(function(n){e.deleteObjectStore(nn.store),e.createObjectStore(nn.store,{keyPath:nn.keyPath,autoIncrement:!0}).createIndex(nn.userMutationsIndex,nn.userMutationsKeyPath,{unique:!0});var r=t.store(nn.store),o=n.map(function(e){return r.put(e)});return Be.waitFor(o)})}(e,t)})),i=i.next(function(){!function(e){e.createObjectStore(fn.store,{keyPath:fn.keyPath})}(e),function(e){e.createObjectStore(dn.store,{keyPath:"id",autoIncrement:!0})}(e)})),n<5&&r>=5&&(i=i.next(function(){return o.removeAcknowledgedMutations(t)})),n<6&&r>=6&&(i=i.next(function(){return function(e){e.createObjectStore(an.store)}(e),o.addDocumentGlobal(t)})),n<7&&r>=7&&(i=i.next(function(){return o.ensureSequenceNumbers(t)})),n<8&&r>=8&&(i=i.next(function(){return o.createCollectionParentIndex(e,t)})),i},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(on.store).iterate(function(e,n){t+=$t(n)}).next(function(){var n=new an(t);return e.store(an.store).put(an.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(tn.store),r=e.store(nn.store);return n.loadAll().next(function(n){return Be.forEach(n,function(n){var o=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(nn.userMutationsIndex,o).next(function(r){return Be.forEach(r,function(r){v(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var o=t.serializer.fromDbMutationBatch(r);return ze(e,n.userId,o).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(un.store),n=e.store(on.store);return ut(e).next(function(e){var r=[];return n.iterate(function(n,o){var i=new ie(n),a=function(e){return[0,me(e)]}(i);r.push(t.get(a).next(function(n){return n?Be.resolve():function(n){return t.put(new un(0,me(n),e))}(i)}))}).next(function(){return Be.waitFor(r)})})},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(cn.store,{keyPath:cn.keyPath});var n=t.store(cn.store),r=new Jt,o=function(e){if(r.add(e)){var t=e.lastSegment(),o=e.popLast();return n.put({collectionId:t,parent:me(o)})}};return t.store(on.store).iterate({keysOnly:!0},function(e,t){var n=new ie(e);return o(n.popLast())}).next(function(){return t.store(rn.store).iterate({keysOnly:!0},function(e,t){var n=be(e[1]);return o(n.popLast())})})},e}(),en=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}(),tn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),nn=function(){function e(e,t,n,r,o){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=o}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),rn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,me(t)]},e.key=function(e,t,n){return[e,me(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),on=function(){function e(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}return e.store="remoteDocuments",e}(),an=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),sn=function(){function e(e,t,n,r,o,i){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=o,this.query=i}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),un=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,v(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),ln=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),cn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function hn(e){e.createObjectStore(un.store,{keyPath:un.keyPath}).createIndex(un.documentTargetsIndex,un.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(sn.store,{keyPath:sn.keyPath}).createIndex(sn.queryTargetsIndexName,sn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ln.store)}var dn=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}(),fn=function(){function e(e,t,n,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=o}return e.store="clientMetadata",e.keyPath="clientId",e}(),pn=[tn.store,nn.store,rn.store,on.store,sn.store,en.store,ln.store,un.store].concat([fn.store,dn.store]).concat([an.store]).concat([cn.store]),yn=function(){function e(){this.collectionParentsCache=new Jt}return e.prototype.addToCollectionParentIndex=function(e,t){if(v(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(t)){v(t.length>=1,"Invalid collection path.");var n=t.lastSegment(),r=t.popLast();return mn(e).put({collectionId:n,parent:me(r)})}return Be.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[$(t),""],!1,!0);return mn(e).loadAll(r).next(function(e){for(var r=0,o=e;r<o.length;r++){var i=o[r];if(i.collectionId!==t)break;n.push(be(i.parent))}return n})},e}();function mn(e){return Nn.getStore(e,cn.store)}var gn=function(e){return e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution",e}({}),vn=function(){function e(e,t,n,r,o,i){void 0===o&&(o=_e.MIN),void 0===i&&(i=w()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.resumeToken=i}return e.prototype.withSequenceNumber=function(t){return new e(this.query,this.targetId,this.purpose,t,this.snapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.query,this.targetId,this.purpose,this.sequenceNumber,n,t)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),bn=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=ue.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new jt(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=ue.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new Bt(t,n)):g("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof Ft){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e);return new on(null,null,t,o=e.hasCommittedMutations)}if(e instanceof jt){var n=e.key.path.toArray(),r=this.toDbTimestamp(e.version),o=e.hasCommittedMutations;return new on(null,new function(e,t){this.path=e,this.readTime=t}(n,r),null,o)}return e instanceof Bt?(n=e.key.path.toArray(),r=this.toDbTimestamp(e.version),new on(new function(e,t){this.path=e,this.version=t}(n,r),null,null,!0)):g("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new function(e,t){this.seconds=e,this.nanoseconds=t}(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new we(e.seconds,e.nanoseconds);return _e.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),o=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new nn(e,t.batchId,t.localWriteTime.toMillis(),r,o)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),o=we.fromMillis(e.localWriteTimeMs);return new Fe(e.batchId,o,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(me(e.path))}),t},e.prototype.fromDbResourcePaths=function(e){for(var t=Re(),n=0,r=e;n<r.length;n++)t=t.add(new ue(be(r[n])));return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new vn(t,e.targetId,gn.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},e.prototype.toDbTarget=function(e){v(gn.Listen===e.purpose,"Only queries with purpose "+gn.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),e.resumeToken instanceof Uint8Array?(v("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new sn(e.targetId,e.query.canonicalId(),r,n,e.sequenceNumber,t)},e}();function wn(e,t){var n=e[1],r=t[1],o=Q(e[0],t[0]);return 0===o?Q(n,r):o}var _n=function(){function e(e){this.maxElements=e,this.buffer=new Te(wn),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();wn(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),Cn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},En=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Sn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==En.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Z.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(An)})},e}(),Tn=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Be.resolve(re.INVALID);var r=new _n(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===En.COLLECTION_DISABLED?(p("LruGarbageCollector","Garbage collection skipped; disabled"),Be.resolve(Cn)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Cn):n.runGarbageCollection(e,t)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,o,i,a,s,u,l=this,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>l.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),l.nthSequenceNumber(e,r)}).next(function(r){return n=r,a=Date.now(),l.removeTargets(e,n,t)}).next(function(t){return o=t,s=Date.now(),l.removeOrphanedDocuments(e,n)}).next(function(e){return u=Date.now(),d()<=h.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(i-c)+"ms\n\tDetermined least recently used "+r+" in "+(a-i)+"ms\n\tRemoved "+o+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-c)+"ms"),Be.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})})},e}(),In="IndexedDbPersistence",Dn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",kn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",xn=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return a.__extends(t,e),t}(function(){}),Nn=function(){function e(t,n,r,o,i,a,s,u){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new Mn(this,i),this.dbName=n+e.MAIN_DATABASE,this.serializer=new bn(s),this.document=o.document,this.queryCache=new it(this.referenceDelegate,this.serializer),this.indexManager=new yn,this.remoteDocumentCache=new Gt(this.serializer,this.indexManager,this.allowTabSynchronization),!o.window||!o.window.localStorage)throw new C(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=o.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof xn)return Ze.getStore(e.simpleDbTransaction,t);throw g("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:if(!e.isAvailable())throw new C(_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}})})},e.prototype.start=function(){var e=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),Ze.openOrCreate(this.dbName,Zt,new Xt(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[ln.store],function(t){return ut(t).next(function(t){e.listenSequence=new re(t,e.sequenceNumberSyncer)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",pn,function(t){return e.remoteDocumentCache.start(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener(function(n){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",pn,function(t){return On(t).put(new fn(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},e.prototype.verifyPrimaryLease=function(e){var t=this;return Pn(e).get(en.key).next(function(e){return Be.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){return On(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return a.__generator(this,function(o){switch(o.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(o){var i=e.getStore(o,fn.store);return i.loadAll().next(function(e){t=r.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===t.indexOf(e)})}).next(function(){return Be.forEach(n,function(e){return i.delete(e.clientId)})}).next(function(){if((t=t.filter(function(e){return e.clientId!==r.clientId})).length>0){var e=t.map(function(e){return e.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,e);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(o,n)}})})]);case 1:o.sent(),n.forEach(function(e){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(e.clientId))}),o.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Z.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Pn(e).get(en.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new C(_.FAILED_PRECONDITION,kn);return!1}}return!(!t.networkEnabled||!t.inForeground)||On(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){return!(t.clientId===e.clientId||!(!t.networkEnabled&&e.networkEnabled||!t.inForeground&&e.inForeground&&t.networkEnabled===e.networkEnabled))})})}).next(function(e){return t.isPrimary!==e&&p(In,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[en.store,fn.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[fn.store],function(t){return On(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},e.clearPersistence=function(t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return e.isAvailable()?[4,Ze.delete(t+e.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}})})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),qe.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getQueryCache=function(){return v(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return v(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;return p(In,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",pn,function(o){return"readwrite-primary"===t?r.verifyPrimaryLease(o).next(function(t){if(!t)throw y("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new C(_.FAILED_PRECONDITION,Dn);return n(new xn(o,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(o).next(function(){return e})}):r.verifyAllowTabSynchronization(o).next(function(){return n(new xn(o,r.listenSequence.next()))})})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Pn(e).get(en.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new C(_.FAILED_PRECONDITION,kn)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new en(this.clientId,this.allowTabSynchronization,Date.now());return Pn(e).put(en.key,t)},e.isAvailable=function(){return Ze.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Pn(e);return n.get(en.key).next(function(e){return t.isLocalClient(e)?(p(In,"Releasing primary lease."),n.delete(en.key)):Be.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(y("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return p(In,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return y(In,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){y("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function An(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){if(!function(e){return e.code===_.FAILED_PRECONDITION&&e.message===Dn}(e))throw e;return p(In,"Unexpectedly lost primary lease"),[2]})})}function Pn(e){return e.store(en.store)}function On(e){return e.store(fn.store)}var Mn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new Tn(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Rn(e,t)},e.prototype.removeReference=function(e,t){return Rn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Rn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Be.resolve(!0):function(e,t){var n=!1;return Qe(e).iterateSerial(function(r){return Ue(e,r,t).next(function(e){return e&&(n=!0),Be.resolve(!e)})}).next(function(){return n})}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[],i=0;return this.forEachOrphanedDocument(e,function(a,s){if(s<=t){var u=n.isPinned(e,a).next(function(t){if(!t)return i++,r.getEntry(e,a).next(function(){return r.removeEntry(a),lt(e).delete([0,me(a.path)])})});o.push(u)}}).next(function(){return Be.waitFor(o)}).next(function(){return r.apply(e)}).next(function(){return i})},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Rn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=lt(e),o=re.INVALID;return r.iterate({index:un.documentTargetsIndex},function(e,r){var i=r.path,a=r.sequenceNumber;0===e[0]?(o!==re.INVALID&&t(new ue(be(n)),o),o=a,n=i):o=re.INVALID}).next(function(){o!==re.INVALID&&t(new ue(be(n)),o)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Rn(e,t){return lt(e).put(function(e,t){return new un(0,me(e.path),t)}(t,e.currentSequenceNumber))}var Ln=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,o=n;r<o.length;r++)e=o[r].applyToLocalView(t,e);return e})},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=xe();return t.forEach(function(e,t){for(var o=0,i=n;o<i.length;o++)t=i[o].applyToLocalView(e,t);r=r.insert(e,t)}),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var o=n.applyLocalMutationsToDocuments(e,t,r),i=ke();return o.forEach(function(e,t){t||(t=new jt(e,_e.forDeletedDoc())),i=i.insert(e,t)}),i})},e.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new ue(t)).next(function(e){var t=Ae();return e instanceof Ft&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;v(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=t.collectionGroup,o=Ae();return this.indexManager.getCollectionParents(e,r).next(function(i){return Be.forEach(i,function(i){var a=t.asCollectionQueryAtPath(i.child(r));return n.getDocumentsMatchingCollectionQuery(e,a).next(function(e){e.forEach(function(e,t){o=o.insert(e,t)})})}).next(function(){return o})})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(r){return n=r,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return o.addMissingBaseDocuments(e,r=t,n).next(function(e){n=e;for(var t=0,o=r;t<o.length;t++)for(var i=o[t],a=0,s=i.mutations;a<s.length;a++){var u=s[a],l=u.key,c=n.get(l),h=u.applyToLocalView(c,c,i.localWriteTime);n=h instanceof Ft?n.insert(l,h):n.remove(l)}})}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Re(),o=0,i=t;o<i.length;o++)for(var a=0,s=i[o].mutations;a<s.length;a++){var u=s[a];u instanceof mt&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.remoteDocumentCache.getEntries(e,r).next(function(e){return e.forEach(function(e,t){null!==t&&t instanceof Ft&&(l=l.insert(e,t))}),l})},e}(),Vn=function(){function e(){this.refsByKey=new Te(Fn.compareByKey),this.refsByTarget=new Te(Fn.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new Fn(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new Fn(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=ue.EMPTY,r=new Fn(n,e),o=new Fn(n,e+1),i=[];return this.refsByTarget.forEachInRange([r,o],function(e){t.removeRef(e),i.push(e.key)}),i},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=ue.EMPTY,n=new Fn(t,e),r=new Fn(t,e+1),o=Re();return this.refsByTarget.forEachInRange([n,r],function(e){o=o.add(e.key)}),o},e.prototype.containsKey=function(e){var t=new Fn(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Fn=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return ue.comparator(e.key,t.key)||Q(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return Q(e.targetOrBatchId,t.targetOrBatchId)||ue.comparator(e.key,t.key)},e}(),jn=function(){function e(e,t){this.persistence=e,this.localViewReferences=new Vn,this.queryDataByTarget={},v(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new Ln(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(o){return r=o,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new Ln(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var o=[],i=[],a=Re(),s=0,u=r;s<u.length;s++){o.push((f=u[s]).batchId);for(var l=0,c=f.mutations;l<c.length;l++)a=a.add(c[l].key)}for(var h=0,d=e;h<d.length;h++){var f;i.push((f=d[h]).batchId);for(var p=0,y=f.mutations;p<y.length;p++)a=a.add(y[p].key)}return t.localDocuments.getDocuments(n,a).next(function(e){return{affectedDocuments:e,removedBatchIds:o,addedBatchIds:i}})})})},e.prototype.localWrite=function(e){var t=this,n=we.now(),r=e.reduce(function(e,t){return e.add(t.key)},Re());return this.persistence.runTransaction("Locally write mutations","readwrite",function(o){return t.localDocuments.getDocuments(o,r).next(function(r){for(var i=[],a=0,s=e;a<s.length;a++){var u=s[a],l=u.extractBaseValue(r.get(u.key));null!=l&&i.push(new mt(u.key,l,l.fieldMask(),ft.exists(!0)))}return t.mutationQueue.addMutationBatch(o,n,i,e).next(function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}})})})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):Be.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=e.batch.keys(),o=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,o)}).next(function(){return o.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return v(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,r=this.remoteDocuments.newChangeBuffer(),o=t.snapshotVersion;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var a=[];I(t.targetChanges,function(t,r){var s=n.queryDataByTarget[t];if(s){a.push(n.queryCache.removeMatchingKeys(i,r.removedDocuments,t).next(function(){return n.queryCache.addMatchingKeys(i,r.addedDocuments,t)}));var u=r.resumeToken;if(u.length>0){var l=s.withResumeToken(u,o);n.queryDataByTarget[t]=l,e.shouldPersistQueryData(s,l,r)&&a.push(n.queryCache.updateQueryData(i,l))}}});var s=ke(),u=Re();if(t.documentUpdates.forEach(function(e,t){u=u.add(e)}),a.push(r.getEntries(i,u).next(function(e){t.documentUpdates.forEach(function(o,u){var l=e.get(o);u instanceof jt&&u.version.isEqual(_e.MIN)?(r.removeEntry(o),s=s.insert(o,u)):null==l||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(_e.MIN.isEqual(t.snapshotVersion)&&y("LocalStore","Cannot add a document when the remote version is zero"),r.addEntry(u),s=s.insert(o,u)):p("LocalStore","Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",u.version),t.resolvedLimboDocuments.has(o)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,o))})})),!o.isEqual(_e.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(e){return v(o.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+o+" < "+e),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,o)});a.push(l)}return Be.waitFor(a).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(i,s)})})},e.shouldPersistQueryData=function(e,t,n){return v(t.resumeToken.length>0,"Attempted to persist query data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Be.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),Be.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(o){return o?(r=o,Be.resolve()):t.queryCache.allocateTargetId(n).next(function(o){return r=new vn(e,o,gn.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return v(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r,r})})},e.prototype.releaseQuery=function(e,t){var n=this;return this.persistence.runTransaction("Release query",t?"readwrite":"readwrite-primary",function(r){return n.queryCache.getQueryData(r,e).next(function(o){v(null!=o,"Tried to release nonexistent query: "+e);var i=o.targetId,a=n.queryDataByTarget[i],s=n.localViewReferences.removeReferencesForId(i);return delete n.queryDataByTarget[i],t?Be.resolve():Be.forEach(s,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,o=t.batch,i=o.keys(),a=Be.resolve();return i.forEach(function(r){a=a.next(function(){return n.getEntry(e,r)}).next(function(e){var i=e,a=t.docVersions.get(r);v(null!==a,"ackVersions should contain every doc in the write."),(!i||i.version.compareTo(a)<0)&&((i=o.applyToRemoteDocument(r,i,t))?n.addEntry(i):v(!e,"Mutation batch "+o+" applied to document "+e+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(e,o)})},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.queryDataByTarget)})},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),Bn=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=w(),this.batchesByDocumentKey=new Te(Fn.compareByKey)}return e.prototype.checkEmpty=function(e){return Be.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,o=this.indexOfExistingBatchId(r,"acknowledged");v(0===o,"Can only acknowledge the first batch in the mutation queue");var i=this.mutationQueue[o];return v(r===i.batchId,"Queue ordering failure: expected batch "+r+", got batch "+i.batchId),this.lastStreamToken=n,Be.resolve()},e.prototype.getLastStreamToken=function(e){return Be.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Be.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){v(0!==r.length,"Mutation batches should not be empty");var o=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<o,"Mutation batchIDs must be monotonically increasing order");var i=new Fe(o,t,n,r);this.mutationQueue.push(i);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Fn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return Be.resolve(i)},e.prototype.lookupMutationBatch=function(e,t){return Be.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return v(null!=n,"Failed to find local mutation batch."),Be.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.indexOfBatchId(t+1),r=n<0?0:n;return Be.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Be.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return Be.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Fn(t,0),o=new Fn(t,Number.POSITIVE_INFINITY),i=[];return this.batchesByDocumentKey.forEachInRange([r,o],function(e){v(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);v(null!==r,"Batches in the index must exist in the main table"),i.push(r)}),Be.resolve(i)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Te(Q);return t.forEach(function(e){var t=new Fn(e,0),o=new Fn(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,o],function(t){v(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),Be.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,o=n;ue.isDocumentKey(o)||(o=o.child(""));var i=new Fn(new ue(o),0),a=new Te(Q);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)},i),Be.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;v(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Be.forEach(t.mutations,function(o){var i=new Fn(o.key,t.batchId);return r=r.delete(i),n.referenceDelegate.removeMutationReference(e,o.key)}).next(function(){n.batchesByDocumentKey=r})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new Fn(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Be.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Be.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return v(n.batchId===e,"If found batch must match"),n},e}(),qn=function(){function e(e){this.persistence=e,this.queries=new qt(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=_e.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Vn,this.targetCount=0,this.targetIdGenerator=Ye.forQueryCache()}return e.prototype.getTargetCount=function(e){return Be.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),Be.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Be.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Be.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Be.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Be.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return v(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,Be.resolve()},e.prototype.updateQueryData=function(e,t){return v(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),Be.resolve()},e.prototype.removeQueryData=function(e,t){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Be.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,o=0,i=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=t&&!n[s.targetId]&&(r.queries.delete(a),i.push(r.removeMatchingKeysForTargetId(e,s.targetId)),o++)}),Be.waitFor(i).next(function(){return o})},e.prototype.getQueryCount=function(e){return Be.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return Be.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return g("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(function(t){o.push(r.addReference(e,t))}),Be.waitFor(o)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(function(t){o.push(r.removeReference(e,t))}),Be.waitFor(o)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Be.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Be.resolve(n)},e.prototype.containsKey=function(e,t){return Be.resolve(this.references.containsKey(t))},e}(),Un=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new Ce(ue.comparator),this.newDocumentChanges=Re(),this.size=0}return e.prototype.addEntry=function(e,t){var n=t.key,r=this.docs.get(n),o=r?r.size:0,i=this.sizer(t);return this.docs=this.docs.insert(n,{maybeDocument:t,size:i}),this.newDocumentChanges=this.newDocumentChanges.add(n),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Be.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=xe();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),Be.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t){v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Ae(),r=new ue(t.path.child("")),o=this.docs.getIteratorFrom(r);o.hasNext();){var i=o.getNext(),a=i.value.maybeDocument;if(!t.path.isPrefixOf(i.key.path))break;a instanceof Ft&&t.matches(a)&&(n=n.insert(a.key,a))}return Be.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return Be.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e){var t=this,n=ke();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),o=r?r.maybeDocument:new jt(e,_e.forDeletedDoc());n=n.insert(e,o)}),this.newDocumentChanges=Re(),Be.resolve(n)},e.prototype.newChangeBuffer=function(){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return Be.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach(function(r,o){o?n.push(t.documentCache.addEntry(e,o)):t.documentCache.removeEntry(r)}),Be.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Ut),e}(),zn=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new re(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new qn(this),this.indexManager=new Yt,this.remoteDocumentCache=new Un(this.indexManager,function(e){return n.referenceDelegate.documentSize(e)})}return e.createLruPersistence=function(t,n,r){return new e(t,function(e){return new Hn(e,new bn(n),r)})},e.createEagerPersistence=function(t){return new e(t,function(e){return new Wn(e)})},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Bn(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;p("MemoryPersistence","Starting transaction:",e);var o=new Gn(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(o).next(function(e){return r.referenceDelegate.onTransactionCommitted(o).next(function(){return e})}).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return Be.or((n=this.mutationQueues,r=[],D(n,function(e,t){return r.push(t)}),r).map(function(n){return function(){return n.containsKey(e,t)}}));var n,r},e}(),Gn=function(e){this.currentSequenceNumber=e},Wn=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw g("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Be.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Be.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Be.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Be.forEach(this.orphanedDocuments,function(r){return t.isReferenced(e,r).next(function(e){e||n.removeEntry(r)})}).next(function(){return t._orphanedDocuments=null,n.apply(e)})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Be.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Be.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Hn=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new qt(function(e){return me(e.path)}),this.garbageCollector=new Tn(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Be.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Be.forEach(this.orphanedSequenceNumbers,function(r,o){return n.isPinned(e,r,o).next(function(e){return e?Be.resolve():t(o)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,o=this.persistence.getRemoteDocumentCache(),i=o.newChangeBuffer();return o.forEachDocumentKey(e,function(o){return n.isPinned(e,o,t).next(function(e){e||(r++,i.removeEntry(o))})}).next(function(){return i.apply(e)}).next(function(){return r})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Be.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Be.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Be.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Be.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw g("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Be.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Be.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Be.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),Qn=Number,Kn=Qn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),$n=Qn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Yn=Qn.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Jn(e){return null===e||void 0===e}function Zn(e){return Yn(e)&&e<=$n&&e>=Kn}var Xn=1e3,er=1.5,tr=6e4,nr=function(){function e(e,t,n,r,o){void 0===n&&(n=Xn),void 0===r&&(r=er),void 0===o&&(o=tr),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=o,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),o=Math.max(0,n-r);this.currentBaseMs>0&&p("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,o,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),rr=function(e){return e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff",e}({}),or=function(){function e(e,t,n,r,o,i){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=o,this.listener=i,this.state=rr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new nr(e,t)}return e.prototype.isStarted=function(){return this.state===rr.Starting||this.state===rr.Open||this.state===rr.Backoff},e.prototype.isOpen=function(){return this.state===rr.Open},e.prototype.start=function(){this.state!==rr.Error?(v(this.state===rr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(rr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=rr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return this.isOpen()?[2,this.close(rr.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(e===rr.Error||Jn(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==rr.Error?this.backoff.reset():t&&t.code===_.RESOURCE_EXHAUSTED?(y(t.toString()),y("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===_.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;v(this.state===rr.Initial,"Must be in initial state to auth"),this.state=rr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new C(_.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;v(this.state===rr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return v(t.state===rr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=rr.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;v(this.state===rr.Error,"Should only perform backoff when in Error state"),this.state=rr.Backoff,this.backoff.backoffAndRun(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){return v(this.state===rr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=rr.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return v(this.isStarted(),"Can't handle server close on non-started stream"),p("PersistentStream","close with error: "+e),this.stream=null,this.close(rr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),ir=function(e){function t(t,n,r,o,i){var a=e.call(this,t,Z.ListenStreamConnectionBackoff,Z.ListenStreamIdle,n,r,i)||this;return a.serializer=o,a}return a.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(or),ar=function(e){function t(t,n,r,o,i){var a=e.call(this,t,Z.WriteStreamConnectionBackoff,Z.WriteStreamIdle,n,r,i)||this;return a.serializer=o,a.handshakeComplete_=!1,a.lastStreamToken=w(),a}return a.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(v(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return v(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(or),sr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new ar(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new ir(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=ke();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var o=[];return e.forEach(function(e){var t=r.get(e);v(!!t,"Missing entity in write response for "+e),o.push(t)}),o})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===_.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),ur=function(){function e(e){this.datastore=e,this.readVersions=Oe(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new C(_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach(function(e){e instanceof jt||e instanceof Ft?n.recordVersion(e):g("Document in a transaction was a "+e.constructor.name)}),[2,t]}})})},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new vt(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),!e.isEmpty())throw new C(_.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(e){var t;if(e instanceof Ft)t=e.version;else{if(!(e instanceof jt))throw g("Document in a transaction was a "+e.constructor.name);t=_e.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new C(_.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?ft.updateTime(t):ft.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(_e.forDeletedDoc()))throw new C(_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ft.updateTime(t)}return ft.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){v(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}(),lr=function(e){return e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline",e}({}),cr=function(e){return e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState",e}({}),hr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=lr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(lr.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Z.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,v(e.state===lr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(lr.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===lr.Online?(this.setAndBroadcast(lr.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(lr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===lr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(y(t),this.shouldWarnClientIsOffline=!1):p("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}(),dr=function(e){return e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e}({});function fr(e){switch(e){case _.OK:return g("Treated status OK as error");case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return g("Unknown status code: "+e)}}function pr(e){if(void 0===e)return y("GRPC error has no .code"),_.UNKNOWN;switch(e){case dr.OK:return _.OK;case dr.CANCELLED:return _.CANCELLED;case dr.UNKNOWN:return _.UNKNOWN;case dr.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case dr.INTERNAL:return _.INTERNAL;case dr.UNAVAILABLE:return _.UNAVAILABLE;case dr.UNAUTHENTICATED:return _.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case dr.NOT_FOUND:return _.NOT_FOUND;case dr.ALREADY_EXISTS:return _.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return _.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case dr.ABORTED:return _.ABORTED;case dr.OUT_OF_RANGE:return _.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return _.UNIMPLEMENTED;case dr.DATA_LOSS:return _.DATA_LOSS;default:return g("Unknown status code: "+e)}}var yr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||ue.comparator(t.key,n.key)}:function(e,t){return ue.comparator(e.key,t.key)},this.keyedMap=Ae(),this.sortedSet=new Ce(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var o=n.getNext().key,i=r.getNext().key;if(!o.isEqual(i))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),mr=function(e){return e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata",e}({}),gr=function(e){return e[e.Local=0]="Local",e[e.Synced=1]="Synced",e}({}),vr=function(){function e(){this.changeMap=new Ce(ue.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==mr.Added&&n.type===mr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===mr.Metadata&&n.type!==mr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===mr.Modified&&n.type===mr.Modified?this.changeMap=this.changeMap.insert(t,{type:mr.Modified,doc:e.doc}):e.type===mr.Modified&&n.type===mr.Added?this.changeMap=this.changeMap.insert(t,{type:mr.Added,doc:e.doc}):e.type===mr.Removed&&n.type===mr.Added?this.changeMap=this.changeMap.remove(t):e.type===mr.Removed&&n.type===mr.Modified?this.changeMap=this.changeMap.insert(t,{type:mr.Removed,doc:n.doc}):e.type===mr.Added&&n.type===mr.Removed?this.changeMap=this.changeMap.insert(t,{type:mr.Modified,doc:e.doc}):g("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),br=function(){function e(e,t,n,r,o,i,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,o){var i=[];return n.forEach(function(e){i.push({type:mr.Added,doc:e})}),new e(t,n,yr.emptySet(n),i,r,o,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),wr=function(){function e(e,t,n,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,o=((r={})[t]=_r.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(_e.MIN,o,Ve(),ke(),Re())},e}(),_r=function(){function e(e,t,n,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(w(),n,Re(),Re(),Re())},e}(),Cr=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},Er=function(e,t){this.targetId=e,this.existenceFilter=t},Sr=function(e){return e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset",e}({}),Tr=function(){return function(e,t,n,r){void 0===n&&(n=w()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}(),Ir=function(){function e(){this.pendingResponses=0,this.documentChanges=xr(),this._resumeToken=w(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=Re(),t=Re(),n=Re();return this.documentChanges.forEach(function(r,o){switch(o){case mr.Added:e=e.add(r);break;case mr.Modified:t=t.add(r);break;case mr.Removed:n=n.add(r);break;default:g("Encountered invalid change type: "+o)}}),new _r(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=xr()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Dr=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=ke(),this.pendingDocumentTargetMapping=kr(),this.pendingTargetResets=new Te(Q)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Ft?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof jt&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var o=0,i=e.removedTargetIds;o<i.length;o++)this.removeDocumentFromTarget(r=i[o],e.key,e.newDoc)},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case Sr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Sr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Sr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),v(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Sr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Sr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:g("Unknown target watch change state: "+e.state)}})},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):I(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var o=r.query;if(o.isDocumentQuery())if(0===n){var i=new ue(o.path);this.removeDocumentFromTarget(t,i,new jt(i,_e.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};I(this.targetStates,function(r,o){var i=t.queryDataForActiveTarget(r);if(i){if(o.current&&i.query.isDocumentQuery()){var a=new ue(i.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new jt(a,e))}o.hasPendingChanges&&(n[r]=o.toTargetChange(),o.clearPendingChanges())}});var r=Re();this.pendingDocumentTargetMapping.forEach(function(e,n){var o=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===gn.LimboResolution||(o=!1,!1)}),o&&(r=r.add(e))});var o=new wr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=ke(),this.pendingDocumentTargetMapping=kr(),this.pendingTargetResets=new Te(Q),o},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?mr.Modified:mr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,mr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Ir),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Te(Q),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.queryDataForActiveTarget(e);return t||p("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;v(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Ir,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function kr(){return new Ce(ue.comparator)}function xr(){return new Ce(ue.comparator)}var Nr="RemoteStore",Ar=function(){function e(e,t,n,r,o){var i=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=o,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return a.__awaiter(i,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(p(Nr,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new hr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(lr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(lr.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(p(Nr,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return p(Nr,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(lr.Unknown),[2]}})})},e.prototype.listen=function(e){v(!S(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){v(S(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),k(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(lr.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Dr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!k(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){var e=this;return a.__generator(this,function(t){return I(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return void 0===e&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(lr.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(lr.Online),e instanceof Tr&&e.state===Sr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Cr?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Er?this.watchChangeAggregator.handleExistenceFilter(e):(v(e instanceof Tr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(_e.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;v(!e.isEqual(_e.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return I(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var o=t.listenTargets[n];o&&(t.listenTargets[n]=o.withResumeToken(r.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(w(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new vn(n.query,e,gn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;v(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return a.__awaiter(t,void 0,void 0,function(){return a.__generator(this,function(t){return S(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},e.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(e=t.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:t.sent(),t.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++)e.writeStream.writeMutations(n[t].mutations)}).catch(An)},e.prototype.onMutationResult=function(e,t){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),o=je.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(o).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return a.__awaiter(this,void 0,void 0,function(){var t=this;return a.__generator(this,function(n){return void 0===e&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]:[2]})})},e.prototype.handleHandshakeError=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return fr(e.code)?(p(Nr,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=w(),[2,this.localStore.setLastStreamToken(w()).catch(An)]):[2]})})},e.prototype.handleWriteError=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){return fr(o=e.code)&&o!==_.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2];var o})})},e.prototype.createTransaction=function(){return new ur(this.datastore)},e.prototype.restartNetwork=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(lr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},e.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(p(Nr,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(lr.Unknown),t.label=4;case 4:return[2]}})})},e}(),Pr=function(){function e(e,t){if(N("GeoPoint",arguments,2),O("GeoPoint","number",1,e),O("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new C(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new C(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return Q(this._lat,e._lat)||Q(this._long,e._long)},e}(),Or=function(){function e(e,t,n,r,o,i,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.startAt=i,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)this.memoizedOrderBy=e.isKeyField()?[Gr]:[new zr(e),Gr];else{v(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,o=this.explicitOrderBy;r<o.length;r++){var i=o[r];this.memoizedOrderBy.push(i),i.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:qr.ASCENDING)===qr.ASCENDING?Gr:Wr)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){v(null==this.getInequalityFilterField()||!(t instanceof Rr)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,o=this.orderBy;r<o.length;r++)e+=o[r].canonicalId(),e+=",";Jn(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Jn(this.limit)||(e+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,o=this.orderBy;r<o.length;r++){var i=o[r],a=i.compare(e,t);if(0!==a)return a;n=n||i.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!Jn(this.limit)},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof Rr&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof Rr&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return ue.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):ue.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){v(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),Mr=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return g("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),Rr=function(e){function t(t,n,r){var o=e.call(this)||this;return o.field=t,o.op=n,o.value=r,o}return a.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===Mr.IN?(v(r instanceof Lt,"Comparing on key with IN, but filter value not an ArrayValue"),v(r.internalValue.every(function(e){return e instanceof Ot}),"Comparing on key with IN, but an array value was not a RefValue"),new Vr(e,r)):(v(r instanceof Ot,"Comparing on key, but filter value not a RefValue"),v(n!==Mr.ARRAY_CONTAINS&&n!==Mr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new Lr(e,n,r));if(r.isEqual(Et.INSTANCE)){if(n!==Mr.EQUAL)throw new C(_.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(kt.NAN)){if(n!==Mr.EQUAL)throw new C(_.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===Mr.ARRAY_CONTAINS?new Fr(e,r):n===Mr.IN?(v(r instanceof Lt,"IN filter has invalid value: "+r.toString()),new jr(e,r)):n===Mr.ARRAY_CONTAINS_ANY?(v(r instanceof Lt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Br(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case Mr.LESS_THAN:return e<0;case Mr.LESS_THAN_OR_EQUAL:return e<=0;case Mr.EQUAL:return 0===e;case Mr.GREATER_THAN:return e>0;case Mr.GREATER_THAN_OR_EQUAL:return e>=0;default:return g("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[Mr.LESS_THAN,Mr.LESS_THAN_OR_EQUAL,Mr.GREATER_THAN,Mr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(function(){}),Lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=ue.comparator(e.key,this.value.key);return this.matchesComparison(t)},t}(Rr),Vr=function(e){function t(t,n){var r=e.call(this,t,Mr.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some(function(t){return e.key.isEqual(t.key)})},t}(Rr),Fr=function(e){function t(t,n){return e.call(this,t,Mr.ARRAY_CONTAINS,n)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Lt&&t.contains(this.value)},t}(Rr),jr=function(e){function t(t,n){var r=e.call(this,t,Mr.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(Rr),Br=function(e){function t(t,n){var r=e.call(this,t,Mr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Lt&&n.internalValue.some(function(e){return t.value.contains(e)})},t}(Rr),qr=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),Ur=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},e.prototype.sortsBeforeDocument=function(e,t){v(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var o=e[r],i=this.position[r];if(o.field.isKeyField())v(i instanceof Ot,"Bound has a non-key value where the key path is being used."),n=ue.comparator(i.key,t.key);else{var a=t.field(o.field);v(null!==a,"Field should exist since document matched the orderBy already."),n=i.compareTo(a)}if(o.dir===qr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++)if(!this.position[t].isEqual(e.position[t]))return!1;return!0},e}(),zr=function(){function e(e,t){this.field=e,void 0===t&&(t=qr.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Ft.compareByKey(e,t):Ft.compareByField(this.field,e,t);switch(this.dir){case qr.ASCENDING:return n;case qr.DESCENDING:return-1*n;default:return g("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),Gr=new zr(se.keyField(),qr.ASCENDING),Wr=new zr(se.keyField(),qr.DESCENDING),Hr=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new At(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),Qr=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=Yr(e),n=function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)},r=0,o=this.elements;r<o.length;r++)n(o[r]);return new Lt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&K(t.elements,this.elements)},e}(),Kr=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=Yr(e),n=function(e){t=t.filter(function(t){return!t.isEqual(e)})},r=0,o=this.elements;r<o.length;r++)n(o[r]);return new Lt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&K(t.elements,this.elements)},e}(),$r=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);return n instanceof Dt&&this.operand instanceof Dt?new Dt(n.internalValue+this.operand.internalValue):new kt(n.internalValue+this.operand.internalValue)},e.prototype.applyToRemoteDocument=function(e,t){return v(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Tt?e:new Dt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function Yr(e){return e instanceof Lt?e.internalValue.slice():[]}var Jr,Zr,Xr=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),eo=((Jr={})[qr.ASCENDING.name]="ASCENDING",Jr[qr.DESCENDING.name]="DESCENDING",Jr),to=((Zr={})[Mr.LESS_THAN.name]="LESS_THAN",Zr[Mr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Zr[Mr.GREATER_THAN.name]="GREATER_THAN",Zr[Mr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Zr[Mr.EQUAL.name]="EQUAL",Zr[Mr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Zr[Mr.IN.name]="IN",Zr[Mr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Zr),no=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(e,t){v(!Jn(e),t+" is missing")}function oo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):g("can't parse "+e)}var io=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?_.UNKNOWN:pr(e.code);return new C(t,e.message||"")},e.prototype.toInt32Value=function(e){return Jn(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return Jn(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);v(!!e,"Cannot deserialize null or undefined timestamp.");var t=oo(e.seconds||"0");return new we(t,e.nanos||0)},e.prototype.fromIso8601String=function(e){var t=0,n=no.exec(e);if(v(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var o=new Date(e),i=Math.floor(o.getTime()/1e3);return new we(i,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),X.fromBase64String(e)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),X.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return v(!!e,"Trying to deserialize version that isn't set"),_e.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=ie.fromString(e);return v(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return v(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),v(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new ue(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?ie.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new ie(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new ie(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return v(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof Et)return{nullValue:"NULL_VALUE"};if(e instanceof St)return{booleanValue:e.value()};if(e instanceof Dt)return{integerValue:""+e.value()};if(e instanceof kt){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof xt?{stringValue:e.value()}:e instanceof Rt?{mapValue:this.toMapValue(e)}:e instanceof Lt?{arrayValue:this.toArrayValue(e)}:e instanceof Nt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Mt?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Pt?{bytesValue:this.toBytes(e.value())}:e instanceof Ot?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:g("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Et.INSTANCE;if("booleanValue"in e)return St.of(e.booleanValue);if("integerValue"in e)return new Dt(oo(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return kt.NAN;if("Infinity"===e.doubleValue)return kt.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return kt.NEGATIVE_INFINITY}return new kt(e.doubleValue)}if("stringValue"in e)return new xt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e)return ro(e.arrayValue,"arrayValue"),new Lt((e.arrayValue.values||[]).map(function(e){return t.fromValue(e)}));if("timestampValue"in e)return ro(e.timestampValue,"timestampValue"),new Nt(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e)return ro(e.geoPointValue,"geoPointValue"),new Mt(new Pr(e.geoPointValue.latitude||0,e.geoPointValue.longitude||0));if("bytesValue"in e){ro(e.bytesValue,"bytesValue");var n=this.fromBlob(e.bytesValue);return new Pt(n)}if("referenceValue"in e){ro(e.referenceValue,"referenceValue");var r=this.fromResourceName(e.referenceValue),o=new ne(r.get(1),r.get(3)),i=new ue(this.extractLocalPathFromResourceName(r));return new Ot(o,i)}return g("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return v(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),o=this.fromVersion(e.updateTime);return new Ft(r,o,{hasCommittedMutations:!!t},void 0,e,function(e){return n.fromValue(e)})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},e.prototype.fromFields=function(e){var t=this,n=Rt.EMPTY;return D(e,function(e,r){n=n.set(new se([e]),t.fromValue(r))}),n},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){var t=this;v(!!e.found,"Tried to deserialize a found document from a missing document."),ro(e.found.name,"doc.found.name"),ro(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Ft(n,r,{},void 0,e.found,function(e){return t.fromValue(e)})},e.prototype.fromMissing=function(e){v(!!e.missing,"Tried to deserialize a missing document from a found document."),v(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new jt(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):g("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Sr.Added:return"ADD";case Sr.Current:return"CURRENT";case Sr.NoChange:return"NO_CHANGE";case Sr.Removed:return"REMOVE";case Sr.Reset:return"RESET";default:return g("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Er)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Cr){var t;if(e.newDoc instanceof Ft)return{documentChange:{document:{name:this.toName((t=e.newDoc).key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}};if(e.newDoc instanceof jt)return{documentDelete:{document:this.toName((t=e.newDoc).key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Tr){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return dr.OK;switch(e){case _.OK:return dr.OK;case _.CANCELLED:return dr.CANCELLED;case _.UNKNOWN:return dr.UNKNOWN;case _.DEADLINE_EXCEEDED:return dr.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return dr.RESOURCE_EXHAUSTED;case _.INTERNAL:return dr.INTERNAL;case _.UNAVAILABLE:return dr.UNAVAILABLE;case _.UNAUTHENTICATED:return dr.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return dr.INVALID_ARGUMENT;case _.NOT_FOUND:return dr.NOT_FOUND;case _.ALREADY_EXISTS:return dr.ALREADY_EXISTS;case _.PERMISSION_DENIED:return dr.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return dr.FAILED_PRECONDITION;case _.ABORTED:return dr.ABORTED;case _.OUT_OF_RANGE:return dr.OUT_OF_RANGE;case _.UNIMPLEMENTED:return dr.UNIMPLEMENTED;case _.DATA_LOSS:return dr.DATA_LOSS;default:return g("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return g("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){ro(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],i=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new Tr(r,o,i,s||null)}else if("documentChange"in e){ro(e.documentChange,"documentChange"),ro(e.documentChange.document,"documentChange.name"),ro(e.documentChange.document.name,"documentChange.document.name"),ro(e.documentChange.document.updateTime,"documentChange.document.updateTime");var u=e.documentChange,l=this.fromName(u.document.name),c=this.fromVersion(u.document.updateTime),h=new Ft(l,c,{},void 0,u.document,function(e){return n.fromValue(e)});t=new Cr(u.targetIds||[],u.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){ro(e.documentDelete,"documentDelete"),ro(e.documentDelete.document,"documentDelete.document");var d=e.documentDelete;l=this.fromName(d.document),c=d.readTime?this.fromVersion(d.readTime):_e.forDeletedDoc(),h=new jt(l,c),t=new Cr([],d.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){ro(e.documentRemove,"documentRemove"),ro(e.documentRemove.document,"documentRemove");var f=e.documentRemove;l=this.fromName(f.document),t=new Cr([],f.removedTargetIds||[],l,null)}else{if(!("filter"in e))return g("Unknown change type "+JSON.stringify(e));ro(e.filter,"filter"),ro(e.filter.targetId,"filter.targetId");var p=e.filter,y=new Xr(p.count||0);t=new Er(p.targetId,y)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Sr.NoChange:"ADD"===e?Sr.Added:"REMOVE"===e?Sr.Removed:"CURRENT"===e?Sr.Current:"RESET"===e?Sr.Reset:g("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return _e.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?_e.MIN:t.readTime?this.fromVersion(t.readTime):_e.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof yt)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof vt)t={delete:this.toName(e.key)};else if(e instanceof mt)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof gt))return g("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):ft.NONE;if(e.update){ro(e.update.name,"name");var r=this.fromName(e.update.name),o=this.fromFields(e.update.fields||{});if(e.updateMask){var i=this.fromDocumentMask(e.updateMask);return new mt(r,o,i,n)}return new yt(r,o,n)}if(e.delete)return r=this.fromName(e.delete),new vt(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new gt(r,a)}return g("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return v(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?ft.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?ft.exists(e.exists):ft.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=this.fromVersion(e.updateTime?e.updateTime:t),o=null;return e.transformResults&&e.transformResults.length>0&&(o=e.transformResults.map(function(e){return n.fromValue(e)})),new function(e,t){this.version=e,this.transformResults=t}(r,o)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(v(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof Hr)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Qr)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof Kr)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof $r)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw g("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)v("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=Hr.instance;else if("appendMissingElements"in e)n=new Qr((e.appendMissingElements.values||[]).map(function(e){return t.fromValue(e)}));else if("removeAllFromArray"in e)n=new Kr((e.removeAllFromArray.values||[]).map(function(e){return t.fromValue(e)}));else if("increment"in e){var r=this.fromValue(e.increment);v(r instanceof Tt,"NUMERIC_ADD transform requires a NumberValue"),n=new $r(r)}else g("Unknown transform proto: "+JSON.stringify(e));var o=se.fromServerFormat(e.fieldPath);return new ht(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;return v(1===t,"DocumentsTarget contained other than 1 document: "+t),Or.atPath(this.fromQueryPath(e.documents[0]))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(v(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(v(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var o=this.toOrder(e.orderBy);o&&(t.structuredQuery.orderBy=o);var i=this.toInt32Value(e.limit);return void 0!==i&&(t.structuredQuery.limit=i),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,o=null;if(r>0){v(1===r,"StructuredQuery.from with more than one collection is not supported.");var i=n.from[0];i.allDescendants?o=i.collectionId:t=t.child(i.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var l=null;n.startAt&&(l=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new Or(t,o,s,a,u,l,c)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case gn.Listen:return null;case gn.ExistenceFilterMismatch:return"existence-filter-mismatch";case gn.LimboResolution:return"limbo-document";default:return g("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof Rr?t.toUnaryOrFieldFilter(e):g("Unrecognized filter: "+JSON.stringify(e))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):g("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new Ur(r,n)},e.prototype.toDirection=function(e){return eo[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return qr.ASCENDING;case"DESCENDING":return qr.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return to[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return Mr.EQUAL;case"GREATER_THAN":return Mr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Mr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Mr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Mr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Mr.ARRAY_CONTAINS;case"IN":return Mr.IN;case"ARRAY_CONTAINS_ANY":return Mr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return g("Unspecified operator");default:return g("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return se.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new zr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return Rr.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===Mr.EQUAL){if(e.value.isEqual(kt.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Et.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return Rr.create(t,Mr.EQUAL,kt.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return Rr.create(n,Mr.EQUAL,Et.INSTANCE);case"OPERATOR_UNSPECIFIED":return g("Unspecified filter");default:return g("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return se.fromServerFormat(e)});return ct.fromArray(t)},e}(),ao=function(){function e(e){this.syncEngine=e,this.queries=new qt(function(e){return e.canonicalId()}),this.onlineState=lr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},this.queries.set(t,r)),r.listeners.push(e),v(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap&&e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e,e}):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,o;return a.__generator(this,function(i){return n=!1,(r=this.queries.get(t=e.query))&&(o=r.listeners.indexOf(e))>=0&&(r.listeners.splice(o,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var o=r[n],i=this.queries.get(o.query);if(i){for(var a=0,s=i.listeners;a<s.length;a++)s[a].onViewSnapshot(o)&&(t=!0);i.viewSnap=o}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,o=n.listeners;r<o.length;r++)o[r].onError(t);this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach(function(n,r){for(var o=0,i=r.listeners;o<i.length;o++)i[o].applyOnlineStateChange(e)&&(t=!0)}),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach(function(e){e.next()})},e}(),so=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=lr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(v(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var o=r[n];o.type!==mr.Metadata&&t.push(o)}e=new br(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var i=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),i=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),i=!0),this.snap=e,i},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){return v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache||(this.options.waitForSyncWhenOnline&&t!==lr.Offline?(v(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===lr.Offline)},e.prototype.shouldRaiseEvent=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=br.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),uo=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){for(var r=Re(),o=Re(),i=0,a=n.docChanges;i<a.length;i++){var s=a[i];switch(s.type){case mr.Added:r=r.add(s.doc.key);break;case mr.Removed:o=o.add(s.doc.key)}}return new e(t,r,o)},e}(),lo=function(e){this.key=e},co=function(e){this.key=e},ho=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Re(),this.mutatedKeys=Re(),this.documentSet=new yr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new vr,o=t?t.documentSet:this.documentSet,i=t?t.mutatedKeys:this.mutatedKeys,a=o,s=!1,u=this.query.hasLimit()&&o.size===this.query.limit?o.last():null;if(e.inorderTraversal(function(e,t){var l=o.get(e),c=t instanceof Ft?t:null;c&&(v(e.isEqual(c.key),"Mismatching keys found in document changes: "+e+" != "+c.key),c=n.query.matches(c)?c:null);var h=!!l&&n.mutatedKeys.has(l.key),d=!!c&&(c.hasLocalMutations||n.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;l&&c?l.data().isEqual(c.data())?h!==d&&(r.track({type:mr.Metadata,doc:c}),f=!0):n.shouldWaitForSyncedDocument(l,c)||(r.track({type:mr.Modified,doc:c}),f=!0,u&&n.query.docComparator(c,u)>0&&(s=!0)):!l&&c?(r.track({type:mr.Added,doc:c}),f=!0):l&&!c&&(r.track({type:mr.Removed,doc:l}),f=!0,u&&(s=!0)),f&&(c?(a=a.add(c),i=d?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var l=a.last();a=a.delete(l.key),i=i.delete(l.key),r.track({type:mr.Removed,doc:l})}return v(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:i}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;v(!e.needsRefill,"Cannot apply changes that need a refill");var o=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var i=e.changeSet.getChanges();i.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case mr.Added:return 1;case mr.Modified:case mr.Metadata:return 2;case mr.Removed:return 0;default:return g("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?gr.Synced:gr.Local,u=s!==this.syncState;return this.syncState=s,0!==i.length||u?{snapshot:new br(this.query,e.documentSet,o,i,e.mutatedKeys,s===gr.Local,u,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===lr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new vr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return v(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Re(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new co(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new lo(e))}),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=Re();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return br.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===gr.Local)},e}(),fo=5,po=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=fo,this.backoff=new nr(this.asyncQueue,Z.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun(function(){return a.__awaiter(e,void 0,void 0,function(){var e,t,n=this;return a.__generator(this,function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then(function(t){n.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){n.deferred.resolve(t)}).catch(function(e){n.handleTransactionError(e)})})}).catch(function(e){n.handleTransactionError(e)}),[2]})})})},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!Jn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return t.runWithBackOff(),Promise.resolve()})):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!fr(t)}return!1},e}(),yo=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new qt(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Ce(ue.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Vn,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Ye.forSyncEngine(),this.isPrimary=void 0,this.onlineState=lr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){v(null!==e,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(this.sharedClientState.addLocalQueryTarget(t=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return o=a.sent(),i=this.sharedClientState.addLocalQueryTarget(o.targetId),t=o.targetId,[4,this.initializeViewAndComputeSnapshot(o,"current"===i)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(o),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r,o,i,s,u,l,c;return a.__generator(this,function(a){switch(a.label){case 0:return[4,this.localStore.executeQuery(n=e.query)];case 1:return r=a.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return o=a.sent(),i=new ho(n,o),s=i.computeDocChanges(r),u=_r.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&this.onlineState!==lr.Offline),v(0===(l=i.applyChanges(s,!0===this.isPrimary,u)).limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!l.snapshot,"applyChanges for new view should always return a snapshot"),c=new function(e,t,n){this.query=e,this.targetId=t,this.view=n}(n,e.targetId,i),this.queryViewsByQuery.set(n,c),this.queryViewsByTarget[e.targetId]=c,[2,l.snapshot]}})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r;return a.__generator(this,function(o){switch(o.label){case 0:return[4,this.localStore.executeQuery(e.query)];case 1:return t=o.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return n=o.sent(),r=e.view.synchronizeWithPersistedState(t,n),this.isPrimary&&this.updateTrackedLimbos(e.targetId,r.limboChanges),[2,r]}})})},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)}).catch(An)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},e.prototype.runTransaction=function(e,t,n){new po(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n=this;return a.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),D(e.targetChanges,function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(v(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?v(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(v(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,An(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===cr.RemoteStore||!this.isPrimary&&t===cr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach(function(t,r){var o=r.view.applyOnlineStateChange(e);v(0===o.limboChanges.length,"OnlineState should not affect limbo documents."),o.snapshot&&n.push(o.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r,o,i,s,u,l=this;return a.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),(r=(n=this.limboResolutionsByTarget[e])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],o=(o=new Ce(ue.comparator)).insert(r,new jt(r,_e.forDeletedDoc())),i=Re().add(r),s=new wr(_e.MIN,{},new Te(Q),o,i),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return v(!!(u=this.queryViewsByTarget[e]),"Unknown targetId: "+e),[4,this.localStore.releaseQuery(u.query,!1).then(function(){return l.removeAndCleanupQuery(u)}).catch(An)];case 2:a.sent(),this.syncEngineListener.onWatchError(u.query,t),a.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var r;return a.__generator(this,function(o){switch(o.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=o.sent())?(p("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return o.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):g("Unknown batchState: "+t),o.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return o.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n;return a.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(t=e.batch.batchId,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,An(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.rejectFailedWrite=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n;return a.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,An(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.registerPendingWritesCallback=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n;return a.__generator(this,function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}})})},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach(function(e){e.resolve()}),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach(function(t){t.forEach(function(t){t.reject(new C(_.CANCELLED,e))})}),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Ce(Q)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(v(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var o=r[n];o instanceof lo?(this.limboDocumentRefs.addReference(o.key,e),this.trackLimboChange(o)):o instanceof co?(p("SyncEngine","Document no longer in limbo: "+o.key),this.limboDocumentRefs.removeReference(o.key,e),this.limboDocumentRefs.containsKey(o.key)||this.removeLimboTarget(o.key)):g("Unknown limbo change: "+JSON.stringify(o))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){p("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Or.atPath(t.path);this.limboResolutionsByTarget[n]=new function(e){this.key=e,this.receivedDocument=!1}(t),this.remoteStore.listen(new vn(r,n,gn.LimboResolution,re.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r,o,i=this;return a.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],o=[],this.queryViewsByQuery.forEach(function(a,s){o.push(Promise.resolve().then(function(){var t=s.view.computeDocChanges(e);return t.needsRefill?i.localStore.executeQuery(s.query).then(function(e){return s.view.computeDocChanges(e,t)}):t}).then(function(e){var o=s.view.applyChanges(e,!0===i.isPrimary,t&&t.targetChanges[s.targetId]);if(i.updateTrackedLimbos(s.targetId,o.limboChanges),o.snapshot){i.isPrimary&&i.sharedClientState.updateQueryState(s.targetId,o.snapshot.fromCache?"not-current":"current"),n.push(o.snapshot);var a=uo.fromSnapshot(s.targetId,o.snapshot);r.push(a)}}))}),[4,Promise.all(o)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},e.prototype.assertSubscribed=function(e){v(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n;return a.__generator(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i,s,u=this;return a.__generator(this,function(a){switch(a.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=a.sent(),r=0,o=n;r<o.length;r++)this.remoteStore.listen(o[r]);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,i=[],s=Promise.resolve(),I(this.queryViewsByTarget,function(e,t){u.sharedClientState.isLocalQueryTarget(e)?i.push(e):s=s.then(function(){return u.unlisten(t.query)}),u.remoteStore.unlisten(t.targetId)}),[4,s]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(i)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;I(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Ce(ue.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return a.__awaiter(this,void 0,void 0,function(){var t,n,r,o,i,s,u,l,c;return a.__generator(this,function(a){switch(a.label){case 0:t=[],n=[],r=0,o=e,a.label=1;case 1:return r<o.length?(s=void 0,(u=this.queryViewsByTarget[i=o[r]])?[4,this.localStore.releaseQuery(u.query,!0)]:[3,5]):[3,11];case 2:return a.sent(),[4,this.localStore.allocateQuery(u.query)];case 3:return s=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(u)];case 4:return(l=a.sent()).snapshot&&n.push(l.snapshot),[3,9];case 5:return v(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(i)];case 6:return v(!!(c=a.sent()),"Query data for target "+i+" not found"),[4,this.localStore.allocateQuery(c)];case 7:return s=a.sent(),[4,this.initializeViewAndComputeSnapshot(s,!1)];case 8:a.sent(),a.label=9;case 9:t.push(s),a.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,t]}})})},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return a.__awaiter(this,void 0,void 0,function(){var r,o,i,s,u;return a.__generator(this,function(a){switch(a.label){case 0:if(this.isPrimary)return p("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,11];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return a.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return r=a.sent(),o=wr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,o)];case 3:return a.sent(),[3,11];case 4:return(l=i=a.sent()).code!==_.DATA_LOSS||l.message!==zt?[3,6]:(s=[],I(this.queryViewsByTarget,function(e){return s.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)]);case 5:return a.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return this.removeAndCleanupQuery(u=this.queryViewsByTarget[e]),[4,this.localStore.releaseQuery(u.query,!0)];case 9:return a.sent(),this.syncEngineListener.onWatchError(u.query,n),[3,11];case 10:g("Unexpected target state: "+t),a.label=11;case 11:return[2]}var l})})},e.prototype.applyActiveTargetsChange=function(e,t){return a.__awaiter(this,void 0,void 0,function(){var n,r,o,i,s,u,l,c,h,d=this;return a.__generator(this,function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(v(!this.queryViewsByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return v(!!(o=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(o)];case 3:return i=f.sent(),[4,this.initializeViewAndComputeSnapshot(i,!1)];case 4:f.sent(),this.remoteStore.listen(i),f.label=5;case 5:return n++,[3,1];case 6:s=function(e){var t;return a.__generator(this,function(n){switch(n.label){case 0:return(t=u.queryViewsByTarget[e])?[4,u.localStore.releaseQuery(t.query,!1).then(function(){d.remoteStore.unlisten(e),d.removeAndCleanupQuery(t)}).catch(An)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,l=0,c=t,f.label=7;case 7:return l<c.length?[5,s(h=c[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?Re().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:Re()},e}(),mo=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),go="SharedClientState",vo="firestore_clients",bo="firestore_mutations",wo="firestore_targets",_o="firestore_online_state",Co="firestore_sequence_number",Eo=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,v(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var o=JSON.parse(r),i="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error),a=void 0;return i&&o.error&&(i="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(a=new C(o.error.code,o.error.message)),i?new e(t,n,o.state,a):(y(go,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),So=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,v(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),i=void 0;return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(i=new C(r.error.code,r.error.message)),o?new e(t,r.state,i):(y(go,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),To=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),o="object"==typeof r&&r.activeTargetIds instanceof Array,i=Ve(),a=0;o&&a<r.activeTargetIds.length;++a)o=Zn(r.activeTargetIds[a]),i=i.add(r.activeTargetIds[a]);return o?new e(t,i):(y(go,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Io=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in lr&&"string"==typeof n.clientId?new e(n.clientId,lr[n.onlineState]):(y(go,"Failed to parse online state: "+t),null)},e}(),Do=function(){function e(){this.activeTargetIds=Ve()}return e.prototype.addQueryTarget=function(e){v(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),ko=function(){function e(t,n,r,o,i){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new C(_.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Co+"_"+r,this.activeClients[this.localClientId]=new Do,this.clientStateKeyRe=new RegExp("^"+vo+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+bo+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+wo+"_"+a+"_(\\d+)$"),this.onlineStateKey=_o+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return a.__awaiter(this,void 0,void 0,function(){var e,t,n,r,o,i,s,u,l,c,h=this;return a.__generator(this,function(a){switch(a.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(o=this.getItem(this.toWebStorageClientStateKey(r)))&&(i=To.fromWebStorageEntry(r,o))&&(this.activeClients[i.clientId]=i);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),l=0,c=this.earlyEvents;l<c.length;l++)this.handleWebStorageEvent(c[l]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=Ve();return D(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=So.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return p(go,"READ",e,t),t},e.prototype.setItem=function(e,t){p(go,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){p(go,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(p(go,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void y("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return a.__awaiter(t,void 0,void 0,function(){var t,n,r,o,i,s;return a.__generator(this,function(a){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(o=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(o)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(i=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(i)]}else e.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(e){var t=re.INVALID;if(null!=e)try{var n=JSON.parse(e);v("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){y(go,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==re.INVALID&&this.sequenceNumberHandler(s));return[2]})})})}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Eo(this.currentUser,e,t,n),o=this.toWebStorageMutationBatchKey(e);this.setItem(o,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:lr[e]}))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),o=new So(e,t,n);this.setItem(r,o.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return v(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),vo+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return wo+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=bo+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return v(null!==n,"Cannot parse client state key '"+e+"'"),To.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);v(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]);return Eo.fromWebStorageEntry(new mo(void 0!==n[2]?n[2]:null),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);v(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return So.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Io.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(p(go,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var o=this.getAllActiveQueryTargets(),i=[],s=[];return o.forEach(function(e){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(t){return r.has(e)||i.push(e),[2]})})}),r.forEach(function(e){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(t){return o.has(e)||s.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(i,s)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),xo=function(){function e(){this.localState=new Do,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Do,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),No=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return En.withCacheSize(this.cacheSizeBytes)},e}(),Ao=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=H.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new le,r=new le,o=!1;return this.credentials.setChangeListener(function(i){o?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(i)}):(o=!0,t.initializePersistence(e,r,i).then(function(e){return t.initializeRest(i,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof No?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof C?e.code===_.FAILED_PRECONDITION||e.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new C(_.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Nn.buildStoragePrefix(this.databaseInfo),o=new io(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return a.__awaiter(n,void 0,void 0,function(){var n,i;return a.__generator(this,function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!ko.isAvailable(this.platform))throw new C(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new ko(this.asyncQueue,this.platform,r,this.clientId,e):new xo,[4,Nn.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:o,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return i=a.sent(),this.persistence=i,[2,i.referenceDelegate.garbageCollector]}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=zn.createEagerPersistence(this.clientId),this.sharedClientState=new xo,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return p("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return a.__awaiter(n,void 0,void 0,function(){var n,o,i,s,u=this;return a.__generator(this,function(l){switch(l.label){case 0:return this.localStore=new jn(this.persistence,e),t&&(this.lruScheduler=new Sn(t,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),i=new sr(this.asyncQueue,r,this.credentials,o),s=function(e){return u.syncEngine.applyOnlineStateChange(e,cr.SharedClientState)},this.remoteStore=new Ar(this.localStore,i,this.asyncQueue,function(e){return u.syncEngine.applyOnlineStateChange(e,cr.RemoteStore)},n),this.syncEngine=new yo(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=s,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new ao(this.syncEngine),[4,this.sharedClientState.start()];case 1:return l.sent(),[4,this.remoteStore.start()];case 2:return l.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return a.__awaiter(u,void 0,void 0,function(){return a.__generator(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return l.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return a.__awaiter(u,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}})})})];case 4:return l.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),p("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return a.__awaiter(e,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new le;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.registerPendingWritesCallback(t)}),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var o=new so(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(o)}),o},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof Ft)return e;if(e instanceof jt)return null;throw new C(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=Re(),r=new ho(e,n),o=r.computeDocChanges(t);return r.applyChanges(o,!1).snapshot})},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new le;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()})},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new le;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()}),n.promise},e}(),Po=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),Oo=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(t,n,r,o){if(!(e instanceof Array)||e.length<1)throw new C(_.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+W(1,"element")+".")}();for(var n=0;n<e.length;++n)if(O("FieldPath","string",n,e[n]),0===e[n].length)throw new C(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(se.keyField().canonicalString()),e}(),Mo=new RegExp("[~\\*/\\[\\]]"),Ro=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(mo.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),Lo=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.currentUser=mo.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.currentUser=this.getUser(),this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new C(_.ABORTED,"getToken aborted due to token change.");return n?(v("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}}(n.accessToken,e.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(this.currentUser)},e.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return v(null===e||"string"==typeof e,"Received invalid UID: "+e),new mo(e)},e}(),Vo=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=mo.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),Fo=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new Vo(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(mo.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function jo(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,o=["next","error","complete"];r<o.length;r++){var i=o[r];if(i in n&&"function"==typeof n[i])return!0}return!1}(e)}var Bo=function(){function e(e){this._methodName=e}return e.delete=function(){return x("FieldValue.delete",arguments),qo.instance},e.serverTimestamp=function(){return x("FieldValue.serverTimestamp",arguments),Uo.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return A("FieldValue.arrayUnion",arguments,1),new zo(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return A("FieldValue.arrayRemove",arguments,1),new Go(e)},e.increment=function(e){return O("FieldValue.increment","number",1,e),N("FieldValue.increment",arguments,1),new Wo(e)},e.prototype.isEqual=function(e){return this===e},e}(),qo=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return a.__extends(t,e),t.instance=new t,t}(Bo),Uo=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(t,e),t.instance=new t,t}(Bo),zo=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return a.__extends(t,e),t}(Bo),Go=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return a.__extends(t,e),t}(Bo),Wo=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return a.__extends(t,e),t}(Bo),Ho=E(Bo,"Use FieldValue.<field>() instead."),Qo=/^__.*__$/,Ko=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return n.push(null!==this.fieldMask?new mt(e,this.data,this.fieldMask,t):new yt(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new gt(e,this.fieldTransforms)),n},e}(),$o=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new mt(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new gt(e,this.fieldTransforms)),n},e}(),Yo=function(e){return e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e}({});function Jo(e){switch(e){case Yo.Set:case Yo.MergeSet:case Yo.Update:return!0;case Yo.Argument:return!1;default:throw g("Unexpected case for UserDataSource: "+e)}}var Zo=function(){function e(e,t,n,r,o,i){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===o&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=o||[],this.fieldMask=i||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new C(_.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(Jo(this.dataSource)&&Qo.test(e))throw this.createError("Document fields cannot begin and end with __")},e}(),Xo=function(e,t){this.databaseId=e,this.key=t},ei=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new Zo(Yo.Set,e,se.EMPTY_PATH);ni("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new Ko(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new Zo(Yo.MergeSet,e,se.EMPTY_PATH);ni("Data must be an object, but it was:",r,t);var o,i,a=this.parseData(t,r);if(n){for(var s=new Te(se.comparator),u=0,l=n;u<l.length;u++){var c=l[u],h=void 0;if(c instanceof Oo)h=c._internalPath;else{if("string"!=typeof c)throw g("Expected stringOrFieldPath to be a string or a FieldPath");h=oi(e,c)}if(!r.contains(h))throw new C(_.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}o=ct.fromSet(s),i=r.fieldTransforms.filter(function(e){return o.covers(e.field)})}else o=ct.fromArray(r.fieldMask),i=r.fieldTransforms;return new Ko(a,o,i)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new Zo(Yo.Update,e,se.EMPTY_PATH);ni("Data must be an object, but it was:",r,t);var o=new Te(se.comparator),i=Rt.EMPTY;D(t,function(t,a){var s=oi(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof qo)o=o.add(s);else{var l=n.parseData(a,u);null!=l&&(o=o.add(s),i=i.set(s,l))}});var a=ct.fromSet(o);return new $o(i,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var o=new Zo(Yo.Update,e,se.EMPTY_PATH),i=[ri(e,t)],a=[n];if(r.length%2!=0)throw new C(_.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)i.push(ri(e,r[s])),a.push(r[s+1]);var u=new Te(se.comparator),l=Rt.EMPTY;for(s=0;s<i.length;++s){var c=i[s],h=o.childContextForFieldPath(c),d=this.runPreConverter(a[s],h);if(d instanceof qo)u=u.add(c);else{var f=this.parseData(d,h);null!=f&&(u=u.add(c),l=l.set(c,f))}}var p=ct.fromSet(u);return new $o(l,p,o.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new Zo(Yo.Argument,e,se.EMPTY_PATH),r=this.parseData(t,n);return v(null!=r,"Parsed data should not be null."),v(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=ii(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(ti(e=this.runPreConverter(e,t)))return ni("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Bo)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new Ce(Q);return k(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):D(e,function(e,o){var i=n.parseData(o,t.childContextForField(e));null!=i&&(r=r.insert(e,i))}),new Rt(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,o=0,i=e;o<i.length;o++){var a=this.parseData(i[o],t.childContextForArray(r));null==a&&(a=Et.INSTANCE),n.push(a),r++}return new Lt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!Jo(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof qo){if(t.dataSource!==Yo.MergeSet)throw t.dataSource===Yo.Update?(v(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof Uo)t.fieldTransforms.push(new ht(t.path,Hr.instance));else if(e instanceof zo){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new Qr(n);t.fieldTransforms.push(new ht(t.path,r))}else if(e instanceof Go){n=this.parseArrayTransformElements(e._methodName,e._elements);var o=new Kr(n);t.fieldTransforms.push(new ht(t.path,o))}else if(e instanceof Wo){var i=this.parseQueryValue("FieldValue.increment",e._operand),a=new $r(i);t.fieldTransforms.push(new ht(t.path,a))}else g("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return Et.INSTANCE;if("number"==typeof e)return Zn(e)?new Dt(e):new kt(e);if("boolean"==typeof e)return St.of(e);if("string"==typeof e)return new xt(e);if(e instanceof Date)return new Nt(we.fromDate(e));if(e instanceof we)return new Nt(new we(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Pr)return new Mt(e);if(e instanceof X)return new Pt(e);if(e instanceof Xo)return new Ot(e.databaseId,e.key);throw t.createError("Unsupported field value: "+B(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var o=new Zo(Yo.Argument,e,se.EMPTY_PATH);return n.parseData(t,o.childContextForArray(r))})},e}();function ti(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof we||e instanceof Pr||e instanceof X||e instanceof Xo||e instanceof Bo)}function ni(e,t,n){if(!ti(n)||!j(n)){var r=B(n);throw t.createError("an object"===r?e+" a custom object":e+" "+r)}}function ri(e,t){if(t instanceof Oo)return t._internalPath;if("string"==typeof t)return oi(e,t);throw new C(_.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function oi(e,t){try{return function(e){if(e.search(Mo)>=0)throw new C(_.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Oo.bind.apply(Oo,[void 0].concat(e.split("."))))}catch(t){throw new C(_.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=ii(t);throw new C(_.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function ii(e){return e instanceof Error?e.message:e.toString()}var ai="firestore.googleapis.com",si=!0,ui=!0,li=!1,ci=En.COLLECTION_DISABLED,hi=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new C(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ai,this.ssl=si}else R("settings","non-empty string","host",e.host),this.host=e.host,L("settings","boolean","ssl",e.ssl),this.ssl=T(e.ssl,si);if(U("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),L("settings","object","credentials",e.credentials),this.credentials=e.credentials,L("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?y("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&y("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=T(e.timestampsInSnapshots,ui),L("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=En.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==ci&&e.cacheSizeBytes<En.MINIMUM_CACHE_SIZE_BYTES)throw new C(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+En.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}L("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?li:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),di=function(){function e(t){var n=this;if(this._firebaseApp=null,this._queue=new he,this.INTERNAL={delete:function(){return a.__awaiter(n,void 0,void 0,function(){return a.__generator(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}})})}},"object"==typeof t.options){var r=t;this._firebaseApp=r,this._databaseId=e.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Lo(r)}else{var o=t;if(!o.projectId)throw new C(_.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new ne(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new Ro}this._settings=new hi({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(N("Firestore.settings",arguments,1),O("Firestore.settings","object",1,e),S(e,"persistence"))throw new C(_.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new hi(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new C(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=function(e){if(!e)return new Ro;switch(e.type){case"gapi":var t=e.client;return v(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Fo(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new C(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new C(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&y("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=T(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new No(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Nn.buildStoragePrefix(this.makeDatabaseInfo()),n=new le;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new C(_.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Nn.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype._onSnapshotsInSync=function(e){return this.ensureClientConfigured(),jo(e)?this.onSnapshotsInSyncInternal(e):(O("Firestore.onSnapshotsInSync","function",1,e),this.onSnapshotsInSyncInternal({next:e}))},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Po({next:function(){e.next&&e.next()},error:function(e){throw g("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new function(){}),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new function(e,t,n,r,o){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=o}(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){v(!!this._settings.host,"FirestoreSettings.host is not set"),v(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Ao(b.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new ei(function(t){if(t instanceof yi){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new C(_.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Xo(e,t._key)}return t})},e.databaseIdFromApp=function(e){var t=e.options;if(!S(t,"projectId"))throw new C(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new C(_.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ne(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new C(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return N("Firestore.collection",arguments,1),O("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new _i(ie.fromString(e),this)},e.prototype.doc=function(e){return N("Firestore.doc",arguments,1),O("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),yi.forPath(ie.fromString(e),this)},e.prototype.collectionGroup=function(e){if(N("Firestore.collectionGroup",arguments,1),O("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new C(_.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new bi(new Or(ie.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return N("Firestore.runTransaction",arguments,1),O("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new fi(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new pi(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(d()){case h.DEBUG:return"debug";case h.ERROR:return"error";case h.SILENT:return"silent";default:return g("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(N("Firestore.setLogLevel",arguments,1),O("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":f(h.DEBUG);break;case"error":f(h.ERROR);break;case"silent":f(h.SILENT);break;default:throw new C(_.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),fi=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;N("Transaction.get",arguments,1);var n=Ti("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return g("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof jt)return new gi(t._firestore,n._key,null,!1,!1);if(r instanceof Ft)return new gi(t._firestore,n._key,r,!1,!1);throw g("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},e.prototype.set=function(e,t,n){P("Transaction.set",arguments,2,3);var r=Ti("Transaction.set",e,this._firestore),o=(n=Ci("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r,o,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return"string"==typeof t||t instanceof Oo?(A("Transaction.update",arguments,3),r=Ti("Transaction.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,i)):(N("Transaction.update",arguments,2),r=Ti("Transaction.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,o),this},e.prototype.delete=function(e){N("Transaction.delete",arguments,1);var t=Ti("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),pi=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){P("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Ti("WriteBatch.set",e,this._firestore),o=(n=Ci("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(o.toMutations(r._key,ft.NONE)),this},e.prototype.update=function(e,t,n){for(var r,o,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof t||t instanceof Oo?(A("WriteBatch.update",arguments,3),r=Ti("WriteBatch.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,i)):(N("WriteBatch.update",arguments,2),r=Ti("WriteBatch.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(o.toMutations(r._key,ft.exists(!0))),this},e.prototype.delete=function(e){N("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Ti("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new vt(t._key,ft.NONE)),this},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,function(){return a.__generator(this,function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new C(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),yi=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!=0)throw new C(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new ue(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new _i(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(N("DocumentReference.collection",arguments,1),O("DocumentReference.collection","non-empty string",1,e),!e)throw new C(_.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=ie.fromString(e);return new _i(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){P("DocumentReference.set",arguments,1,2);var n=(t=Ci("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,ft.NONE))},e.prototype.update=function(e,t){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return"string"==typeof e||e instanceof Oo?(A("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(N("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,ft.exists(!0)))},e.prototype.delete=function(){return N("DocumentReference.delete",arguments,0),this._firestoreClient.write([new vt(this._key,ft.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];P("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||jo(e[o])||(U("DocumentReference.onSnapshot",r=e[o],["includeMetadataChanges"]),L("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),o++);var i={includeMetadataChanges:r.includeMetadataChanges};return jo(e[o])?n=e[o]:(O("DocumentReference.onSnapshot","function",o,e[o]),M("DocumentReference.onSnapshot","function",o+1,e[o+1]),M("DocumentReference.onSnapshot","function",o+2,e[o+2]),n={next:e[o],error:e[o+1],complete:e[o+2]}),this.onSnapshotInternal(i,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var o=new Po({next:function(e){if(t.next){v(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new gi(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),i=this._firestoreClient.listen(Or.atPath(this._key.path),o,e);return function(){o.mute(),n._firestoreClient.unlisten(i)}},e.prototype.get=function(e){var t=this;return P("DocumentReference.get",arguments,0,1),Si("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new gi(t.firestore,t._key,e,!0,e instanceof Ft&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(o){r(),!o.exists&&o.metadata.fromCache?t(new C(_.UNAVAILABLE,"Failed to get document because the client is offline.")):o.exists&&o.metadata.fromCache&&n&&"server"===n.source?t(new C(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(o)},error:t})},e}(),mi=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),gi=function(){function e(e,t,n,r,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=o}return e.prototype.data=function(e){return P("DocumentSnapshot.data",arguments,0,1),e=Ei("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data(),_t.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(P("DocumentSnapshot.get",arguments,1,2),t=Ei("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(ri("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,_t.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new yi(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new mi(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,o){r[e]=n.convertValue(o,t)}),r},e.prototype.convertValue=function(e,t){if(e instanceof Rt)return this.convertObject(e,t);if(e instanceof Lt)return this.convertArray(e,t);if(e instanceof Ot){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||y("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new yi(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},e}(),vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return v("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(gi),bi=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){N("Query.where",arguments,3),q("Query.where",3,r),"in"!==n&&"array-contains-any"!==n&&function(e,t,n,r){if(!t.some(function(e){return e===r}))throw new C(_.INVALID_ARGUMENT,"Invalid value "+B(r)+" provided to function Query.where() for its "+G(2)+" argument. Acceptable values: "+t.join(", "))}(0,["<","<=","==",">=",">","array-contains"],0,n);var o,i=ri("Query.where",t),a=Mr.fromString(n);if(i.isKeyField()){if(a===Mr.ARRAY_CONTAINS||a===Mr.ARRAY_CONTAINS_ANY)throw new C(_.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===Mr.IN){this.validateDisjunctiveFilterElements(r,a);for(var s=[],u=0,l=r;u<l.length;u++)s.push(this.parseDocumentIdValue(l[u]));o=new Lt(s)}else o=this.parseDocumentIdValue(r)}else a!==Mr.IN&&a!==Mr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,a),o=this.firestore._dataConverter.parseQueryValue("Query.where",r);var c=Rr.create(i,a,o);return this.validateNewFilter(c),new e(this._query.addFilter(c),this.firestore)},e.prototype.orderBy=function(t,n){var r;if(P("Query.orderBy",arguments,1,2),M("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=qr.ASCENDING;else{if("desc"!==n)throw new C(_.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=qr.DESCENDING}if(null!==this._query.startAt)throw new C(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new C(_.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var o=ri("Query.orderBy",t),i=new zr(o,r);return this.validateNewOrderBy(i),new e(this._query.addOrderBy(i),this.firestore)},e.prototype.limit=function(t){if(N("Query.limit",arguments,1),O("Query.limit","number",1,t),t<=0)throw new C(_.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];A("Query.startAt",arguments,1);var o=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(o),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];A("Query.startAfter",arguments,1);var o=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(o),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];A("Query.endBefore",arguments,1);var o=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(o),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];A("Query.endAt",arguments,1);var o=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(o),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(q(e,1,t),t instanceof gi){if(n.length>0)throw new C(_.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var o=t;if(!o.exists)throw new C(_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,o._document,r)}var i=[t].concat(n);return this.boundFromFields(e,i,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],o=0,i=this._query.orderBy;o<i.length;o++){var a=i[o];if(a.field.isKeyField())r.push(new Ot(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof At)throw new C(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new C(_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Ur(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new C(_.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var o=[],i=0;i<t.length;i++){var a=t[i];if(r[i].field.isKeyField()){if("string"!=typeof a)throw new C(_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new C(_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(ie.fromString(a));if(!ue.isDocumentKey(s))throw new C(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new ue(s);o.push(new Ot(this.firestore._databaseId,u))}else{var l=this.firestore._dataConverter.parseQueryValue(e,a);o.push(l)}}return new Ur(o,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];P("Query.onSnapshot",arguments,1,4);var n,r={},o=0;return"object"!=typeof e[o]||jo(e[o])||(U("Query.onSnapshot",r=e[o],["includeMetadataChanges"]),L("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),o++),jo(e[o])?n=e[o]:(O("Query.onSnapshot","function",o,e[o]),M("Query.onSnapshot","function",o+1,e[o+1]),M("Query.onSnapshot","function",o+2,e[o+2]),n={next:e[o],error:e[o+1],complete:e[o+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var o=new Po({next:function(e){t.next&&t.next(new wi(n.firestore,n._query,e))},error:r}),i=this.firestore.ensureClientConfigured(),a=i.listen(this._query,o,e);return function(){o.mute(),i.unlisten(a)}},e.prototype.get=function(e){var t=this;return P("Query.get",arguments,0,1),Si("Query.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new wi(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(o){r(),o.metadata.fromCache&&n&&"server"===n.source?t(new C(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(o)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new C(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new C(_.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(ie.fromString(e));if(!ue.isDocumentKey(t))throw new C(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Ot(this.firestore._databaseId,new ue(t))}if(e instanceof yi)return new Ot(this.firestore._databaseId,e._key);throw new C(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+B(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new C(_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new C(_.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new C(_.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter(function(e){return Number.isNaN(e)}).length>0)throw new C(_.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof Rr){var t=[Mr.ARRAY_CONTAINS,Mr.ARRAY_CONTAINS_ANY],n=[Mr.IN,Mr.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,o=n.indexOf(e.op)>=0;if(e.isInequality()){var i=this._query.getInequalityFilterField();if(null!==i&&!i.isEqual(e.field))throw new C(_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+i.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(o||r){var s=null;if(o&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw new C(_.INVALID_ARGUMENT,s===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new C(_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),wi=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new mi(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;P("QuerySnapshot.forEach",arguments,1,2),O("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(e.prototype,"query",{get:function(){return new bi(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(U("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),L("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new C(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,o=0;return n.docChanges.map(function(t){var i=new vi(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return v(t.type===mr.Added,"Invalid event type for first snapshot"),v(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:i,oldIndex:-1,newIndex:o++}})}var i=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==mr.Metadata}).map(function(t){var r=new vi(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),o=-1,a=-1;return t.type!==mr.Added&&(v((o=i.indexOf(t.doc.key))>=0,"Index for document not found"),i=i.delete(t.doc.key)),t.type!==mr.Removed&&(a=(i=i.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case mr.Added:return"added";case mr.Modified:case mr.Metadata:return"modified";case mr.Removed:return"removed";default:return g("Unknown change type: "+e)}}(t.type),doc:r,oldIndex:o,newIndex:a}})}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new vi(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(wi.prototype.docChanges,e,{get:function(){return function(){throw new C(_.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var _i=function(e){function t(t,n){var r=e.call(this,Or.atPath(t),n)||this;if(t.length%2!=1)throw new C(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}return a.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new yi(new ue(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(P("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=H.newId()),O("CollectionReference.doc","non-empty string",1,e),""===e)throw new C(_.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=ie.fromString(e);return yi.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){N("CollectionReference.add",arguments,1),O("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(bi);function Ci(e,t){if(void 0===t)return{merge:!1};if(U(e,t,["merge","mergeFields"]),L(e,"boolean","merge",t.merge),void 0!==(n=t.mergeFields)&&function(e,t,n,r,o){if(!(r instanceof Array))throw new C(_.INVALID_ARGUMENT,"Function "+e+"() requires its mergeFields option to be an array, but it was: "+B(r));for(var i=0;i<r.length;++i)if(!("string"==typeof(a=r[i])||a instanceof Oo))throw new C(_.INVALID_ARGUMENT,"Function "+e+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+i+" was: "+B(r[i]));var a}(e,0,0,n),void 0!==t.mergeFields&&void 0!==t.merge)throw new C(_.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');var n;return t}function Ei(e,t){return void 0===t?{}:(U(e,t,["serverTimestamps"]),V(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Si(e,t){M(e,"object",1,t),t&&(U(e,t,["source"]),V(e,0,"source",t.source,["default","server","cache"]))}function Ti(e,t,n){if(t instanceof yi){if(t.firestore!==n)throw new C(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw z(e,"DocumentReference",1,t)}var Ii=E(di,"Use firebase.firestore() instead."),Di=E(fi,"Use firebase.firestore().runTransaction() instead."),ki=E(pi,"Use firebase.firestore().batch() instead."),xi=E(yi,"Use firebase.firestore().doc() instead."),Ni=E(gi),Ai=E(vi),Pi=E(bi),Oi=E(wi),Mi=E(_i,"Use firebase.firestore().collection() instead."),Ri={Firestore:Ii,GeoPoint:Pr,Timestamp:we,Blob:ee,Transaction:Di,WriteBatch:ki,DocumentReference:xi,DocumentSnapshot:Ni,Query:Pi,QueryDocumentSnapshot:Ai,QuerySnapshot:Oi,CollectionReference:Mi,FieldPath:Oo,FieldValue:Ho,setLogLevel:di.setLogLevel,CACHE_SIZE_UNLIMITED:ci},Li=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),Vi=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},e.prototype.onNetworkUnavailable=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),Fi=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),ji="Connection",Bi={BatchGetDocuments:"batchGet",Commit:"commit"},qi="gl-js/ fire/"+l,Ui=function(){function e(e){this.databaseId=e.databaseId,this.baseUrl=(e.ssl?"https":"http")+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=qi},e.prototype.invokeRPC=function(e,t,n){var r=this,o=this.makeUrl(e);return new Promise(function(i,a){var s=new u.XhrIo;s.listenOnce(u.EventType.COMPLETE,function(){try{switch(s.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var t=s.getResponseJson();p(ji,"XHR received:",JSON.stringify(t)),i(t);break;case u.ErrorCode.TIMEOUT:p(ji,'RPC "'+e+'" timed out'),a(new C(_.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(p(ji,'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var o=(l=r.status.toLowerCase().replace("_","-"),Object.values(_).indexOf(l)>=0?l:_.UNKNOWN);a(new C(o,r.message))}else a(new C(_.UNKNOWN,"Server responded with status "+s.getStatus()))}else p(ji,'RPC "'+e+'" failed'),a(new C(_.UNAVAILABLE,"Connection failed."));break;default:g('RPC "'+e+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{p(ji,'RPC "'+e+'" completed.')}var l});var l=JSON.stringify(t);p(ji,"XHR sending: ",o+" "+l);var c={"Content-Type":"text/plain"};r.modifyHeadersForRequest(c,n),s.send(o,"POST",l,c,15)})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=u.createWebChannelTransport(),o={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(o.initMessageHeaders,t),s.isReactNative()||(o.httpHeadersOverwriteParam="$httpHeaders");var i=n.join("");p(ji,"Creating WebChannel: "+i+" "+o);var a=r.createWebChannel(i,o),l=!1,c=!1,h=new Fi({sendFn:function(e){c?p(ji,"Not sending because WebChannel is closed:",e):(l||(p(ji,"Opening WebChannel transport."),a.open(),l=!0),p(ji,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),d=function(e,t){a.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})};return d(u.WebChannel.EventType.OPEN,function(){c||p(ji,"WebChannel transport opened.")}),d(u.WebChannel.EventType.CLOSE,function(){c||(c=!0,p(ji,"WebChannel transport closed"),h.callOnClose())}),d(u.WebChannel.EventType.ERROR,function(e){c||(c=!0,p(ji,"WebChannel transport errored:",e),h.callOnClose(new C(_.UNAVAILABLE,"The operation could not be completed")))}),d(u.WebChannel.EventType.MESSAGE,function(e){if(!c){var t=e.data[0];v(!!t,"Got a webchannel message without data.");var n=t.error||t[0]&&t[0].error;if(n){p(ji,"WebChannel received error:",n);var r=n.status,o=function(e){var t=dr[r];if(void 0!==t)return pr(t)}(),i=n.message;void 0===o&&(o=_.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),c=!0,h.callOnClose(new C(o,i)),a.close()}else p(ji,"WebChannel received:",t),h.callOnMessage(t)}}),setTimeout(function(){h.callOnOpen()},0),h},e.prototype.makeUrl=function(e){var t=Bi[e];v(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}();function zi(e){e.INTERNAL.registerService("firestore",function(e){return new di(e)},function(e){v(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(Ri))}b.setPlatform(new(function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new Ui(e))},e.prototype.newConnectivityMonitor=function(){return Vi.isAvailable()?new Vi:new Li},e.prototype.newSerializer=function(e){return new io(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}())),zi(o),t.registerFirestore=zi},"93Jm":function(e,t,n){e.exports=function(e,t,n){var r=!1;if(void 0===window.XMLHttpRequest)return t(Error("Browser not supported"));if(void 0===n){var o=e.match(/^\s*https?:\/\/[^\/]*/);n=o&&o[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var i=new window.XMLHttpRequest;if(n&&!("withCredentials"in i)){i=new window.XDomainRequest;var a=t;t=function(){if(r)a.apply(this,arguments);else{var e=this,t=arguments;setTimeout(function(){a.apply(e,t)},0)}}}function s(){var e;void 0===i.status||(e=i.status)>=200&&e<300||304===e?t.call(i,null,i):t.call(i,i,null)}return"onload"in i?i.onload=s:i.onreadystatechange=function(){4===i.readyState&&s()},i.onerror=function(e){t.call(this,e||!0,null),t=function(){}},i.onprogress=function(){},i.ontimeout=function(e){t.call(this,e,null),t=function(){}},i.onabort=function(e){t.call(this,e,null),t=function(){}},i.open("GET",e,!0),i.send(null),r=!0,i}},Mkpm:function(e,t){e.exports=o,e.exports.parse=o,e.exports.stringify=function e(t){function n(e){return e.join(" ")}function r(e){return e.map(n).join(", ")}function o(e){return e.map(r).map(i).join(", ")}function i(e){return"("+e+")"}switch("Feature"===t.type&&(t=t.geometry),t.type){case"Point":return"POINT ("+n(t.coordinates)+")";case"LineString":return"LINESTRING ("+r(t.coordinates)+")";case"Polygon":return"POLYGON ("+o(t.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+r(t.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+t.coordinates.map(o).map(i).join(", ")+")";case"MultiLineString":return"MULTILINESTRING ("+o(t.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+t.geometries.map(e).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var n=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,r=new RegExp("^"+n.source+"(\\s"+n.source+"){1,}");function o(e){var t,n=e.split(";"),o=n.pop(),i=(n.shift()||"").split("=").pop(),a=0;function s(e){var t=o.substring(a).match(e);return t?(a+=t[0].length,t[0]):null}function u(){s(/^\s*/)}function l(){u();for(var e,t=0,n=[],o=[n],i=n;e=s(/^(\()/)||s(/^(\))/)||s(/^(\,)/)||s(r);){if("("===e)o.push(i),o[o.length-1].push(i=[]),t++;else if(")"===e){if(0===i.length)return null;if(!(i=o.pop()))return null;if(0==--t)break}else if(","===e)o[o.length-1].push(i=[]);else{if(e.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(i,e.split(/\s/g).map(parseFloat))}u()}return 0!==t?null:n}function c(){for(var e,t,n=[];t=s(r)||s(/^(\,)/);)","===t?(n.push(e),e=[]):t.split(/\s/g).some(isNaN)||(e||(e=[]),Array.prototype.push.apply(e,t.split(/\s/g).map(parseFloat))),u();return e?(n.push(e),n.length?n:null):null}return(t=function e(){return function(){if(!s(/^(point)/i))return null;if(u(),!s(/^(\()/))return null;var e=c();return e?(u(),s(/^(\))/)?{type:"Point",coordinates:e[0]}:null):null}()||function(){if(!s(/^(linestring)/i))return null;if(u(),!s(/^(\()/))return null;var e=c();return e&&s(/^(\))/)?{type:"LineString",coordinates:e}:null}()||function(){if(!s(/^(polygon)/i))return null;u();var e=l();return e?{type:"Polygon",coordinates:e}:null}()||function(){if(!s(/^(multipoint)/i))return null;u();var e=o.substring(o.indexOf("(")+1,o.length-1).replace(/\(/g,"").replace(/\)/g,"");o="MULTIPOINT ("+e+")";var t=l();return t?(u(),{type:"MultiPoint",coordinates:t}):null}()||function(){if(!s(/^(multilinestring)/i))return null;u();var e=l();return e?(u(),{type:"MultiLineString",coordinates:e}):null}()||function(){if(!s(/^(multipolygon)/i))return null;u();var e=l();return e?{type:"MultiPolygon",coordinates:e}:null}()||function(){var t,n=[];if(!s(/^(geometrycollection)/i))return null;if(u(),!s(/^(\()/))return null;for(;t=e();)n.push(t),u(),s(/^(\,)/),u();return s(/^(\))/)?{type:"GeometryCollection",geometries:n}:null}()}())&&i.match(/\d+/)&&(t.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+i}}),t}},Nuzq:function(e,t,n){"use strict";var r=n("/7f5"),o=n("S0GR"),i=/(Lat)(itude)?/gi,a=/(L)(on|ng)(gitude)?/i;function s(e,t){var n,r,o;for(var i in e)(r=i.match(t))&&(!n||r[0].length/i.length>o)&&(o=r[0].length/i.length,n=i);return n}function u(e){return s(e,i)}function l(e){return s(e,a)}function c(e){return"object"==typeof e?Object.keys(e).length:0}function h(e){var t=[];return[",",";","\t","|"].forEach(function(n){var o=r.dsvFormat(n).parse(e);if(o.length>=1){for(var i=c(o[0]),a=0;a<o.length;a++)if(c(o[a])!==i)return;t.push({delimiter:n,arity:Object.keys(o[0]).length})}}),t.length?t.sort(function(e,t){return t.arity-e.arity})[0].delimiter:null}e.exports={isLon:function(e){return!!e.match(a)},isLat:function(e){return!!e.match(i)},guessLatHeader:u,guessLonHeader:l,csv:r.csvParse,tsv:r.tsvParse,dsv:r,auto:function(e){var t=h(e);return t?function(e){return delete e.columns,e}(r.dsvFormat(t).parse(e)):null},csv2geojson:function(e,t,n){n||(n=t,t={}),t.delimiter=t.delimiter||",";var i=t.latfield||"",a=t.lonfield||"",s=t.crs||"",c=[],d={type:"FeatureCollection",features:c};if(""!==s&&(d.crs={type:"name",properties:{name:s}}),"auto"!==t.delimiter||"string"!=typeof e||(t.delimiter=h(e),t.delimiter)){var f="string"==typeof e?r.dsvFormat(t.delimiter).parse(e):e;if(f.length){var p,y=[];if(i||(i=u(f[0])),a||(a=l(f[0])),i&&a){for(p=0;p<f.length;p++)if(void 0!==f[p][a]&&void 0!==f[p][i]){var m,g,v,b=f[p][a],w=f[p][i];(v=o(b,"EW"))&&(b=v),(v=o(w,"NS"))&&(w=v),m=parseFloat(b),g=parseFloat(w),isNaN(m)||isNaN(g)?y.push({message:"A row contained an invalid value for latitude or longitude",row:f[p],index:p}):(t.includeLatLon||(delete f[p][a],delete f[p][i]),c.push({type:"Feature",properties:f[p],geometry:{type:"Point",coordinates:[parseFloat(m),parseFloat(g)]}}))}n(y.length?y:null,d)}else{for(p=0;p<f.length;p++)c.push({type:"Feature",properties:f[p],geometry:null});n(y.length?y:null,d)}}else n(null,d)}else n({type:"Error",message:"Could not autodetect delimiter"})},toLine:function(e){for(var t=e.features,n={type:"Feature",geometry:{type:"LineString",coordinates:[]}},r=0;r<t.length;r++)n.geometry.coordinates.push(t[r].geometry.coordinates);return n.properties=t.reduce(function(e,t){for(var n in t.properties)e[n]||(e[n]=[]),e[n].push(t.properties[n]);return e},{}),{type:"FeatureCollection",features:[n]}},toPolygon:function(e){for(var t=e.features,n={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},r=0;r<t.length;r++)n.geometry.coordinates[0].push(t[r].geometry.coordinates);return n.properties=t.reduce(function(e,t){for(var n in t.properties)e[n]||(e[n]=[]),e[n].push(t.properties[n]);return e},{}),{type:"FeatureCollection",features:[n]}}}},S0GR:function(e,t){function n(e,t){var n=r(e,t);return n.whole+"\xb0 "+(n.minutes?n.minutes+"' ":"")+(n.seconds?n.seconds+'" ':"")+n.dir}function r(e,t){var n=({lat:["N","S"],lon:["E","W"]}[t]||"")[e>=0?0:1],r=Math.abs(e),o=Math.floor(r),i=60*(r-o),a=Math.floor(i);return{whole:o,minutes:a,seconds:Math.floor(60*(i-a)),dir:n}}function o(e,t,n){if(t||(t="NSEW"),"string"!=typeof e)return{val:null,regex:n};var r=(n=n||/[\s\,]*([\-|\\u2014|\\u2015]?[0-9.]+)\xb0? *(?:([0-9.]+)['\u2019\u2032\u2018] *)?(?:([0-9.]+)(?:''|"|\u201d|\u2033) *)?([NSEW])?/gi).exec(e);return r?r[4]&&-1===t.indexOf(r[4])?{val:null,regex:n}:{val:((r[1]?parseFloat(r[1]):0)+(r[2]?parseFloat(r[2])/60:0)+(r[3]?parseFloat(r[3])/3600:0))*(r[4]&&"S"===r[4]||"W"===r[4]?-1:1),regex:n,raw:r[0],dim:r[4]}:{val:null,regex:n}}e.exports=function(e,t){return o(e,t).val},e.exports.pair=function(e,t){var n=o(e=e.trim(),t);if(null===n.val)return null;var r,i,a,s=o(e,t,n.regex);return null===s.val?null:n.raw+s.raw!==e?null:n.dim?(r=n.val,i=s.val,"N"===(a=n.dim)||"S"===a?[r,i]:"W"===a||"E"===a?[i,r]:void 0):[n.val,s.val]},e.exports.format=n,e.exports.formatPair=function(e){return n(e.lat,"lat")+" "+n(e.lon,"lon")},e.exports.coordToDMS=r},Wcq6:function(e,t,n){"use strict";var r,o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;e.exports=o},cSZD:function(e,t,n){"use strict";var r={};function o(e,t){e=Math.round(e*t),(e<<=1)<0&&(e=~e);for(var n="";e>=32;)n+=String.fromCharCode(63+(32|31&e)),e>>=5;return n+String.fromCharCode(e+63)}function i(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice().reverse());return t}r.decode=function(e,t){for(var n,r=0,o=0,i=0,a=[],s=0,u=0,l=null,c=Math.pow(10,t||5);r<e.length;){l=null,s=0,u=0;do{u|=(31&(l=e.charCodeAt(r++)-63))<<s,s+=5}while(l>=32);n=1&u?~(u>>1):u>>1,s=u=0;do{u|=(31&(l=e.charCodeAt(r++)-63))<<s,s+=5}while(l>=32);a.push([(o+=n)/c,(i+=1&u?~(u>>1):u>>1)/c])}return a},r.encode=function(e,t){if(!e.length)return"";for(var n=Math.pow(10,t||5),r=o(e[0][0],n)+o(e[0][1],n),i=1;i<e.length;i++){var a=e[i],s=e[i-1];r+=o(a[0]-s[0],n),r+=o(a[1]-s[1],n)}return r},r.fromGeoJSON=function(e,t){if(e&&"Feature"===e.type&&(e=e.geometry),!e||"LineString"!==e.type)throw new Error("Input must be a GeoJSON LineString");return r.encode(i(e.coordinates),t)},r.toGeoJSON=function(e,t){return{type:"LineString",coordinates:i(r.decode(e,t))}},"object"==typeof e&&e.exports&&(e.exports=r)},crnd:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},iML4:function(e,t,n){!function(e){"use strict";function t(){}function n(e){if(!e)return t;var n,r,o=e.scale[0],i=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0),e[0]=(n+=e[0])*o+a,e[1]=(r+=e[1])*i+s}}function r(e,t){for(var n=0,r=e.length;n<r;){var o=n+r>>>1;e[o]<t?n=o+1:r=o}return n}function o(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:i(e,t)};return null==t.id&&delete n.id,n}function i(e,t){var r=n(e.transform),o=e.arcs;function i(e,t){t.length&&t.pop();for(var n,i=o[e<0?~e:e],a=0,s=i.length;a<s;++a)t.push(n=i[a].slice()),r(n,a);e<0&&function(e,t){for(var n,r=e.length,o=r-t;o<--r;)n=e[o],e[o++]=e[r],e[r]=n}(t,s)}function a(e){return e=e.slice(),r(e,0),e}function s(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function u(e){for(var t=s(e);t.length<4;)t.push(t[0].slice());return t}function l(e){return e.map(u)}var c={Point:function(e){return a(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(a)},LineString:function(e){return s(e.arcs)},MultiLineString:function(e){return e.arcs.map(s)},Polygon:function(e){return l(e.arcs)},MultiPolygon:function(e){return e.arcs.map(l)}};return function e(t){var n=t.type;return"GeometryCollection"===n?{type:n,geometries:t.geometries.map(e)}:n in c?{type:n,coordinates:c[n](t)}:null}(t)}function a(e,t){var n={},r={},o={},i=[],a=-1;function s(e,t){for(var r in e){var o=e[r];delete t[o.start],delete o.start,delete o.end,o.forEach(function(e){n[e<0?~e:e]=1}),i.push(o)}}return t.forEach(function(n,r){var o,i=e.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(o=t[++a],t[a]=n,t[r]=o)}),t.forEach(function(t){var n,i,a=function(t){var n,r=e.arcs[t<0?~t:t],o=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,o]:[o,n]}(t),s=a[0],u=a[1];if(n=o[s])if(delete o[n.end],n.push(t),n.end=u,i=r[u]){delete r[i.start];var l=i===n?n:n.concat(i);r[l.start=n.start]=o[l.end=i.end]=l}else r[n.start]=o[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(t),n.start=s,i=o[s]){delete o[i.end];var c=i===n?n:i.concat(n);r[c.start=i.start]=o[c.end=n.end]=c}else r[n.start]=o[n.end]=n;else r[(n=[t]).start=s]=o[n.end=u]=n}),s(o,r),s(r,o),t.forEach(function(e){n[e<0?~e:e]||i.push([e])}),i}function s(e,t,n){var r=[];function o(e){var t=e<0?~e:e;(l[t]||(l[t]=[])).push({i:e,g:u})}function i(e){e.forEach(o)}function s(e){e.forEach(i)}if(arguments.length>1){var u,l=[],c={LineString:i,MultiLineString:s,Polygon:s,MultiPolygon:function(e){e.forEach(s)}};!function e(t){"GeometryCollection"===t.type?t.geometries.forEach(e):t.type in c&&(u=t,c[t.type](t.arcs))}(t),l.forEach(arguments.length<3?function(e){r.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&r.push(e[0].i)})}else for(var h=0,d=e.arcs.length;h<d;++h)r.push(h);return{type:"MultiLineString",arcs:a(e,r)}}function u(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function l(e,t){var n={},r=[],o=[];function s(e){e.forEach(function(t){t.forEach(function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)})}),r.push(e)}function u(t){return Math.abs(function(e){for(var t,n=-1,r=e.length,o=e[r-1],i=0;++n<r;)i+=(t=o)[0]*(o=e[n])[1]-t[1]*o[0];return i/2}(i(e,{type:"Polygon",arcs:[t]}).coordinates[0]))}return t.forEach(function(e){"Polygon"===e.type?s(e.arcs):"MultiPolygon"===e.type&&e.arcs.forEach(s)}),r.forEach(function(e){if(!e._){var t=[],r=[e];for(e._=1,o.push(t);e=r.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].forEach(function(e){e._||(e._=1,r.push(e))})})})}}),r.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:o.map(function(t){var r,o=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].length<2&&o.push(e)})})}),(r=(o=a(e,o)).length)>1)for(var i,s,l=1,c=u(o[0]);l<r;++l)(i=u(o[l]))>c&&(s=o[0],o[0]=o[l],o[l]=s,c=i);return o})}}function c(e,t){return e[1][2]-t[1][2]}e.version="1.6.26",e.mesh=function(e){return i(e,s.apply(this,arguments))},e.meshArcs=s,e.merge=function(e){return i(e,l.apply(this,arguments))},e.mergeArcs=l,e.feature=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return o(e,t)})}:o(e,t)},e.neighbors=function(e){var t={},n=e.map(function(){return[]});function o(e,n){e.forEach(function(e){e<0&&(e=~e);var r=t[e];r?r.push(n):t[e]=[n]})}function i(e,t){e.forEach(function(e){o(e,t)})}var a={LineString:o,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach(function(e){i(e,t)})}};for(var s in e.forEach(function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){e(t,n)}):t.type in a&&a[t.type](t.arcs,n)}),t)for(var u=t[s],l=u.length,c=0;c<l;++c)for(var h=c+1;h<l;++h){var d,f=u[c],p=u[h];(d=n[f])[s=r(d,p)]!==p&&d.splice(s,0,p),(d=n[p])[s=r(d,f)]!==f&&d.splice(s,0,f)}return n},e.presimplify=function(e,r){var o=n(e.transform),i=function(e){if(!e)return t;var n,r,o=e.scale[0],i=e.scale[1],a=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0);var u=Math.round((e[0]-a)/o),l=Math.round((e[1]-s)/i);e[0]=u-n,e[1]=l-r,n=u,r=l}}(e.transform),a=function(){var e={},t=[],n=0;function r(e,n){for(;n>0;){var r=(n+1>>1)-1,o=t[r];if(c(e,o)>=0)break;t[o._=n]=o,t[e._=n=r]=e}}function o(e,r){for(;;){var o=r+1<<1,i=o-1,a=r,s=t[a];if(i<n&&c(t[i],s)<0&&(s=t[a=i]),o<n&&c(t[o],s)<0&&(s=t[a=o]),a===r)break;t[s._=r]=s,t[e._=r=a]=e}}return e.push=function(e){return r(t[e._=n]=e,n++),n},e.pop=function(){if(!(n<=0)){var e,r=t[0];return--n>0&&o(t[(e=t[n])._=0]=e,0),r}},e.remove=function(e){var i,a=e._;if(t[a]===e)return a!==--n&&(c(i=t[n],e)<0?r:o)(t[i._=a]=i,a),a},e}();function s(e){a.remove(e),e[1][2]=r(e),a.push(e)}return r||(r=u),e.arcs.forEach(function(e){var t,n,u,l,c=[],h=0;for(n=0,u=e.length;n<u;++n)o(e[n]=[(l=e[n])[0],l[1],1/0],n);for(n=1,u=e.length-1;n<u;++n)(t=e.slice(n-1,n+2))[1][2]=r(t),c.push(t),a.push(t);for(n=0,u=c.length;n<u;++n)(t=c[n]).previous=c[n-1],t.next=c[n+1];for(;t=a.pop();){var d=t.previous,f=t.next;t[1][2]<h?t[1][2]=h:h=t[1][2],d&&(d.next=f,d[2]=t[2],s(d)),f&&(f.previous=d,f[0]=t[0],s(f))}e.forEach(i)}),e}}(t)},os0x:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return u}),n.d(t,"__metadata",function(){return l}),n.d(t,"__awaiter",function(){return c}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return y}),n.d(t,"__spreadArrays",function(){return m}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return v}),n.d(t,"__asyncDelegator",function(){return b}),n.d(t,"__asyncValues",function(){return w}),n.d(t,"__makeTemplateObject",function(){return _}),n.d(t,"__importStar",function(){return C}),n.d(t,"__importDefault",function(){return E});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{(n=o[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,l):c(i[0][2],n)}catch(e){c(i[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,o,(t=e[n](t)).done,t.value)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}},"q/0M":function(e,t,n){"use strict";n.r(t),n.d(t,"LogLevel",function(){return o}),n.d(t,"Logger",function(){return s}),n.d(t,"setLogLevel",function(){return u});var r=[],o=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),i=o.INFO,a=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case o.DEBUG:case o.VERBOSE:console.log.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case o.INFO:console.info.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case o.WARN:console.warn.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case o.ERROR:console.error.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},s=function(){function e(e){this.name=e,this._logLevel=i,this._logHandler=a,r.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.ERROR].concat(e))},e}();function u(e){r.forEach(function(t){t.logLevel=e})}},qwng:function(e,t,n){var r=function(){"use strict";var e,r=/\s*/g,o=/^\s*|\s*$/g,i=/\s+/;function a(e){if(!e||!e.length)return 0;for(var t=0,n=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return n}function s(e,t){return e.getElementsByTagName(t)}function u(e,t){return e.getAttribute(t)}function l(e,t){return parseFloat(u(e,t))}function c(e,t){var n=s(e,t);return n.length?n[0]:null}function h(e){for(var t=0,n=[];t<e.length;t++)n[t]=parseFloat(e[t]);return n}function d(e){var t;return e&&(t=e).normalize&&t.normalize(),e&&e.textContent||""}function f(e){return h(e.replace(r,"").split(","))}function p(e){for(var t=e.replace(o,"").split(i),n=[],r=0;r<t.length;r++)n.push(f(t[r]));return n}function y(e){var t,n=[l(e,"lon"),l(e,"lat")],r=c(e,"ele"),o=c(e,"gpxtpx:hr")||c(e,"hr"),i=c(e,"time");return r&&(t=parseFloat(d(r)),isNaN(t)||n.push(t)),{coordinates:n,time:i?d(i):null,heartRate:o?parseFloat(d(o)):null}}function m(t){return void 0!==t.xml?t.xml:e.serializeToString(t)}return"undefined"!=typeof XMLSerializer?e=new XMLSerializer:"object"!=typeof t||"object"!=typeof process||process.browser||(e=new(n(1).XMLSerializer)),{kml:function(e){for(var t={type:"FeatureCollection",features:[]},n={},r=["Polygon","LineString","Point","Track","gx:Track"],o=s(e,"Placemark"),i=s(e,"Style"),l=s(e,"StyleMap"),y=0;y<i.length;y++)n["#"+u(i[y],"id")]=a(m(i[y])).toString(16);for(var g=0;g<l.length;g++)n["#"+u(l[g],"id")]=a(m(l[g])).toString(16);for(var v=0;v<o.length;v++)t.features=t.features.concat(_(o[v]));function b(e){var t,n;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(n=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(2)),[t,isNaN(n)?void 0:n]}function w(e){var t=s(e,"coord"),n=[],r=[];0===t.length&&(t=s(e,"gx:coord"));for(var o=0;o<t.length;o++)n.push(h(d(t[o]).split(" ")));for(var i=s(e,"when"),a=0;a<i.length;a++)r.push(d(i[a]));return{coords:n,times:r}}function _(e){var t,o=function e(t){var n,o,i,a,u,l=[],h=[];if(c(t,"MultiGeometry"))return e(c(t,"MultiGeometry"));if(c(t,"MultiTrack"))return e(c(t,"MultiTrack"));if(c(t,"gx:MultiTrack"))return e(c(t,"gx:MultiTrack"));for(i=0;i<r.length;i++)if(o=s(t,r[i]))for(a=0;a<o.length;a++)if(n=o[a],"Point"===r[i])l.push({type:"Point",coordinates:f(d(c(n,"coordinates")))});else if("LineString"===r[i])l.push({type:"LineString",coordinates:p(d(c(n,"coordinates")))});else if("Polygon"===r[i]){var y=s(n,"LinearRing"),m=[];for(u=0;u<y.length;u++)m.push(p(d(c(y[u],"coordinates"))));l.push({type:"Polygon",coordinates:m})}else if("Track"===r[i]||"gx:Track"===r[i]){var g=w(n);l.push({type:"LineString",coordinates:g.coords}),g.times.length&&h.push(g.times)}return{geoms:l,coordTimes:h}}(e),i={},a=d(c(e,"name")),l=d(c(e,"styleUrl")),h=d(c(e,"description")),y=c(e,"TimeSpan"),m=c(e,"ExtendedData"),g=c(e,"LineStyle"),v=c(e,"PolyStyle");if(!o.geoms.length)return[];if(a&&(i.name=a),"#"!==l[0]&&(l="#"+l),l&&n[l]&&(i.styleUrl=l,i.styleHash=n[l]),h&&(i.description=h),y){var _=d(c(y,"begin")),C=d(c(y,"end"));i.timespan={begin:_,end:C}}if(g){var E=b(d(c(g,"color"))),S=E[0],T=E[1],I=parseFloat(d(c(g,"width")));S&&(i.stroke=S),isNaN(T)||(i["stroke-opacity"]=T),isNaN(I)||(i["stroke-width"]=I)}if(v){var D=b(d(c(v,"color"))),k=D[0],x=D[1],N=d(c(v,"fill")),A=d(c(v,"outline"));k&&(i.fill=k),isNaN(x)||(i["fill-opacity"]=x),N&&(i["fill-opacity"]="1"===N?1:0),A&&(i["stroke-opacity"]="1"===A?1:0)}if(m){var P=s(m,"Data"),O=s(m,"SimpleData");for(t=0;t<P.length;t++)i[P[t].getAttribute("name")]=d(c(P[t],"value"));for(t=0;t<O.length;t++)i[O[t].getAttribute("name")]=d(O[t])}o.coordTimes.length&&(i.coordTimes=1===o.coordTimes.length?o.coordTimes[0]:o.coordTimes);var M={type:"Feature",geometry:1===o.geoms.length?o.geoms[0]:{type:"GeometryCollection",geometries:o.geoms},properties:i};return u(e,"id")&&(M.id=u(e,"id")),[M]}return t},gpx:function(e){var t,n,r,o,i=s(e,"trk"),a=s(e,"rte"),u=s(e,"wpt"),l={type:"FeatureCollection",features:[]};for(t=0;t<i.length;t++)(n=f(i[t]))&&l.features.push(n);for(t=0;t<a.length;t++)(n=p(a[t]))&&l.features.push(n);for(t=0;t<u.length;t++)l.features.push((o=void 0,(o=m(r=u[t])).sym=d(c(r,"sym")),{type:"Feature",properties:o,geometry:{type:"Point",coordinates:y(r).coordinates}}));function h(e,t){var n=s(e,t),r=[],o=[],i=[],a=n.length;if(a<2)return{};for(var u=0;u<a;u++){var l=y(n[u]);r.push(l.coordinates),l.time&&o.push(l.time),l.heartRate&&i.push(l.heartRate)}return{line:r,times:o,heartRates:i}}function f(e){for(var t,n=s(e,"trkseg"),r=[],o=[],i=[],a=0;a<n.length;a++)(t=h(n[a],"trkpt")).line&&r.push(t.line),t.times&&t.times.length&&o.push(t.times),t.heartRates&&t.heartRates.length&&i.push(t.heartRates);if(0!==r.length){var u=m(e);return o.length&&(u.coordTimes=1===r.length?o[0]:o),i.length&&(u.heartRates=1===r.length?i[0]:i),{type:"Feature",properties:u,geometry:{type:1===r.length?"LineString":"MultiLineString",coordinates:1===r.length?r[0]:r}}}}function p(e){var t=h(e,"rtept");if(t.line)return{type:"Feature",properties:m(e),geometry:{type:"LineString",coordinates:t.line}}}function m(e){var t,n=["name","desc","author","copyright","link","time","keywords"],r={};for(t=0;t<n.length;t++)r[n[t]]=d(c(e,n[t]));return function(e){var t={};for(var n in e)e[n]&&(t[n]=e[n]);return t}(r)}return l}}}();e.exports=r},vyr2:function(e,t,n){var r=n("93Jm"),o=n("Nuzq"),i=n("Mkpm"),a=n("cSZD"),s=n("iML4"),u=n("qwng");function l(e,t){"setGeoJSON"in e?e.setGeoJSON(t):"addData"in e&&e.addData(t)}function c(e,t,n){var r="string"==typeof e?JSON.parse(e):e;for(var o in n=n||L.geoJson(),r.objects){var i=s.feature(r,r.objects[o]);l(n,i.features?i.features:i)}return n}function h(e,t,n){return n=n||L.geoJson(),o.csv2geojson(e,t=t||{},function(e,t){if(e)return n.fire("error",{error:e});l(n,t)}),n}function d(e,t,n){var r=m(e);return r?(l(n=n||L.geoJson(),u.gpx(r)),n):n.fire("error",{error:"Could not parse GPX"})}function f(e,t,n){var r=m(e);return r?(l(n=n||L.geoJson(),u.kml(r)),n):n.fire("error",{error:"Could not parse KML"})}function p(e,t,n){n=n||L.geoJson();for(var r=a.decode(e,(t=t||{}).precision),o={type:"LineString",coordinates:[]},i=0;i<r.length;i++)o.coordinates[i]=[r[i][1],r[i][0]];return l(n,o),n}function y(e,t,n){return l(n=n||L.geoJson(),i(e)),n}function m(e){return"string"==typeof e?(new DOMParser).parseFromString(e,"text/xml"):e}e.exports.polyline=function(e,t,n){var o=n||L.geoJson();return r(e,function(e,n){if(e)return o.fire("error",{error:e});p(n.responseText,t,o),o.fire("ready")}),o},e.exports.polyline.parse=p,e.exports.geojson=function(e,t,n){var o=n||L.geoJson();return r(e,function(e,t){if(e)return o.fire("error",{error:e});l(o,JSON.parse(t.responseText)),o.fire("ready")}),o},e.exports.topojson=function(e,t,n){var o=n||L.geoJson();return r(e,function(e,t){if(e)return o.fire("error",{error:e});c(t.responseText,0,o),o.fire("ready")}),o},e.exports.topojson.parse=c,e.exports.csv=function(e,t,n){var o=n||L.geoJson();return r(e,function(e,n){var r;if(e)return o.fire("error",{error:e});function i(){r=!0}o.on("error",i),h(n.responseText,t,o),o.off("error",i),r||o.fire("ready")}),o},e.exports.csv.parse=h,e.exports.gpx=function(e,t,n){var o=n||L.geoJson();return r(e,function(e,t){var n;if(e)return o.fire("error",{error:e});function r(){n=!0}o.on("error",r),d(t.responseXML||t.responseText,0,o),o.off("error",r),n||o.fire("ready")}),o},e.exports.gpx.parse=d,e.exports.kml=function(e,t,n){var o=n||L.geoJson();return r(e,function(e,t){var n;if(e)return o.fire("error",{error:e});function r(){n=!0}o.on("error",r),f(t.responseXML||t.responseText,0,o),o.off("error",r),n||o.fire("ready")}),o},e.exports.kml.parse=f,e.exports.wkt=function(e,t,n){var o=n||L.geoJson();return r(e,function(e,t){if(e)return o.fire("error",{error:e});y(t.responseText,0,o),o.fire("ready")}),o},e.exports.wkt.parse=y},wj3C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n("30Go"),i=n("zVF4"),a=n("q/0M"),s=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),u=new i.ErrorFactory("app","Firebase",s),l="[DEFAULT]",c=[],h=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=i.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){c.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){c=c.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var o=r[n],i=0,a=Object.keys(e.services_[o]);i<a.length;i++)t.push(e.services_[o][a[i]]);return Promise.all(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=l),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==l?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=l),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;i.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(c.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),c=[])},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw u.create("app-deleted",{appName:this.name_})},e}();h.prototype.name&&h.prototype.options||h.prototype.delete||console.log("dc");var d=new a.Logger("@firebase/app");if(i.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var f=self.firebase.SDK_VERSION;f&&f.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var p=function e(){var t=function(e){var t={},n={},r={},o={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),("object"!=typeof r||null===r)&&(r={name:r});var a=r;void 0===a.name&&(a.name=l);var s=a.name;if("string"!=typeof s||!s)throw u.create("bad-app-name",{appName:String(s)});if(i.contains(t,s))throw u.create("duplicate-app",{appName:s});var h=new e(n,a,o);return t[s]=h,c(h,"create"),h},app:a,apps:null,SDK_VERSION:"6.6.2",INTERNAL:{registerService:function(t,l,c,h,f){if(void 0===f&&(f=!1),n[t])return d.debug("There were multiple attempts to register service "+t+"."),o[t];function p(e){if(void 0===e&&(e=a()),"function"!=typeof e[t])throw u.create("invalid-app-argument",{appName:t});return e[t]()}return n[t]=l,h&&(r[t]=h,s().forEach(function(e){h("create",e)})),void 0!==c&&i.deepExtend(p,c),o[t]=p,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,f?e:[])},p},removeApp:function(e){c(t[e],"delete"),delete t[e]},factories:n,useAsService:h}};function a(e){if(!i.contains(t,e=e||l))throw u.create("no-app",{appName:e});return t[e]}function s(){return Object.keys(t).map(function(e){return t[e]})}function c(e,t){for(var o=0,i=Object.keys(n);o<i.length;o++){var a=h(0,i[o]);if(null===a)return;r[a]&&r[a](t,e)}}function h(e,t){return"serverAuth"===t?null:t}return o.default=o,Object.defineProperty(o,"apps",{get:s}),a.App=e,o}(h);return t.INTERNAL=o.__assign({},t.INTERNAL,{createFirebaseNamespace:e,extendNamespace:function(e){i.deepExtend(t,e)},createSubscribe:i.createSubscribe,ErrorFactory:i.ErrorFactory,deepExtend:i.deepExtend}),t}(),y=p.initializeApp;p.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,e)};var m=p;t.default=m,t.firebase=m},x7I3:function(e,t,n){"use strict";n.r(t),n.d(t,"ErrorCode",function(){return nr}),n.d(t,"EventType",function(){return rr}),n.d(t,"WebChannel",function(){return or}),n.d(t,"XhrIo",function(){return ir}),n.d(t,"createWebChannelTransport",function(){return tr});var r,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=i||{},a=o;function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function l(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function c(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function d(e){return"array"==h(e)}function f(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var y="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function C(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.yb=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}function E(){this.j=this.j,this.i=this.i}E.prototype.j=!1,E.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[y]||(this[y]=++m))},E.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},T=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,o=s(e)?e.split(""):e,i=0;i<r;i++)i in o&&t.call(n,o[i],i,e)};function I(e){return Array.prototype.concat.apply([],arguments)}function D(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e){return/^[\s\xa0]*$/.test(e)}var x,N=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function A(e,t){return-1!=e.indexOf(t)}function P(e,t){return e<t?-1:e>t?1:0}e:{var O=a.navigator;if(O){var M=O.userAgent;if(M){x=M;break e}}x=""}function R(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L(e){var t,n={};for(t in e)n[t]=e[t];return n}var V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(e,t){for(var n,r,o=1;o<arguments.length;o++){for(n in r=arguments[o])e[n]=r[n];for(var i=0;i<V.length;i++)n=V[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function j(e){return j[" "](e),e}j[" "]=c;var B,q,U=A(x,"Opera"),z=A(x,"Trident")||A(x,"MSIE"),G=A(x,"Edge"),W=G||z,H=A(x,"Gecko")&&!(A(x.toLowerCase(),"webkit")&&!A(x,"Edge"))&&!(A(x,"Trident")||A(x,"MSIE"))&&!A(x,"Edge"),Q=A(x.toLowerCase(),"webkit")&&!A(x,"Edge");function K(){var e=a.document;return e?e.documentMode:void 0}e:{var $="",Y=(q=x,H?/rv:([^\);]+)(\)|;)/.exec(q):G?/Edge\/([\d\.]+)/.exec(q):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):Q?/WebKit\/(\S+)/.exec(q):U?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(Y&&($=Y?Y[1]:""),z){var J=K();if(null!=J&&J>parseFloat($)){B=String(J);break e}}B=$}var Z,X={};function ee(e){return function(e,t){var n=X;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,function(){for(var t=0,n=N(String(B)).split("."),r=N(String(e)).split("."),o=Math.max(n.length,r.length),i=0;0==t&&i<o;i++){var a=n[i]||"",s=r[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=P(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||P(0==a[2].length,0==s[2].length)||P(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}var te=a.document;Z=te&&z?K()||("CSS1Compat"==te.compatMode?parseInt(B,10):5):void 0;var ne=!z||9<=Number(Z),re=z&&!ee("9"),oe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",c,t),a.removeEventListener("test",c,t)}catch(e){}return e}();function ie(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function ae(e,t){if(ie.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(H){e:{try{j(t.nodeName);var o=!0;break e}catch(e){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:se[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}ie.prototype.b=function(){this.Ja=!1},C(ae,ie);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.b=function(){ae.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var ue="closure_listenable_"+(1e6*Math.random()|0),le=0;function ce(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function he(e){this.src=e,this.a={},this.b=0}function de(e,t){var n=t.type;if(n in e.a){var r,o=e.a[n],i=S(o,t);(r=0<=i)&&Array.prototype.splice.call(o,i,1),r&&(ce(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function fe(e,t,n,r){for(var o=0;o<e.length;++o){var i=e[o];if(!i.X&&i.listener==t&&i.capture==!!n&&i.da==r)return o}return-1}he.prototype.add=function(e,t,n,r,o){var i=e.toString();(e=this.a[i])||(e=this.a[i]=[],this.b++);var a=fe(e,t,r,o);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new function(e,t,n,r,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=o,this.key=++le,this.X=this.Z=!1}(t,this.src,i,!!r,o)).Z=n,e.push(t)),t};var pe="closure_lm_"+(1e6*Math.random()|0),ye={};function me(e,t,n,r,o){if(r&&r.once)return function e(t,n,r,o,i){if(d(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,o,i);return null}return r=Ee(r),t&&t[ue]?t.Ba(n,r,p(o)?!!o.capture:!!o,i):ge(t,n,r,!0,o,i)}(e,t,n,r,o);if(d(t)){for(var i=0;i<t.length;i++)me(e,t[i],n,r,o);return null}return n=Ee(n),e&&e[ue]?e.Aa(t,n,p(r)?!!r.capture:!!r,o):ge(e,t,n,!1,r,o)}function ge(e,t,n,r,o,i){if(!t)throw Error("Invalid event type");var a=p(o)?!!o.capture:!!o;if(a&&!ne)return null;var s=_e(e);if(s||(e[pe]=s=new he(e)),(n=s.add(t,n,r,a,i)).proxy)return n;if(r=function(){var e=we,t=ne?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)oe||(o=a),void 0===o&&(o=!1),e.addEventListener(t.toString(),r,o);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ve(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[ue])de(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_e(t))?(de(n,e),0==n.b&&(n.src=null,t[pe]=null)):ce(e)}}}function be(e){return e in ye?ye[e]:ye[e]="on"+e}function we(e,t){return!!e.X||function(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&ve(e),n.call(r,t)}(e,ne?new ae(t,this):t=new ae(t||l("window.event"),this))}function _e(e){return(e=e[pe])instanceof he?e:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ee(e){return"function"==h(e)?e:(e[Ce]||(e[Ce]=function(t){return e.handleEvent(t)}),e[Ce])}function Se(){E.call(this),this.c=new he(this),this.J=this,this.B=null}function Te(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var o=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&de(e.c,a),o=!1!==s.call(u,r)&&o}}return o&&0!=r.Ja}C(Se,E),Se.prototype[ue]=!0,(r=Se.prototype).addEventListener=function(e,t,n,r){me(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,o,i){if(d(n))for(var a=0;a<n.length;a++)e(t,n[a],r,o,i);else o=p(o)?!!o.capture:!!o,r=Ee(r),t&&t[ue]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=fe(a=t.a[n],r,o,i))&&(ce(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):t&&(t=_e(t))&&(n=t.a[n.toString()],t=-1,n&&(t=fe(n,r,o,i)),(r=-1<t?n[t]:null)&&ve(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new ie(e,n);else if(e instanceof ie)e.target=e.target||n;else{var o=e;F(e=new ie(r,n),o)}if(o=!0,t)for(var i=t.length-1;0<=i;i--){var a=e.a=t[i];o=Te(a,r,!0,e)&&o}if(o=Te(a=e.a=n,r,!0,e)&&o,o=Te(a,r,!1,e)&&o,t)for(i=0;i<t.length;i++)o=Te(a=e.a=t[i],r,!1,e)&&o;return o},r.G=function(){if(Se.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)ce(n[r]);delete t.a[e],t.b--}}this.B=null},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ie=a.JSON.stringify;function De(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function ke(){this.b=this.a=null}De.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var xe,Ne=new De(function(){return new Pe},function(e){e.reset()});function Ae(){var e=Le,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Pe(){this.next=this.b=this.a=null}function Oe(e){a.setTimeout(function(){throw e},0)}function Me(e,t){xe||function(){var e=a.Promise.resolve(void 0);xe=function(){e.then(Ve)}}(),Re||(xe(),Re=!0),Le.add(e,t)}ke.prototype.add=function(e,t){var n=Ne.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Pe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Pe.prototype.reset=function(){this.next=this.b=this.a=null};var Re=!1,Le=new ke;function Ve(){for(var e;e=Ae();){try{e.a.call(e.b)}catch(e){Oe(e)}var t=Ne;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Re=!1}function Fe(e,t){Se.call(this),this.b=e||1,this.a=t||a,this.f=b(this.gb,this),this.g=_()}function je(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Be(e,t,n){if("function"==h(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function qe(e,t,n){E.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.ab,this),this.a=[]}function Ue(e){e.U=Be(e.b,e.c),e.f.apply(null,e.a)}function ze(e){E.call(this),this.b=e,this.a={}}C(Fe,Se),(r=Fe.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var e=_()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(je(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_())},r.G=function(){Fe.N.G.call(this),je(this),delete this.a},C(qe,E),(r=qe.prototype).ea=!1,r.U=null,r.Ua=function(e){this.a=arguments,this.U?this.ea=!0:Ue(this)},r.G=function(){qe.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,Ue(this))},C(ze,E);var Ge=[];function We(e,t,n,r){d(n)||(n&&(Ge[0]=n.toString()),n=Ge);for(var o=0;o<n.length;o++){var i=me(t,n[o],r||e.handleEvent,!1,e.b||e);if(!i)break;e.a[i.key]=i}}function He(e){R(e.a,function(e,t){this.a.hasOwnProperty(t)&&ve(e)},e),e.a={}}ze.prototype.G=function(){ze.N.G.call(this),He(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qe=new Se;function Ke(e){ie.call(this,"serverreachability",e)}function $e(e){Qe.dispatchEvent(new Ke(Qe,e))}function Ye(e){ie.call(this,"statevent",e)}function Je(e){Qe.dispatchEvent(new Ye(Qe,e))}function Ze(e){ie.call(this,"timingevent",e)}function Xe(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}C(Ke,ie),C(Ye,ie),C(Ze,ie);var et={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},tt={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function nt(){}function rt(){}nt.prototype.a=null;var ot,it={OPEN:"a",ib:"b",Na:"c",rb:"d"};function at(){ie.call(this,"d")}function st(){ie.call(this,"c")}function ut(){}function lt(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new ze(this),this.O=ct,this.P=new Fe(e=W?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}C(at,ie),C(st,ie),C(ut,nt),ot=new ut;var ct=45e3,ht={},dt={};function ft(e,t,n){e.F=1,e.f=Ft(At(t)),e.l=n,e.H=!0,yt(e,null)}function pt(e,t,n,r){e.F=1,e.f=Ft(At(t)),e.l=null,e.H=n,yt(e,r)}function yt(e,t){e.v=_(),vt(e),e.D=At(e.f),Vt(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new qe(b(e.Ka,e,e.a),e.J)),We(e.I,e.a,"readystatechange",e.eb),t=e.h?L(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),$e(1)}function mt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var o=gt(e,n);if(o==dt){4==t&&(e.c=4,Je(14),r=!1);break}if(o==ht){e.c=4,Je(15),r=!1;break}Et(e,o)}4==t&&0==n.length&&(e.c=1,Je(16),r=!1),e.b=e.b&&r,r||(Ct(e),_t(e))}function gt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?dt:(n=Number(t.substring(n,r)),isNaN(n)?ht:(r+=1)+n>t.length?dt:(t=t.substr(r,n),e.A=r+n,t))}function vt(e){e.R=_()+e.O,bt(e,e.O)}function bt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=Xe(b(e.bb,e),t)}function wt(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function _t(e){e.g.Da()||e.m||e.g.na(e)}function Ct(e){wt(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,je(e.P),He(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Et(e,t){try{e.g.Ga(e,t),$e(4)}catch(e){}}function St(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||s(e))T(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(f(e)||s(e)){n=[];for(var r=e.length,o=0;o<r;o++)n.push(o)}else for(o in n=[],r=0,e)n[r++]=o;o=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var i=0;i<o;i++)t.call(void 0,r[i],n&&n[i],e)}}function Tt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Tt)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function It(e,t){kt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Dt(e))}function Dt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];kt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var o={};for(n=t=0;t<e.a.length;)kt(o,r=e.a[t])||(e.a[n++]=r,o[r]=1),t++;e.a.length=n}}function kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=lt.prototype).setTimeout=function(e){this.O=e},r.eb=function(e){e=e.target;var t=this.B;t&&3==kn(e)?t.Ua():this.Ka(e)},r.Ka=function(e){try{if(e==this.a)e:{var t=kn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!W&&!this.a.aa())){this.m||4!=t||7==n||$e(8==n||0>=r?3:2),wt(this);var o=this.a.T();this.o=o;var i=this.a.aa();if(this.b=200==o){if(this.S&&!this.s){t:{if(this.a){var a=xn(this.a,"X-HTTP-Initial-Response");if(a&&!k(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,Je(12),Ct(this),_t(this);break e}this.s=!0,Et(this,s)}this.H?(mt(this,t,i),W&&this.b&&3==t&&(We(this.I,this.P,"tick",this.cb),this.P.start())):Et(this,i),4==t&&Ct(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,vt(this)))}else 400==o&&0<i.indexOf("Unknown SID")?(this.c=3,Je(12)):(this.c=0,Je(13)),Ct(this),_t(this)}}}catch(e){}},r.cb=function(){if(this.a){var e=kn(this.a),t=this.a.aa();this.A<t.length&&(wt(this),mt(this,e,t),this.b&&4!=e&&vt(this))}},r.cancel=function(){this.m=!0,Ct(this)},r.bb=function(){this.i=null;var e=_();0<=e-this.R?(2!=this.F&&($e(3),Je(17)),Ct(this),this.c=2,_t(this)):bt(this,this.R-e)},(r=Tt.prototype).C=function(){Dt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return Dt(this),this.a.concat()},r.get=function(e,t){return kt(this.b,e)?this.b[e]:t},r.set=function(e,t){kt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var o=n[r],i=this.get(o);e.call(t,i,o,this)}};var xt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Nt?(this.h=void 0!==t?t:e.h,Pt(this,e.f),this.j=e.j,Ot(this,e.b),Mt(this,e.i),this.a=e.a,Rt(this,Zt(e.c)),this.g=e.g):e&&(n=String(e).match(xt))?(this.h=!!t,Pt(this,n[1]||"",!0),this.j=jt(n[2]||""),Ot(this,n[3]||"",!0),Mt(this,n[4]),this.a=jt(n[5]||"",!0),Rt(this,n[6]||"",!0),this.g=jt(n[7]||"")):(this.h=!!t,this.c=new Qt(null,this.h))}function At(e){return new Nt(e)}function Pt(e,t,n){e.f=n?jt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Ot(e,t,n){e.b=n?jt(t,!0):t}function Mt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Rt(e,t,n){t instanceof Qt?(e.c=t,function(e,t){t&&!e.f&&(Kt(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&($t(this,t),Jt(this,n,e))},e)),e.f=t}(e.c,e.h)):(n||(t=Bt(t,Wt)),e.c=new Qt(t,e.h))}function Lt(e,t,n){e.c.set(t,n)}function Vt(e,t,n){d(n)||(n=[String(n)]),Jt(e.c,t,n)}function Ft(e){return Lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),e}function jt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Bt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,qt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function qt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Nt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Bt(t,Ut,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Bt(t,Ut,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Bt(n,"/"==n.charAt(0)?Gt:zt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Bt(n,Ht)),e.join("")},Nt.prototype.resolve=function(e){var t=At(this),n=!!e.f;n?Pt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Ot(t,e.b):n=null!=e.i;var r=e.a;if(n)Mt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var o=t.a.lastIndexOf("/");-1!=o&&(r=t.a.substr(0,o+1)+r)}if(".."==(o=r)||"."==o)r="";else if(A(o,"./")||A(o,"/.")){r=0==o.lastIndexOf("/",0),o=o.split("/");for(var i=[],a=0;a<o.length;){var s=o[a++];"."==s?r&&a==o.length&&i.push(""):".."==s?((1<i.length||1==i.length&&""!=i[0])&&i.pop(),r&&a==o.length&&i.push("")):(i.push(s),r=!0)}r=i.join("/")}else r=o}return n?t.a=r:n=""!==e.c.toString(),n?Rt(t,Zt(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Ut=/[#\/\?@]/g,zt=/[#\?:]/g,Gt=/[#\?]/g,Wt=/[#\?@]/g,Ht=/#/g;function Qt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Kt(e){e.a||(e.a=new Tt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var i=e[n].substring(0,r);o=e[n].substring(r+1)}else i=e[n];t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function $t(e,t){Kt(e),t=Xt(e,t),kt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,It(e.a,t))}function Yt(e,t){return Kt(e),t=Xt(e,t),kt(e.a.b,t)}function Jt(e,t,n){$t(e,t),0<n.length&&(e.c=null,e.a.set(Xt(e,t),D(n)),e.b+=n.length)}function Zt(e){var t=new Qt;return t.c=e.c,e.a&&(t.a=new Tt(e.a),t.b=e.b),t}function Xt(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function en(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function tn(e){var t=e.a.F.a;if(null!=t)Je(4),t?(Je(10),qn(e.a,e,!1)):(Je(11),qn(e.a,e,!0));else{e.b=new lt(e,void 0,void 0),e.b.h=e.h,t=Hn(t=e.a,t.Y()?e.f:null,e.i),Je(4),Vt(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Lt(t,n,r),pt(e.b,t,!1,e.f)}}function nn(){this.a=new Tt}function rn(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[y]||(e[y]=++m)):t.charAt(0)+e}function on(e){this.g=e||an,e=a.PerformanceNavigationTiming?0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(a.ka&&a.ka.Ea&&a.ka.Ea()&&a.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new nn),this.b=null,this.c=[]}(r=Qt.prototype).add=function(e,t){Kt(this),this.c=null,e=Xt(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){Kt(this),this.a.forEach(function(n,r){T(n,function(n){e.call(t,n,r,this)},this)},this)},r.K=function(){Kt(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var o=e[r],i=0;i<o.length;i++)n.push(t[r]);return n},r.C=function(e){Kt(this);var t=[];if(s(e))Yt(this,e)&&(t=I(t,this.a.get(Xt(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=I(t,e[n])}return t},r.set=function(e,t){return Kt(this),this.c=null,Yt(this,e=Xt(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],o=encodeURIComponent(String(r));r=this.C(r);for(var i=0;i<r.length;i++){var a=o;""!==r[i]&&(a+="="+encodeURIComponent(String(r[i]))),e.push(a)}}return this.c=e.join("&")},C(function(){},function(){}),(r=en.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=xn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=xn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Gn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Gn(t,2)}else 1==this.M&&(this.g?Je(6):"11111"==t?(Je(5),this.g=!0,(!z||10<=Number(Z))&&(this.c=200,this.b.cancel(),Je(11),qn(this.a,this,!0))):(Je(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,tn(this)):1==this.M&&(this.g?(Je(11),qn(this.a,this,!0)):(Je(10),qn(this.a,this,!1)));else{0==this.M?Je(8):1==this.M&&Je(9);var e=this.a;e.m=this.c,Gn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},nn.prototype.add=function(e){this.a.set(rn(e),e)},nn.prototype.C=function(){return this.a.C()};var an=10;function sn(e,t){!e.a&&(A(t,"spdy")||A(t,"quic")||A(t,"h2"))&&(e.f=e.g,e.a=new nn,e.b&&(hn(e,e.b),e.b=null))}function un(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function ln(e){return e.b?1:e.a?e.a.a.c:0}function cn(e,t){return e.b?e=e.b==t:e.a?(t=rn(t),e=kt(e.a.a.b,t)):e=!1,e}function hn(e,t){e.a?e.a.add(t):e.b=t}function dn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=rn(t),n=kt(e.a.a.b,n)),n&&It(e.a.a,rn(t)))}function fn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return T(e.a.C(),function(e){t=t.concat(e.j)}),t}return D(e.c)}function pn(){}function yn(e,t,n){var r=n||"";try{St(e,function(e,n){var o=e;p(e)&&(o=Ie(e)),t.push(r+n+"="+encodeURIComponent(o))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function mn(e,t,n,r,o){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,o(r)}catch(e){}}on.prototype.cancel=function(){var e;this.c=fn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(T(this.a.C(),function(e){e.cancel()}),(e=this.a.a).b={},e.a.length=0,e.c=0)},pn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},pn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var gn=a.JSON.parse;function vn(e){Se.call(this),this.headers=new Tt,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=bn,this.D=this.F=!1}C(vn,Se);var bn="",wn=/^https?$/i,_n=["POST","PUT"];function Cn(e){return"content-type"==e.toLowerCase()}function En(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Sn(e),In(e)}function Sn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Tn(e){if(e.b&&void 0!==i&&(!e.s[1]||4!=kn(e)||2!=e.T()))if(e.l&&4==kn(e))Be(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==kn(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var o;if(o=0===n){var s=String(e.A).match(xt)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}o=!wn.test(s?s.toLowerCase():"")}t=o}t?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",Sn(e))}finally{In(e)}}}function In(e,t){if(e.a){Dn(e);var n=e.a,r=e.s[0]?c:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Dn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function kn(e){return e.a?e.a.readyState:0}function xn(e,t){return e.a?e.a.getResponseHeader(t):null}function Nn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return R(n,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(),s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var o=""}else o=e.substring(r+1,n);n=(e=[e.substr(0,r),o,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Lt(e,t,n),e}function An(e){this.f=[],this.F=new function(){this.a=this.b=null},this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!l("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=l("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=l("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=l("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=l("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new on(e&&e.concurrentRequestLimit),this.ja=new function(){this.a=new pn},this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Pn(e){if(On(e),3==e.u){var t=e.P++,n=At(e.B);Lt(n,"SID",e.H),Lt(n,"RID",t),Lt(n,"TYPE","terminate"),Vn(e,n),(t=new lt(e,t,void 0)).F=2,t.f=Ft(At(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=_(),vt(t)}Wn(e)}function On(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),Un(e),e.b.cancel(),e.h&&(u(e.h)&&a.clearTimeout(e.h),e.h=null)}function Mn(e,t){e.f.push(new function(e,t){this.b=e,this.a=t}(e.Ra++,t)),3==e.u&&Rn(e)}function Rn(e){un(e.b)||e.h||(e.h=!0,Me(e.Ia,e),e.A=0)}function Ln(e,t){var n;n=t?t.W:e.P++;var r=At(e.B);Lt(r,"SID",e.H),Lt(r,"RID",n),Lt(r,"AID",e.O),Vn(e,r),e.g&&e.i&&Nn(r,e.g,e.i),n=new lt(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Fn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),hn(e.b,n),ft(n,r,t)}function Vn(e,t){e.c&&St({},function(e,n){Lt(t,n,e)})}function Fn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Ta,e.c,e):null;e:for(var o=e.f,i=-1;;){var a=["count="+n];-1==i?0<n?a.push("ofs="+(i=o[0].b)):i=0:a.push("ofs="+i);for(var s=!0,u=0;u<n;u++){var l=o[u].b,c=o[u].a;if(0>(l-=i))i=Math.max(0,o[u].b-100),s=!1;else try{yn(c,a,"req"+l+"_")}catch(e){r&&r(c)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function jn(e){e.a||e.l||(e.S=1,Me(e.Ha,e),e.v=0)}function Bn(e){return!(e.a||e.l||3<=e.v||(e.S++,e.l=Xe(b(e.Ha,e),zn(e,e.v)),e.v++,0))}function qn(e,t,n){var r=t.l;r&&sn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Hn(e,null,e.ha),Rn(e)}function Un(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function zn(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function Gn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.fb,e);n||(n=new Nt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Pt(n,"https"),Ft(n)),function(e,t){var n=new function(){};if(a.Image){var r=new Image;r.onload=w(mn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(mn,n,r,"TestLoadImage: error",!1,t),r.onabort=w(mn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(mn,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Je(2);e.u=0,e.c&&e.c.ta(t),Wn(e),On(e)}function Wn(e){e.u=0,e.m=-1,e.c&&(0==fn(e.b).length&&0==e.f.length||(e.b.c.length=0,D(e.f),e.f.length=0),e.c.sa())}function Hn(e,t,n){var r=function(e){return e instanceof Nt?At(e):new Nt(e,void 0)}(n);if(""!=r.b)t&&Ot(r,t+"."+r.b),Mt(r,r.i);else{var o=a.location;r=function(e,t,n,r){var o=new Nt(null,void 0);return e&&Pt(o,e),t&&Ot(o,t),n&&Mt(o,n),r&&(o.a=r),o}(o.protocol,t?t+"."+o.hostname:o.hostname,+o.port,n)}return e.V&&R(e.V,function(e,t){Lt(r,t,e)}),n=e.I,(t=e.j)&&n&&Lt(r,t,n),Lt(r,"VER",e.wa),Vn(e,r),r}function Qn(){}function Kn(){if(z&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function $n(e,t){Se.call(this),this.a=new An(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,o=arguments[n];0==o.lastIndexOf("/",0)?t=o:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?o:"/"+o)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!k(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new Zn(this)}function Yn(e){at.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Jn(){st.call(this),this.status=1}function Zn(e){this.a=e}(r=vn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(e){var t;return(t=e.a)||(t=e.a={}),t}(this.H?this.H:ot),this.a.onreadystatechange=b(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void En(this,e)}e=n||"";var o=new Tt(this.headers);r&&St(r,function(e,t){o.set(t,e)}),r=function(e){e:{for(var t=Cn,n=e.length,r=s(e)?e.split(""):e,o=0;o<n;o++)if(o in r&&t.call(void 0,r[o],o,e)){t=o;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}(o.K()),n=a.FormData&&e instanceof a.FormData,!(0<=S(_n,t))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Dn(this),0<this.o&&((this.D=function(e){return z&&ee(9)&&u(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ca,this)):this.m=Be(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){En(this,e)}},r.Ca=function(){void 0!==i&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),In(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),In(this,!0)),vn.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?Tn(this):this.$a())},r.$a=function(){Tn(this)},r.T=function(){try{return 2<kn(this)?this.a.status:-1}catch(e){return-1}},r.za=function(){try{return 2<kn(this)?this.a.statusText:""}catch(e){return""}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},r.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),gn(t)}},r.ya=function(){return this.h},r.Ya=function(){return s(this.f)?this.f:String(this.f)},(r=An.prototype).wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new lt(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?F(r=L(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var o=t=0;o<this.f.length;o++){var i=this.f[o];if(void 0===(i="__data__"in i.a&&s(i=i.a.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=o;break e}if(4096===t||o===this.f.length-1){t=o+1;break e}}t=1e3}else t=1e3;t=Fn(this,n,t),Lt(o=At(this.B),"RID",e),Lt(o,"CVER",22),this.o&&this.j&&Lt(o,"X-HTTP-Session-Id",this.j),Vn(this,o),this.g&&r&&Nn(o,this.g,r),hn(this.b,n),this.W?(Lt(o,"$req",t),Lt(o,"SID","null"),n.S=!0,ft(n,o,null)):ft(n,o,t),this.u=2}}else 3==this.u&&(e?Ln(this,e):0==this.f.length||un(this.b)||Ln(this))},r.Ha=function(){this.l=null,this.a=new lt(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=At(this.pa);Lt(e,"RID","rpc"),Lt(e,"SID",this.H),Lt(e,"CI",this.ia?"0":"1"),Lt(e,"AID",this.O),Vn(this,e),Lt(e,"TYPE","xmlhttp"),this.g&&this.i&&Nn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),pt(this.a,e,!0,this.ga)},r.Ga=function(e,t){if(0!=this.u&&(this.a==e||cn(this.b,e)))if(this.m=e.o,!e.s&&cn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(d(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Un(this),this.a.cancel(),this.a=null}Bn(this),Je(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=Xe(b(this.Za,this),6e3));if(1>=ln(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Gn(this,11)}else if((e.s||this.a==e)&&Un(this),!k(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var o=r[3];null!=o&&(this.wa=o),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((o=xn(r,"X-Client-Wire-Protocol"))&&sn(this.b,o),this.j&&(r=xn(r,"X-HTTP-Session-Id")))&&(this.I=r,Lt(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Hn(this,this.Y()?this.ga:null,this.ha),r.s?(dn(this.b,r),(o=this.D)&&r.setTimeout(o),r.i&&(wt(r),vt(r)),this.a=r):jn(this),0<this.f.length&&Rn(this)}else"stop"!=r[0]&&"close"!=r[0]||Gn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Gn(this,7):Pn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Bn(this),Je(19))},r.na=function(e){var t=null;if(this.a==e){Un(this),this.a=null;var n=2}else{if(!cn(this.b,e))return;t=e.j,dn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=_()-e.v,Qe.dispatchEvent(new Ze(Qe,e.l?e.l.length:0,t,this.A)),Rn(this)):jn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(ln(e.b)>=e.b.f-(e.h?1:0)||(e.h?(e.f=t.j.concat(e.f),0):1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa)||(e.h=Xe(b(e.Ia,e,t),zn(e,e.A)),e.A++,0)))}(this,e)||2==n&&Bn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Gn(this,5);break;case 4:Gn(this,10);break;case 3:Gn(this,6);break;default:Gn(this,2)}}},r.fb=function(e){Je(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vn(this.La)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Qn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},Kn.prototype.a=function(e,t){return new $n(e,t)},C($n,Se),(r=$n.prototype).addEventListener=function(e,t,n,r){$n.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){$n.N.removeEventListener.call(this,e,t,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;Je(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new en(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Nn(t,e.g,e.i)),(e=e.w).i=n,t=Hn(e.a,null,e.i),Je(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,tn(e)):(Vt(t,"MODE","init"),!e.a.o&&e.a.j&&Vt(t,"X-HTTP-Session-Id",e.a.j),e.b=new lt(e,void 0,void 0),e.b.h=e.h,pt(e.b,t,!1,null),e.M=0)},r.close=function(){Pn(this.a)},r.Xa=function(e){if(s(e)){var t={};t.__data__=e,Mn(this.a,t)}else this.h?((t={}).__data__=Ie(e),Mn(this.a,t)):Mn(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Pn(this.a),delete this.a,$n.N.G.call(this)},C(Yn,at),C(Jn,st),C(Zn,Qn),Zn.prototype.va=function(){this.a.dispatchEvent("a")},Zn.prototype.ua=function(e){this.a.dispatchEvent(new Yn(e))},Zn.prototype.ta=function(e){this.a.dispatchEvent(new Jn(e))},Zn.prototype.sa=function(){this.a.dispatchEvent("b")};var Xn=w(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},Kn);Kn.prototype.createWebChannel=Kn.prototype.a,$n.prototype.send=$n.prototype.Xa,$n.prototype.open=$n.prototype.Wa,$n.prototype.close=$n.prototype.close,et.NO_ERROR=0,et.TIMEOUT=8,et.HTTP_ERROR=6,tt.COMPLETE="complete",rt.EventType=it,it.OPEN="a",it.CLOSE="b",it.ERROR="c",it.MESSAGE="d",Se.prototype.listen=Se.prototype.Aa,vn.prototype.listenOnce=vn.prototype.Ba,vn.prototype.getLastError=vn.prototype.Ya,vn.prototype.getLastErrorCode=vn.prototype.ya,vn.prototype.getStatus=vn.prototype.T,vn.prototype.getStatusText=vn.prototype.za,vn.prototype.getResponseJson=vn.prototype.Va,vn.prototype.getResponseText=vn.prototype.aa,vn.prototype.send=vn.prototype.ca;var er={createWebChannelTransport:Xn,ErrorCode:et,EventType:tt,WebChannel:rt,XhrIo:vn},tr=er.createWebChannelTransport,nr=er.ErrorCode,rr=er.EventType,or=er.WebChannel,ir=er.XhrIo;t.default=er},zUnb:function(e,t,n){"use strict";n.r(t);var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function s(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var d=Array.isArray||function(e){return e&&"number"==typeof e.length};function f(e){return null!=e&&"object"==typeof e}function p(e){return"function"==typeof e}var y,m={e:{}};function g(){try{return y.apply(this,arguments)}catch(e){return m.e=e,m}}function v(e){return y=e,g}var b=function(e){function t(n){var r=e.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,t.prototype),r}return o(t,e),t}(Error),w=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,s=r?r.length:0;n;)n.remove(this),n=++a<s&&r[a]||null;if(p(o)&&v(o).call(this)===m&&(t=!0,e=e||(m.e instanceof b?_(m.e.errors):[m.e])),d(i))for(a=-1,s=i.length;++a<s;){var u=i[a];if(f(u)&&v(u.unsubscribe).call(u)===m){t=!0,e=e||[];var l=m.e;l instanceof b?e=e.concat(_(l.errors)):e.push(l)}}if(t)throw new b(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=((t=new e).closed=!0,t),e}();function _(e){return e.reduce(function(e,t){return e.concat(t instanceof b?t.errors:t)},[])}var C=!1,E={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){C=e},get useDeprecatedSynchronousErrorHandling(){return C}};function S(e){setTimeout(function(){throw e})}var T={closed:!0,next:function(e){},error:function(e){if(E.useDeprecatedSynchronousErrorHandling)throw e;S(e)},complete:function(){}},I="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",D=function(e){function t(t,n,r){var o,i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=T;break;case 1:if(!t){i.destination=T;break}if("object"==typeof t){if((o=t)instanceof D||"syncErrorThrowable"in o&&o[I]){var a=t[I]();i.syncErrorThrowable=a.syncErrorThrowable,i.destination=a,a.add(i)}else i.syncErrorThrowable=!0,i.destination=new k(i,t);break}default:i.syncErrorThrowable=!0,i.destination=new k(i,t,n,r)}return i}return o(t,e),t.prototype[I]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(w),k=function(e){function t(t,n,r,o){var i,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return p(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==T&&(p((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=i,a._error=r,a._complete=o,a}return o(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;E.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=E.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):S(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;S(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};E.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),E.useDeprecatedSynchronousErrorHandling)throw e;S(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!E.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return E.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(S(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(D),x="function"==typeof Symbol&&Symbol.observable||"@@observable";var N=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof D)return e;if(e[I])return e[I]()}return e||t||n?new D(e,t,n):new D(T)}(e,t,n);if(r?r.call(o,this.source):o.add(this.source||E.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),E.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){E.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=A(t))(function(t,r){var o;o=n.subscribe(function(t){try{e(t)}catch(e){r(e),o&&o.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[x]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:((n=e)?1===n.length?n[0]:function(e){return n.reduce(function(e,t){return t(e)},e)}:function(){})(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=A(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function A(e){if(e||(e=E.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var P=function(e){function t(){var n=e.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,t.prototype),n}return o(t,e),t}(Error),O=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return o(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(w),M=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return o(t,e),t}(D),R=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return o(t,e),t.prototype[I]=function(){return new M(this)},t.prototype.lift=function(e){var t=new V(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new P;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new P;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new P;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new P;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new P;return this.hasError?(e.error(this.thrownError),w.EMPTY):this.isStopped?(e.complete(),w.EMPTY):(this.observers.push(e),new O(this,e))},t.prototype.asObservable=function(){var e=new N;return e.source=this,e},t.create=function(e,t){return new V(e,t)},t}(N),V=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return o(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):w.EMPTY},t}(R);function F(e){return e&&"function"==typeof e.schedule}var j=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parent=t,o.outerValue=n,o.outerIndex=r,o.index=0,o}return o(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(D),B=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}},q=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,S),t}},U=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),z=function(e){return function(t){for(var n=e[U]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}},G=function(e){return function(t){var n=e[x]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},W=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function H(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Q=function(e){if(e instanceof N)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[x])return G(e);if(W(e))return B(e);if(H(e))return q(e);if(e&&"function"==typeof e[U])return z(e);var t=f(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function K(e,t,n,r){var o=new j(e,n,r);return Q(t)(o)}var Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(D);function J(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Z(e,t))}}var Z=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new X(e,this.project,this.thisArg))},e}(),X=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return o(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(D);function ee(e,t){return new N(t?function(n){var r=new w,o=0;return r.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:B(e))}function te(e,t){if(!t)return e instanceof N?e:new N(Q(e));if(null!=e){if(function(e){return e&&"function"==typeof e[x]}(e))return function(e,t){return new N(t?function(n){var r=new w;return r.add(t.schedule(function(){var o=e[x]();r.add(o.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r}:G(e))}(e,t);if(H(e))return function(e,t){return new N(t?function(n){var r=new w;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r}:q(e))}(e,t);if(W(e))return ee(e,t);if(function(e){return e&&"function"==typeof e[U]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new N(t?function(n){var r,o=new w;return o.add(function(){r&&"function"==typeof r.return&&r.return()}),o.add(t.schedule(function(){r=e[U](),o.add(t.schedule(function(){if(!n.closed){var e,t;try{var o=r.next();e=o.value,t=o.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),o}:z(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function ne(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(ne(function(n,r){return te(e(n,r)).pipe(J(function(e,o){return t(n,e,r,o)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new re(e,n))})}var re=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new oe(e,this.project,this.concurrent))},e}(),oe=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=e.call(this,t)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return o(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){this.add(K(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Y);function ie(e){return e}function ae(){return function(e){return e.lift(new se(e))}}var se=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new ue(e,n),o=t.subscribe(r);return r.closed||(r.connection=n.connect()),o},e}(),ue=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return o(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(D),le=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return o(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new w).add(this.source.subscribe(new he(this.getSubject(),this))),e.closed?(this._connection=null,e=w.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return ae()(this)},t}(N).prototype,ce={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:le._subscribe},_isComplete:{value:le._isComplete,writable:!0},getSubject:{value:le.getSubject},connect:{value:le.connect},refCount:{value:le.refCount}},he=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return o(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(M);function de(){return new R}function fe(){return function(e){return ae()((t=de,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,ce);return r.source=e,r.subjectFactory=n,r})(e));var t}}function pe(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}var ye=function(){function e(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==t?pe({providedIn:t.providedIn||"root",factory:t.factory}):void 0}return e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(),me="__parameters__";function ge(e,t,n){var r=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e){var r=e.apply(void 0,h(t));for(var o in r)this[o]=r[o]}}}(t);function o(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof o)return r.apply(this,t),this;var i=new((e=o).bind.apply(e,h([void 0],t)));return a.annotation=i,a;function a(e,t,n){for(var r=e.hasOwnProperty(me)?e[me]:Object.defineProperty(e,me,{value:[]})[me];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(i),e}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o}Function;var ve="undefined"!=typeof window&&window,be="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,we="undefined"!=typeof global&&global||ve||be,_e=Promise.resolve(0),Ce=null;function Ee(){if(!Ce){var e=we.Symbol;if(e&&e.iterator)Ce=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ce=r)}}return Ce}function Se(e){"undefined"==typeof Zone?_e.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function Te(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function Ie(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(Ie).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function De(e){return e.__forward_ref__=De,e.toString=function(){return Ie(this())},e}function ke(e){return"function"==typeof e&&e.hasOwnProperty("__forward_ref__")&&e.__forward_ref__===De?e():e}var xe=ge("Inject",function(e){return{token:e}}),Ne=ge("Optional"),Ae=ge("Self"),Pe=ge("SkipSelf"),Oe=ge("Host"),Me="__source",Re=new Object,Le=Re,Ve=new ye("INJECTOR"),Fe=function(){function e(){}return e.prototype.get=function(e,t){if(void 0===t&&(t=Re),t===Re)throw new Error("NullInjectorError: No provider for "+Ie(e)+"!");return t},e}(),je=function(){function e(){}return e.create=function(e,t){return Array.isArray(e)?new $e(e,t):new $e(e.providers,e.parent,e.name||null)},e.THROW_IF_NOT_FOUND=Re,e.NULL=new Fe,e.ngInjectableDef=pe({providedIn:"any",factory:function(){return tt(Ve)}}),e}(),Be=function(e){return e},qe=[],Ue=Be,ze=function(){return Array.prototype.slice.call(arguments)},Ge={},We=function(e){for(var t in e)if(e[t]===Ge)return t;throw Error("!prop")}({provide:String,useValue:Ge}),He=je.NULL,Qe=/\n/gm,Ke="\u0275",$e=function(){function e(e,t,n){void 0===t&&(t=He),void 0===n&&(n=null),this.parent=t,this.source=n;var r=this._records=new Map;r.set(je,{token:je,fn:Be,deps:qe,value:this,useNew:!1}),r.set(Ve,{token:Ve,fn:Be,deps:qe,value:this,useNew:!1}),function e(t,n){if(n)if((n=ke(n))instanceof Array)for(var r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw Ze("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Ze("Unexpected provider",n);var o=ke(n.provide),i=function(e){var t=function(e){var t=qe,n=e.deps;if(n&&n.length){t=[];for(var r=0;r<n.length;r++){var o=6;if((u=ke(n[r]))instanceof Array)for(var i=0,a=u;i<a.length;i++){var s=a[i];s instanceof Ne||s==Ne?o|=1:s instanceof Pe||s==Pe?o&=-3:s instanceof Ae||s==Ae?o&=-5:u=s instanceof xe?s.token:ke(s)}t.push({token:u,options:o})}}else if(e.useExisting){var u;t=[{token:u=ke(e.useExisting),options:6}]}else if(!(n||We in e))throw Ze("'deps' required",e);return t}(e),n=Be,r=qe,o=!1,i=ke(e.provide);if(We in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)o=!0,n=ke(e.useClass);else{if("function"!=typeof i)throw Ze("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);o=!0,n=i}return{deps:t,fn:n,useNew:o,value:r}}(n);if(!0===n.multi){var a=t.get(o);if(a){if(a.fn!==ze)throw Ye(o)}else t.set(o,a={token:n.provide,deps:[],useNew:!1,fn:ze,value:qe});a.deps.push({token:o=n,options:6})}var s=t.get(o);if(s&&s.fn==ze)throw Ye(o);t.set(o,i)}}(r,e)}return e.prototype.get=function(e,t,n){void 0===n&&(n=0);var r=this._records.get(e);try{return function e(t,n,r,o,i,a){try{return function(t,n,r,o,i,a){var s,u;if(!n||4&a)2&a||(u=o.get(t,i,0));else{if((u=n.value)==Ue)throw Error(Ke+"Circular dependency");if(u===qe){n.value=Ue;var l=n.useNew,c=n.fn,d=n.deps,f=qe;if(d.length){f=[];for(var p=0;p<d.length;p++){var y=d[p],m=y.options,g=2&m?r.get(y.token):void 0;f.push(e(y.token,g,r,g||4&m?o:He,1&m?null:je.THROW_IF_NOT_FOUND,0))}}n.value=u=l?new((s=c).bind.apply(s,h([void 0],f))):c.apply(void 0,f)}}return u}(t,n,r,o,i,a)}catch(e){throw e instanceof Error||(e=new Error(e)),(e.ngTempTokenPath=e.ngTempTokenPath||[]).unshift(t),n&&n.value==Ue&&(n.value=qe),e}}(e,r,this._records,this.parent,t,n)}catch(t){var o=t.ngTempTokenPath;throw e[Me]&&o.unshift(e[Me]),t.message=Je("\n"+t.message,o,this.source),t.ngTokenPath=o,t.ngTempTokenPath=null,t}},e.prototype.toString=function(){var e=[];return this._records.forEach(function(t,n){return e.push(Ie(n))}),"StaticInjector["+e.join(", ")+"]"},e}();function Ye(e){return Ze("Cannot mix multi providers and regular providers",e)}function Je(e,t,n){void 0===n&&(n=null),e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Ke?e.substr(2):e;var r=Ie(t);if(t instanceof Array)r=t.map(Ie).join(" -> ");else if("object"==typeof t){var o=[];for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];o.push(i+":"+("string"==typeof a?JSON.stringify(a):Ie(a)))}r="{"+o.join(", ")+"}"}return"StaticInjectorError"+(n?"("+n+")":"")+"["+r+"]: "+e.replace(Qe,"\n  ")}function Ze(e,t){return new Error(Je(e,t))}var Xe=void 0;function et(e){var t=Xe;return Xe=e,t}function tt(e,t){if(void 0===t&&(t=0),void 0===Xe)throw new Error("inject() must be called from an injection context");if(null===Xe){var n=e.ngInjectableDef;if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(8&t)return null;throw new Error("Injector: NOT_FOUND ["+Ie(e)+"]")}return Xe.get(e,8&t?null:void 0,t)}function nt(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var o=void 0,i=0,a=0;a<r.length;a++){var s=r[a];s instanceof Ne||"Optional"===s.ngMetadataName?i|=8:s instanceof Pe||"SkipSelf"===s.ngMetadataName?i|=4:s instanceof Ae||"Self"===s.ngMetadataName?i|=2:o=s instanceof xe?s.token:s}t.push(tt(o,i))}else t.push(tt(r))}return t}String;var rt=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),ot=function(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},it=new ot("6.1.10"),at="ngDebugContext",st="ngOriginalError",ut="ngErrorLogger";function lt(e){return e[at]}function ct(e){return e[st]}function ht(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.error.apply(e,h(t))}var dt=function(){function e(){this._console=console}return e.prototype.handleError=function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[ut]||ht}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)},e.prototype._findContext=function(e){return e?lt(e)?lt(e):this._findContext(ct(e)):null},e.prototype._findOriginalError=function(e){for(var t=ct(e);t&&ct(t);)t=ct(t);return t},e}(),ft=new ye("The presence of this token marks an injector as being the root injector."),pt={},yt={},mt=[],gt=void 0;function vt(){return void 0===gt&&(gt=new Fe),gt}var bt=function(){function e(e,t,n){var r=this;this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this.destroyed=!1,Ct([e],function(e){return r.processInjectorType(e,new Set)}),t&&Ct(t,function(e){return r.processProvider(e)}),this.records.set(Ve,_t(void 0,this)),this.isRootInjector=this.records.has(ft),this.injectorDefTypes.forEach(function(e){return r.get(e)})}return e.prototype.destroy=function(){this.assertNotDestroyed(),this.destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},e.prototype.get=function(e,t,n){void 0===t&&(t=Le),void 0===n&&(n=0),this.assertNotDestroyed();var r,o=et(this);try{if(!(4&n)){var i=this.records.get(e);if(void 0===i){var a=("function"==typeof(r=e)||"object"==typeof r&&r instanceof ye)&&e.ngInjectableDef||void 0;void 0!==a&&this.injectableDefInScope(a)&&(i=wt(e),this.records.set(e,i))}if(void 0!==i)return this.hydrate(e,i)}return 2&n&&vt(),this.parent.get(e,t)}finally{et(o)}},e.prototype.assertNotDestroyed=function(){if(this.destroyed)throw new Error("Injector has already been destroyed.")},e.prototype.processInjectorType=function(e,t){var n=this,r=(e=ke(e)).ngInjectorDef,o=null==r&&e.ngModule||void 0,i=void 0===o?e:o,a=void 0!==o&&e.providers||mt;if(void 0!==o&&(r=o.ngInjectorDef),null!=r){if(t.has(i))throw new Error("Circular dependency: type "+Ie(i)+" ends up importing itself.");if(this.injectorDefTypes.add(i),this.records.set(i,_t(r.factory)),null!=r.imports){t.add(i);try{Ct(r.imports,function(e){return n.processInjectorType(e,t)})}finally{t.delete(i)}}null!=r.providers&&Ct(r.providers,function(e){return n.processProvider(e)}),Ct(a,function(e){return n.processProvider(e)})}},e.prototype.processProvider=function(e){var t=Et(e=ke(e))?e:ke(e.provide),n=function(e){var t=ke(e),n=pt,r=void 0;if(Et(e))return wt(e);if(t=ke(e.provide),We in e)n=e.useValue;else if(e.useExisting)r=function(){return tt(e.useExisting)};else if(e.useFactory)r=function(){return e.useFactory.apply(e,h(nt(e.deps||[])))};else{var o=e.useClass||t;if(!e.deps)return wt(o);r=function(){return new(o.bind.apply(o,h([void 0],nt(e.deps))))}}return _t(r,n)}(e);if(Et(e)||!0!==e.multi){var r=this.records.get(t);if(r&&void 0!==r.multi)throw new Error("Mixed multi-provider for "+Ie(t))}else{var o=this.records.get(t);if(o){if(void 0===o.multi)throw new Error("Mixed multi-provider for "+t+".")}else(o=_t(void 0,pt,!0)).factory=function(){return nt(o.multi)},this.records.set(t,o);t=e,o.multi.push(e)}this.records.set(t,n)},e.prototype.hydrate=function(e,t){if(t.value===yt)throw new Error("Circular dep for "+Ie(e));var n;return t.value===pt&&(t.value=yt,t.value=t.factory()),"object"==typeof t.value&&t.value&&"object"==typeof(n=t.value)&&null!=n&&n.ngOnDestroy&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value},e.prototype.injectableDefInScope=function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||"root"===e.providedIn&&this.isRootInjector:this.injectorDefTypes.has(e.providedIn))},e}();function wt(e){var t=e.ngInjectableDef;if(void 0===t){if(e instanceof ye)throw new Error("Token "+Ie(e)+" is missing an ngInjectableDef definition.");return _t(function(){return new e})}return _t(t.factory)}function _t(e,t,n){return void 0===t&&(t=pt),void 0===n&&(n=!1),{factory:e,value:t,multi:n?[]:void 0}}function Ct(e,t){e.forEach(function(e){return Array.isArray(e)?Ct(e,t):t(e)})}function Et(e){return"function"==typeof e}function St(e){return!!e&&"function"==typeof e.then}var Tt=new ye("Application Initializer"),It=function(){function e(e){var t=this;this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return e.prototype.runInitializers=function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var o=this.appInits[r]();St(o)&&t.push(o)}Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}},a([s(0,xe(Tt)),s(0,Ne())],e)}(),Dt=new ye("AppId");function kt(){return""+xt()+xt()+xt()}function xt(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Nt=new ye("Platform Initializer"),At=new ye("Platform ID"),Pt=new ye("appBootstrapListener"),Ot=function(){function e(){}return e.prototype.log=function(e){console.log(e)},e.prototype.warn=function(e){console.warn(e)},e}();function Mt(){throw new Error("Runtime compiler is not loaded")}var Rt=function(){function e(){}return e.prototype.compileModuleSync=function(e){throw Mt()},e.prototype.compileModuleAsync=function(e){throw Mt()},e.prototype.compileModuleAndAllComponentsSync=function(e){throw Mt()},e.prototype.compileModuleAndAllComponentsAsync=function(e){throw Mt()},e.prototype.clearCache=function(){},e.prototype.clearCacheFor=function(e){},e.prototype.getModuleId=function(e){},e}(),Lt=function(){},Vt=function(){},Ft=function(){};function jt(e){var t=Error("No component factory found for "+Ie(e)+". Did you add it to @NgModule.entryComponents?");return t[Ut]=e,t}var Bt,qt,Ut="ngComponent",zt=function(){function e(){}return e.prototype.resolveComponentFactory=function(e){throw jt(e)},e}(),Gt=function(){function e(){}return e.NULL=new zt,e}(),Wt=function(){function e(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(var r=0;r<e.length;r++){var o=e[r];this._factories.set(o.componentType,o)}}return e.prototype.resolveComponentFactory=function(e){var t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw jt(e);return new Ht(t,this._ngModule)},e}(),Ht=function(e){function t(t,n){var r=e.call(this)||this;return r.factory=t,r.ngModule=n,r.selector=t.selector,r.componentType=t.componentType,r.ngContentSelectors=t.ngContentSelectors,r.inputs=t.inputs,r.outputs=t.outputs,r}return o(t,e),t.prototype.create=function(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)},t}(Ft),Qt=function(){},Kt=function(){},$t=function(){var e=we.wtf;return!(!e||!(Bt=e.trace)||(qt=Bt.events,0))}();function Yt(e,t){return null}var Jt=$t?function(e,t){return void 0===t&&(t=null),qt.createScope(e,t)}:function(e,t){return Yt},Zt=$t?function(e,t){return Bt.leaveScope(e,t),t}:function(e,t){return t},Xt=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n.__isAsync=t,n}return o(t,e),t.prototype.emit=function(t){e.prototype.next.call(this,t)},t.prototype.subscribe=function(t,n,r){var o,i=function(e){return null},a=function(){return null};t&&"object"==typeof t?(o=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(i=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(o=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},n&&(i=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)}),r&&(a=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var s=e.prototype.subscribe.call(this,o,i,a);return t instanceof w&&t.add(s),s},t}(R),en=function(){function e(e){var t,n=e.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xt(!1),this.onMicrotaskEmpty=new Xt(!1),this.onStable=new Xt(!1),this.onError=new Xt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,n,r,o,i,a){try{return on(t),e.invokeTask(r,o,i,a)}finally{an(t)}},onInvoke:function(e,n,r,o,i,a,s){try{return on(t),e.invoke(r,o,i,a,s)}finally{an(t)}},onHasTask:function(e,n,r,o){e.hasTask(r,o),n===r&&("microTask"==o.change?(t.hasPendingMicrotasks=o.microTask,rn(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:function(e,n,r,o){return e.handleError(r,o),t.runOutsideAngular(function(){return t.onError.emit(o)}),!1}})}return e.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},e.assertInAngularZone=function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},e.assertNotInAngularZone=function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},e.prototype.run=function(e,t,n){return this._inner.run(e,t,n)},e.prototype.runTask=function(e,t,n,r){var o=this._inner,i=o.scheduleEventTask("NgZoneEvent: "+r,e,nn,tn,tn);try{return o.runTask(i,t,n)}finally{o.cancelTask(i)}},e.prototype.runGuarded=function(e,t,n){return this._inner.runGuarded(e,t,n)},e.prototype.runOutsideAngular=function(e){return this._outer.run(e)},e}();function tn(){}var nn={};function rn(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function on(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function an(e){e._nesting--,rn(e)}var sn,un=function(){function e(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xt,this.onMicrotaskEmpty=new Xt,this.onStable=new Xt,this.onError=new Xt}return e.prototype.run=function(e){return e()},e.prototype.runGuarded=function(e){return e()},e.prototype.runOutsideAngular=function(e){return e()},e.prototype.runTask=function(e){return e()},e}(),ln=function(){function e(e){var t=this;this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents(),e.run(function(){t.taskTrackingZone=Zone.current.get("TaskTrackingZone")})}return e.prototype._watchAngularEvents=function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){en.assertNotInAngularZone(),Se(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})},e.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},e.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},e.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},e.prototype._runCallbacksIfReady=function(){var e=this;if(this.isStable())Se(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}},e.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,isPeriodic:e.data.isPeriodic,delay:e.data.delay,creationLocation:e.creationLocation,xhr:e.data.target}}):[]},e.prototype.addCallback=function(e,t,n){var r=this,o=-1;t&&t>0&&(o=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==o}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:n})},e.prototype.whenStable=function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()},e.prototype.getPendingRequestCount=function(){return this._pendingCount},e.prototype.findProviders=function(e,t,n){return[]},e}(),cn=function(){function e(){this._applications=new Map,hn.addToWindow(this)}return e.prototype.registerApplication=function(e,t){this._applications.set(e,t)},e.prototype.unregisterApplication=function(e){this._applications.delete(e)},e.prototype.unregisterAllApplications=function(){this._applications.clear()},e.prototype.getTestability=function(e){return this._applications.get(e)||null},e.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},e.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},e.prototype.findTestabilityInTree=function(e,t){return void 0===t&&(t=!0),hn.findTestabilityInTree(this,e,t)},a([u("design:paramtypes",[])],e)}(),hn=new(function(){function e(){}return e.prototype.addToWindow=function(e){},e.prototype.findTestabilityInTree=function(e,t,n){return null},e}()),dn=!0,fn=!1,pn=new ye("AllowMultipleToken");function yn(){return fn=!0,dn}var mn=function(e,t){this.name=e,this.token=t};function gn(e,t,n){void 0===n&&(n=[]);var r="Platform: "+t,o=new ye(r);return function(t){void 0===t&&(t=[]);var i=vn();if(!i||i.injector.get(pn,!1))if(e)e(n.concat(t).concat({provide:o,useValue:!0}));else{var a=n.concat(t).concat({provide:o,useValue:!0});!function(e){if(sn&&!sn.destroyed&&!sn.injector.get(pn,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sn=e.get(bn);var t=e.get(Nt,null);t&&t.forEach(function(e){return e()})}(je.create({providers:a,name:r}))}return function(e){var t=vn();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(o)}}function vn(){return sn&&!sn.destroyed?sn:null}var bn=function(){function e(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return e.prototype.bootstrapModuleFactory=function(e,t){var n,r=this,o="noop"===(n=t?t.ngZone:void 0)?new un:("zone.js"===n?void 0:n)||new en({enableLongStackTrace:yn()}),i=[{provide:en,useValue:o}];return o.run(function(){var t=je.create({providers:i,parent:r.injector,name:e.moduleType.name}),n=e.create(t),a=n.injector.get(dt,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy(function(){return Cn(r._modules,n)}),o.runOutsideAngular(function(){return o.onError.subscribe({next:function(e){a.handleError(e)}})}),function(e,t,o){try{var i=((a=n.injector.get(It)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return St(i)?i.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):i}catch(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}var a}(a,o)})},e.prototype.bootstrapModule=function(e,t){var n=this;void 0===t&&(t=[]);var r=this.injector.get(Lt),o=wn({},t);return r.createCompiler([o]).compileModuleAsync(e).then(function(e){return n.bootstrapModuleFactory(e,o)})},e.prototype._moduleDoBootstrap=function(e){var t=e.injector.get(_n);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module "+Ie(e.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(t)}this._modules.push(e)},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e}();function wn(e,t){return Array.isArray(t)?t.reduce(wn,e):i({},e,t)}var _n=function(){function e(e,t,n,r,o,i){var a=this;this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=yn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var s=new N(function(e){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){e.next(a._stable),e.complete()})}),u=new N(function(e){var t;a._zone.runOutsideAngular(function(){t=a._zone.onStable.subscribe(function(){en.assertNotInAngularZone(),Se(function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,e.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){en.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,o=e[e.length-1];return F(o)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof o&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof N?e[0]:function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),ne(ie,e)}(n)(ee(e,r))}(s,u.pipe(fe()))}var t;return t=e,e.prototype.bootstrap=function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Ft?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var o=n instanceof Ht?null:this._injector.get(Qt),i=n.create(je.NULL,[],t||n.selector,o);i.onDestroy(function(){r._unloadComponent(i)});var a=i.injector.get(ln,null);return a&&i.injector.get(cn).registerApplication(i.location.nativeElement,a),this._loadComponent(i),yn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i},e.prototype.tick=function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var n=t._tickScope();try{this._runningTick=!0,this._views.forEach(function(e){return e.detectChanges()}),this._enforceNoNewChanges&&this._views.forEach(function(e){return e.checkNoChanges()})}catch(t){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(t)})}finally{this._runningTick=!1,Zt(n)}},e.prototype.attachView=function(e){var t=e;this._views.push(t),t.attachToAppRef(this)},e.prototype.detachView=function(e){var t=e;Cn(this._views,t),t.detachFromAppRef()},e.prototype._loadComponent=function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Pt,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})},e.prototype._unloadComponent=function(e){this.detachView(e.hostView),Cn(this.components,e)},e.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(e){return e.destroy()})},Object.defineProperty(e.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),e._tickScope=Jt("ApplicationRef#tick()"),e}();function Cn(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var En=function(){},Sn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),Tn=function(){},In=function(e){this.nativeElement=e},Dn=function(){function e(){this.dirty=!0,this._results=[],this.changes=new Xt,this.length=0}return e.prototype.map=function(e){return this._results.map(e)},e.prototype.filter=function(e){return this._results.filter(e)},e.prototype.find=function(e){return this._results.find(e)},e.prototype.reduce=function(e,t){return this._results.reduce(e,t)},e.prototype.forEach=function(e){this._results.forEach(e)},e.prototype.some=function(e){return this._results.some(e)},e.prototype.toArray=function(){return this._results.slice()},e.prototype[Ee()]=function(){return this._results[Ee()]()},e.prototype.toString=function(){return this._results.toString()},e.prototype.reset=function(e){this._results=function e(t){return t.reduce(function(t,n){var r=Array.isArray(n)?e(n):n;return t.concat(r)},[])}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}(),kn=function(){},xn=function(){},Nn=function(){},An=function(){function e(e,t,n){this._debugContext=n,this.nativeNode=e,t&&t instanceof Pn?t.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(e.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),e}(),Pn=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.properties={},o.attributes={},o.classes={},o.styles={},o.childNodes=[],o.nativeElement=t,o}return o(t,e),t.prototype.addChild=function(e){e&&(this.childNodes.push(e),e.parent=this)},t.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))},t.prototype.insertChildrenAfter=function(e,t){var n,r=this,o=this.childNodes.indexOf(e);-1!==o&&((n=this.childNodes).splice.apply(n,h([o+1,0],t)),t.forEach(function(e){e.parent&&e.parent.removeChild(e),e.parent=r}))},t.prototype.insertBefore=function(e,t){var n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))},t.prototype.query=function(e){return this.queryAll(e)[0]||null},t.prototype.queryAll=function(e){var t=[];return function e(t,n,r){t.childNodes.forEach(function(t){t instanceof Pn&&(n(t)&&r.push(t),e(t,n,r))})}(this,e,t),t},t.prototype.queryAllNodes=function(e){var t=[];return function e(t,n,r){t instanceof Pn&&t.childNodes.forEach(function(t){n(t)&&r.push(t),t instanceof Pn&&e(t,n,r)})}(this,e,t),t},Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes.filter(function(e){return e instanceof t})},enumerable:!0,configurable:!0}),t.prototype.triggerEventHandler=function(e,t){this.listeners.forEach(function(n){n.name==e&&n.callback(t)})},t}(An),On=new Map;function Mn(e){return On.get(e)||null}function Rn(e){On.set(e.nativeNode,e)}function Ln(e,t){var n=jn(e),r=jn(t);return n&&r?function(e,t,n){for(var r=e[Ee()](),o=t[Ee()]();;){var i=r.next(),a=o.next();if(i.done&&a.done)return!0;if(i.done||a.done)return!1;if(!n(i.value,a.value))return!1}}(e,t,Ln):!(n||!e||"object"!=typeof e&&"function"!=typeof e||r||!t||"object"!=typeof t&&"function"!=typeof t)||Te(e,t)}var Vn=function(){function e(e){this.wrapped=e}return e.wrap=function(t){return new e(t)},e.unwrap=function(t){return e.isWrapped(t)?t.wrapped:t},e.isWrapped=function(t){return t instanceof e},e}(),Fn=function(){function e(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}return e.prototype.isFirstChange=function(){return this.firstChange},e}();function jn(e){return!!Bn(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ee()in e)}function Bn(e){return null!==e&&("function"==typeof e||"object"==typeof e)}var qn=function(){function e(){}return e.prototype.supports=function(e){return jn(e)},e.prototype.create=function(e){return new zn(e)},e}(),Un=function(e,t){return t},zn=function(){function e(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Un}return e.prototype.forEachItem=function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)},e.prototype.forEachOperation=function(e){for(var t=this._itHead,n=this._removalsHead,r=0,o=null;t||n;){var i=!n||t&&t.currentIndex<Qn(n,r,o)?t:n,a=Qn(i,r,o),s=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(t=t._next,null==i.previousIndex)r++;else{o||(o=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<o.length?o[c]:o[c]=0,d=h+c;l<=d&&d<u&&(o[c]=h+1)}o[i.previousIndex]=l-u}}a!==s&&e(i,a,s)}},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachMovedItem=function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.forEachIdentityChange=function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)},e.prototype.diff=function(e){if(null==e&&(e=[]),!jn(e))throw new Error("Error trying to diff '"+Ie(e)+"'. Only arrays and iterables are allowed");return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n,r,o,i=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)o=this._trackByFn(s,r=e[s]),null!==i&&Te(i.trackById,o)?(a&&(i=this._verifyReinsertion(i,r,o,s)),Te(i.item,r)||this._addIdentityChange(i,r)):(i=this._mismatch(i,r,o,s),a=!0),i=i._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r=e[Ee()](),o=void 0;!(o=r.next()).done;)t(o.value)}(e,function(e){o=t._trackByFn(n,e),null!==i&&Te(i.trackById,o)?(a&&(i=t._verifyReinsertion(i,e,o,n)),Te(i.item,e)||t._addIdentityChange(i,e)):(i=t._mismatch(i,e,o,n),a=!0),i=i._next,n++}),this.length=n;return this._truncate(i),this.collection=e,this.isDirty},Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),e.prototype._reset=function(){if(this.isDirty){var e=void 0,t=void 0;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},e.prototype._mismatch=function(e,t,n,r){var o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Te(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Te(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):e=this._addAfter(new Gn(t,n),o,r),e},e.prototype._verifyReinsertion=function(e,t,n,r){var o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e},e.prototype._truncate=function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},e.prototype._reinsertAfter=function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._moveAfter=function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._addAfter=function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e},e.prototype._insertAfter=function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Hn),this._linkedRecords.put(e),e.currentIndex=n,e},e.prototype._remove=function(e){return this._addToRemovals(this._unlink(e))},e.prototype._unlink=function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e},e.prototype._addToMoves=function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)},e.prototype._addToRemovals=function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Hn),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e},e.prototype._addIdentityChange=function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e},e}(),Gn=function(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Wn=function(){function e(){this._head=null,this._tail=null}return e.prototype.add=function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)},e.prototype.get=function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Te(n.trackById,e))return n;return null},e.prototype.remove=function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head},e}(),Hn=function(){function e(){this.map=new Map}return e.prototype.put=function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Wn,this.map.set(t,n)),n.add(e)},e.prototype.get=function(e,t){var n=this.map.get(e);return n?n.get(e,t):null},e.prototype.remove=function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.map.clear()},e}();function Qn(e,t,n){var r=e.previousIndex;if(null===r)return r;var o=0;return n&&r<n.length&&(o=n[r]),r+t+o}var Kn=function(){function e(){}return e.prototype.supports=function(e){return e instanceof Map||Bn(e)},e.prototype.create=function(){return new $n},e}(),$n=function(){function e(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),e.prototype.forEachItem=function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachChangedItem=function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.diff=function(e){if(e){if(!(e instanceof Map||Bn(e)))throw new Error("Error trying to diff '"+Ie(e)+"'. Only maps and objects are allowed")}else e=new Map;return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var o=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},e.prototype._insertBeforeOrAppend=function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null},e.prototype._getOrCreateRecordForKey=function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,o=n._next;return r&&(r._next=o),o&&(o._prev=r),n._next=null,n._prev=null,n}var i=new Yn(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i},e.prototype._reset=function(){if(this.isDirty){var e=void 0;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},e.prototype._maybeAddToChanges=function(e,t){Te(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))},e.prototype._addToAdditions=function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)},e.prototype._addToChanges=function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)},e.prototype._forEach=function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})},e}(),Yn=function(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Jn=function(){function e(e){this.factories=e}return e.create=function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new Pe,new Ne]]}},e.prototype.find=function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'")},e.ngInjectableDef=pe({providedIn:"root",factory:function(){return new e([new qn])}}),e}(),Zn=function(){function e(e){this.factories=e}return e.create=function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new Pe,new Ne]]}},e.prototype.find=function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '"+e+"'")},e}(),Xn=[new Kn],er=new Jn([new qn]),tr=new Zn(Xn),nr=gn(null,"core",[{provide:At,useValue:"unknown"},{provide:bn,deps:[je]},{provide:cn,deps:[]},{provide:Ot,deps:[]}]),rr=new ye("LocaleId");function or(){return er}function ir(){return tr}function ar(e){return e||"en-US"}var sr=function(e){},ur=function(){function e(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return e.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);var n=t.response.body;return n.removeChild(n.firstChild),n},e.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},e.prototype.getInertBodyElement_InertDocument=function(e){var t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},e.prototype.stripCustomNsAttrs=function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var o=e.firstChild;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling},e}(),lr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,cr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function hr(e){return(e=String(e)).match(lr)||e.match(cr)?e:(yn()&&console.warn("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function dr(e){var t,n,r={};try{for(var o=l(e.split(",")),i=o.next();!i.done;i=o.next())r[i.value]=!0}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function fr(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o={};try{for(var i=l(n),a=i.next();!a.done;a=i.next()){var s=a.value;for(var u in s)s.hasOwnProperty(u)&&(o[u]=!0)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o}var pr,yr=dr("area,br,col,hr,img,wbr"),mr=dr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gr=dr("rp,rt"),vr=fr(gr,mr),br=fr(yr,fr(mr,dr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fr(gr,dr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vr),wr=dr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_r=dr("srcset"),Cr=fr(wr,_r,dr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width")),Er=function(){function e(){this.sanitizedSomething=!1,this.buf=[]}return e.prototype.sanitizeChildren=function(e){for(var t=e.firstChild;t;)if(t.nodeType===Node.ELEMENT_NODE?this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var n=this.checkClobberedElement(t,t.nextSibling);if(n){t=n;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")},e.prototype.startElement=function(e){var t=e.nodeName.toLowerCase();if(br.hasOwnProperty(t)){this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,o=0;o<r.length;o++){var i=r.item(o),a=i.name,s=a.toLowerCase();if(Cr.hasOwnProperty(s)){var u=i.value;wr[s]&&(u=hr(u)),_r[s]&&(n=u,u=(n=String(n)).split(",").map(function(e){return hr(e.trim())}).join(", ")),this.buf.push(" ",a,'="',Ir(u),'"')}else this.sanitizedSomething=!0}this.buf.push(">")}else this.sanitizedSomething=!0},e.prototype.endElement=function(e){var t=e.nodeName.toLowerCase();br.hasOwnProperty(t)&&!yr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))},e.prototype.chars=function(e){this.buf.push(Ir(e))},e.prototype.checkClobberedElement=function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t},e}(),Sr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Tr=/([^\#-~ |!])/g;function Ir(e){return e.replace(/&/g,"&amp;").replace(Sr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Tr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Dr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var kr=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),xr=/^url\(([^)]+)\)$/,Nr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({}),Ar=function(){};function Pr(e,t,n){var r=e.state,o=1792&r;return o===t?(e.state=-1793&r|n,e.initIndex=-1,!0):o===n}function Or(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function Mr(e,t){return e.nodes[t]}function Rr(e,t){return e.nodes[t]}function Lr(e,t){return e.nodes[t]}function Vr(e,t){return e.nodes[t]}function Fr(e,t){return e.nodes[t]}var jr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function Br(e,t,n,r){var o="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+t+"'. Current value: '"+n+"'.";return r&&(o+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){var n=new Error(e);return qr(n,t),n}(o,e)}function qr(e,t){e[at]=t,e[ut]=t.logError.bind(t)}function Ur(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}var zr=function(){},Gr=new Map;function Wr(e){var t=Gr.get(e);return t||(t=Ie(e)+"_"+Gr.size,Gr.set(e,t)),t}var Hr="$$undefined",Qr="$$empty";function Kr(e){return{id:Hr,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var $r=0;function Yr(e,t,n,r){return!(!(2&e.state)&&Te(e.oldValues[t.bindingIndex+n],r))}function Jr(e,t,n,r){return!!Yr(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function Zr(e,t,n,r){var o=e.oldValues[t.bindingIndex+n];if(1&e.state||!Ln(o,r)){var i=t.bindings[n].name;throw Br(jr.createDebugContext(e,t.nodeIndex),i+": "+o,i+": "+r,0!=(1&e.state))}}function Xr(e){for(var t=e;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function eo(e,t){for(var n=e;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function to(e,t,n,r){try{return Xr(33554432&e.def.nodes[t].flags?Rr(e,t).componentView:e),jr.handleEvent(e,t,n,r)}catch(t){e.root.errorHandler.handleError(t)}}function no(e){return e.parent?Rr(e.parent,e.parentNodeDef.nodeIndex):null}function ro(e){return e.parent?e.parentNodeDef.parent:null}function oo(e,t){switch(201347067&t.flags){case 1:return Rr(e,t.nodeIndex).renderElement;case 2:return Mr(e,t.nodeIndex).renderText}}function io(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function ao(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function so(e){var t={},n=0,r={};return e&&e.forEach(function(e){var o=c(e,2),i=o[0],a=o[1];"number"==typeof i?(t[i]=a,n|=function(e){return 1<<e%32}(i)):r[i]=a}),{matchedQueries:t,references:r,matchedQueryIds:n}}function uo(e,t){return e.map(function(e){var n,r,o;return Array.isArray(e)?(o=(n=c(e,2))[0],r=n[1]):(o=0,r=e),r&&("function"==typeof r||"object"==typeof r)&&t&&Object.defineProperty(r,Me,{value:t,configurable:!0}),{flags:o,token:r,tokenKey:Wr(r)}})}function lo(e,t,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===rt.Native?Rr(e,n.renderParent.nodeIndex).renderElement:void 0:t}var co=new WeakMap;function ho(e){var t=co.get(e);return t||((t=e(function(){return zr})).factory=e,co.set(e,t)),t}function fo(e,t,n,r,o){3===t&&(n=e.renderer.parentNode(oo(e,e.def.lastRenderRootNode))),po(e,t,0,e.def.nodes.length-1,n,r,o)}function po(e,t,n,r,o,i,a){for(var s=n;s<=r;s++){var u=e.def.nodes[s];11&u.flags&&mo(e,u,t,o,i,a),s+=u.childCount}}function yo(e,t,n,r,o,i){for(var a=e;a&&!io(a);)a=a.parent;for(var s=a.parent,u=ro(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var h=s.def.nodes[c];h.ngContentIndex===t&&mo(s,h,n,r,o,i),c+=h.childCount}if(!s.parent){var d=e.root.projectableNodes[t];if(d)for(c=0;c<d.length;c++)go(e,d[c],n,r,o,i)}}function mo(e,t,n,r,o,i){if(8&t.flags)yo(e,t.ngContent.index,n,r,o,i);else{var a=oo(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&go(e,a,n,r,o,i),32&t.bindingFlags&&go(Rr(e,t.nodeIndex).componentView,a,n,r,o,i)):go(e,a,n,r,o,i),16777216&t.flags)for(var s=Rr(e,t.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)fo(s[u],n,r,o,i);1&t.flags&&!t.element.name&&po(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,o,i)}}function go(e,t,n,r,o,i){var a=e.renderer;switch(n){case 1:a.appendChild(r,t);break;case 2:a.insertBefore(r,t,o);break;case 3:a.removeChild(r,t);break;case 0:i.push(t)}}var vo=/^:([^:]+):(.+)$/;function bo(e){if(":"===e[0]){var t=e.match(vo);return[t[1],t[2]]}return["",e]}function wo(e){for(var t=0,n=0;n<e.length;n++)t|=e[n].flags;return t}function _o(e,t,n,r,o,i,a,s,u,l,c,h,d,f,p,y,m,g,v,b){switch(e){case 1:return t+Co(n)+r;case 2:return t+Co(n)+r+Co(o)+i;case 3:return t+Co(n)+r+Co(o)+i+Co(a)+s;case 4:return t+Co(n)+r+Co(o)+i+Co(a)+s+Co(u)+l;case 5:return t+Co(n)+r+Co(o)+i+Co(a)+s+Co(u)+l+Co(c)+h;case 6:return t+Co(n)+r+Co(o)+i+Co(a)+s+Co(u)+l+Co(c)+h+Co(d)+f;case 7:return t+Co(n)+r+Co(o)+i+Co(a)+s+Co(u)+l+Co(c)+h+Co(d)+f+Co(p)+y;case 8:return t+Co(n)+r+Co(o)+i+Co(a)+s+Co(u)+l+Co(c)+h+Co(d)+f+Co(p)+y+Co(m)+g;case 9:return t+Co(n)+r+Co(o)+i+Co(a)+s+Co(u)+l+Co(c)+h+Co(d)+f+Co(p)+y+Co(m)+g+Co(v)+b;default:throw new Error("Does not support more than 9 expressions")}}function Co(e){return null!=e?e.toString():""}function Eo(e,t,n,r,o,i){e|=1;var a=so(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:i?ho(i):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:o||zr},provider:null,text:null,query:null,ngContent:null}}function So(e,t,n,r,o,i,a,s,u,l,h,d){var f;void 0===a&&(a=[]),l||(l=zr);var p=so(n),y=p.matchedQueries,m=p.references,g=p.matchedQueryIds,v=null,b=null;i&&(v=(f=c(bo(i),2))[0],b=f[1]),s=s||[];for(var w=new Array(s.length),_=0;_<s.length;_++){var C=c(s[_],3),E=C[0],S=C[2],T=c(bo(C[1]),2),I=T[0],D=T[1],k=void 0,x=void 0;switch(15&E){case 4:x=S;break;case 1:case 8:k=S}w[_]={flags:E,ns:I,name:D,nonMinifiedName:D,securityContext:k,suffix:x}}u=u||[];var N=new Array(u.length);for(_=0;_<u.length;_++){var A=c(u[_],2);N[_]={type:0,target:A[0],eventName:A[1],propName:null}}var P=(a=a||[]).map(function(e){var t=c(e,2),n=t[1],r=c(bo(t[0]),2);return[r[0],r[1],n]});return d=function(e){if(e&&e.id===Hr){var t=null!=e.encapsulation&&e.encapsulation!==rt.None||e.styles.length||Object.keys(e.data).length;e.id=t?"c"+$r++:Qr}return e&&e.id===Qr&&(e=null),e||null}(d),h&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:y,matchedQueryIds:g,references:m,ngContentIndex:r,childCount:o,bindings:w,bindingFlags:wo(w),outputs:N,element:{ns:v,name:b,attrs:P,template:null,componentProvider:null,componentView:h||null,componentRendererType:d,publicProviders:null,allProviders:null,handleEvent:l||zr},provider:null,text:null,query:null,ngContent:null}}function To(e,t,n){var r,o=n.element,i=e.root.selectorOrNode,a=e.renderer;if(e.parent||!i){r=o.name?a.createElement(o.name,o.ns):a.createComment("");var s=lo(e,t,n);s&&a.appendChild(s,r)}else r=a.selectRootElement(i);if(o.attrs)for(var u=0;u<o.attrs.length;u++){var l=c(o.attrs[u],3);a.setAttribute(r,l[1],l[2],l[0])}return r}function Io(e,t,n,r){for(var o=0;o<n.outputs.length;o++){var i=n.outputs[o],a=Do(e,n.nodeIndex,(h=i.eventName,(c=i.target)?c+":"+h:h)),s=i.target,u=e;"component"===i.target&&(s=null,u=t);var l=u.renderer.listen(s||r,i.eventName,a);e.disposables[n.outputIndex+o]=l}var c,h}function Do(e,t,n){return function(r){return to(e,t,n,r)}}function ko(e,t,n,r){if(!Jr(e,t,n,r))return!1;var o=t.bindings[n],i=Rr(e,t.nodeIndex),a=i.renderElement,s=o.name;switch(15&o.flags){case 1:!function(e,t,n,r,o,i){var a=t.securityContext,s=a?e.root.sanitizer.sanitize(a,i):i;s=null!=s?s.toString():null;var u=e.renderer;null!=i?u.setAttribute(n,o,s,r):u.removeAttribute(n,o,r)}(e,o,a,o.ns,s,r);break;case 2:!function(e,t,n,r){var o=e.renderer;r?o.addClass(t,n):o.removeClass(t,n)}(e,a,s,r);break;case 4:!function(e,t,n,r,o){var i=e.root.sanitizer.sanitize(Nr.STYLE,o);if(null!=i){i=i.toString();var a=t.suffix;null!=a&&(i+=a)}else i=null;var s=e.renderer;null!=i?s.setStyle(n,r,i):s.removeStyle(n,r)}(e,o,a,s,r);break;case 8:!function(e,t,n,r,o){var i=t.securityContext,a=i?e.root.sanitizer.sanitize(i,o):o;e.renderer.setProperty(n,r,a)}(33554432&t.flags&&32&o.flags?i.componentView:e,o,a,s,r)}return!0}var xo=new Object,No=Wr(je),Ao=Wr(Ve),Po=Wr(Qt);function Oo(e,t,n,r){return n=ke(n),{index:-1,deps:uo(r,Ie(t)),flags:e,token:t,value:n}}function Mo(e,t,n){void 0===n&&(n=je.THROW_IF_NOT_FOUND);var r,o,i=et(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);var a=t.tokenKey;switch(a){case No:case Ao:case Po:return e}var s=e._def.providersByKey[a];if(s){var u=e._providers[s.index];return void 0===u&&(u=e._providers[s.index]=Ro(e,s)),u===xo?void 0:u}if(t.token.ngInjectableDef&&(r=e,null!=(o=t.token.ngInjectableDef).providedIn&&(function(e,t){return e._def.modules.indexOf(o.providedIn)>-1}(r)||"root"===o.providedIn&&r._def.isRoot))){var l=e._providers.length;return e._def.providersByKey[t.tokenKey]={flags:5120,value:t.token.ngInjectableDef.factory,deps:[],index:l,token:t.token},e._providers[l]=xo,e._providers[l]=Ro(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{et(i)}}function Ro(e,t){var n;switch(201347067&t.flags){case 512:n=function(e,t,n){var r=n.length;switch(r){case 0:return new t;case 1:return new t(Mo(e,n[0]));case 2:return new t(Mo(e,n[0]),Mo(e,n[1]));case 3:return new t(Mo(e,n[0]),Mo(e,n[1]),Mo(e,n[2]));default:for(var o=new Array(r),i=0;i<r;i++)o[i]=Mo(e,n[i]);return new(t.bind.apply(t,h([void 0],o)))}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){var r=n.length;switch(r){case 0:return t();case 1:return t(Mo(e,n[0]));case 2:return t(Mo(e,n[0]),Mo(e,n[1]));case 3:return t(Mo(e,n[0]),Mo(e,n[1]),Mo(e,n[2]));default:for(var o=Array(r),i=0;i<r;i++)o[i]=Mo(e,n[i]);return t.apply(void 0,h(o))}}(e,t.value,t.deps);break;case 2048:n=Mo(e,t.deps[0]);break;case 256:n=t.value}return n===xo||null==n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?xo:n}function Lo(e,t){var n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;var r=n[t];return r.viewContainerParent=null,Bo(n,t),jr.dirtyParentQueries(r),Fo(r),r}function Vo(e,t,n){var r=t?oo(t,t.def.lastRenderRootNode):e.renderElement;fo(n,2,n.renderer.parentNode(r),n.renderer.nextSibling(r),void 0)}function Fo(e){fo(e,3,null,null,void 0)}function jo(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Bo(e,t){t>=e.length-1?e.pop():e.splice(t,1)}var qo=new Object;function Uo(e,t,n,r,o,i){return new zo(e,t,n,r,o,i)}var zo=function(e){function t(t,n,r,o,i,a){var s=e.call(this)||this;return s.selector=t,s.componentType=n,s._inputs=o,s._outputs=i,s.ngContentSelectors=a,s.viewDefFactory=r,s}return o(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){var e=[],t=this._inputs;for(var n in t)e.push({propName:n,templateName:t[n]});return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){var e=[];for(var t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,r){if(!r)throw new Error("ngModule should be provided");var o=ho(this.viewDefFactory),i=o.nodes[0].element.componentProvider.nodeIndex,a=jr.createRootView(e,t||[],n,o,r,qo),s=Lr(a,i).instance;return n&&a.renderer.setAttribute(Rr(a,0).renderElement,"ng-version",it.full),new Go(a,new Ko(a),s)},t}(Ft),Go=function(e){function t(t,n,r){var o=e.call(this)||this;return o._view=t,o._viewRef=n,o._component=r,o._elDef=o._view.def.nodes[0],o.hostView=n,o.changeDetectorRef=n,o.instance=r,o}return o(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return new In(Rr(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new Zo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._viewRef.destroy()},t.prototype.onDestroy=function(e){this._viewRef.onDestroy(e)},t}(Vt);function Wo(e,t,n){return new Ho(e,t,n)}var Ho=function(){function e(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}return Object.defineProperty(e.prototype,"element",{get:function(){return new In(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new Zo(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentInjector",{get:function(){for(var e=this._view,t=this._elDef.parent;!t&&e;)t=ro(e),e=e.parent;return e?new Zo(e,t):new Zo(this._view,null)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var t=Lo(this._data,e);jr.destroyView(t)}},e.prototype.get=function(e){var t=this._embeddedViews[e];if(t){var n=new Ko(t);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(e.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),e.prototype.createEmbeddedView=function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r},e.prototype.createComponent=function(e,t,n,r,o){var i=n||this.parentInjector;o||e instanceof Ht||(o=i.get(Qt));var a=e.create(i,r,void 0,o);return this.insert(a.hostView,t),a},e.prototype.insert=function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,o,i,a=e;return o=a._view,i=(n=this._data).viewContainer._embeddedViews,null!==(r=t)&&void 0!==r||(r=i.length),o.viewContainerParent=this._view,jo(i,r,o),function(e,t){var n=no(t);if(n&&n!==e&&!(16&t.state)){t.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,n){if(!(4&n.flags)){t.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,t.parentNodeDef)}}(n,o),jr.dirtyParentQueries(o),Vo(n,r>0?i[r-1]:null,o),a.attachToViewContainerRef(this),e},e.prototype.move=function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,o,i,a,s=this._embeddedViews.indexOf(e._view);return o=t,a=(i=(n=this._data).viewContainer._embeddedViews)[r=s],Bo(i,r),null==o&&(o=i.length),jo(i,o,a),jr.dirtyParentQueries(a),Fo(a),Vo(n,o>0?i[o-1]:null,a),e},e.prototype.indexOf=function(e){return this._embeddedViews.indexOf(e._view)},e.prototype.remove=function(e){var t=Lo(this._data,e);t&&jr.destroyView(t)},e.prototype.detach=function(e){var t=Lo(this._data,e);return t?new Ko(t):null},e}();function Qo(e){return new Ko(e)}var Ko=function(){function e(e){this._view=e,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return fo(this._view,0,void 0,void 0,e=[]),e;var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),e.prototype.markForCheck=function(){Xr(this._view)},e.prototype.detach=function(){this._view.state&=-5},e.prototype.detectChanges=function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{jr.checkAndUpdateView(this._view)}finally{e.end&&e.end()}},e.prototype.checkNoChanges=function(){jr.checkNoChangesView(this._view)},e.prototype.reattach=function(){this._view.state|=4},e.prototype.onDestroy=function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)},e.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),jr.destroyView(this._view)},e.prototype.detachFromAppRef=function(){this._appRef=null,Fo(this._view),jr.dirtyParentQueries(this._view)},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e}();function $o(e,t){return new Yo(e,t)}var Yo=function(e){function t(t,n){var r=e.call(this)||this;return r._parentView=t,r._def=n,r}return o(t,e),t.prototype.createEmbeddedView=function(e){return new Ko(jr.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))},Object.defineProperty(t.prototype,"elementRef",{get:function(){return new In(Rr(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),t}(kn);function Jo(e,t){return new Zo(e,t)}var Zo=function(){function e(e,t){this.view=e,this.elDef=t}return e.prototype.get=function(e,t){return void 0===t&&(t=je.THROW_IF_NOT_FOUND),jr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Wr(e)},t)},e}();function Xo(e,t){var n=e.def.nodes[t];if(1&n.flags){var r=Rr(e,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return Mr(e,n.nodeIndex).renderText;if(20240&n.flags)return Lr(e,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+t)}function ei(e){return new ti(e.renderer)}var ti=function(){function e(e){this.delegate=e}return e.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},e.prototype.createElement=function(e,t){var n=c(bo(t),2),r=this.delegate.createElement(n[1],n[0]);return e&&this.delegate.appendChild(e,r),r},e.prototype.createViewRoot=function(e){return e},e.prototype.createTemplateAnchor=function(e){var t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t},e.prototype.createText=function(e,t){var n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n},e.prototype.projectNodes=function(e,t){for(var n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])},e.prototype.attachViewAfter=function(e,t){for(var n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e),o=0;o<t.length;o++)this.delegate.insertBefore(n,t[o],r)},e.prototype.detachView=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},e.prototype.destroyView=function(e,t){for(var n=0;n<t.length;n++)this.delegate.destroyNode(t[n])},e.prototype.listen=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.listenGlobal=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.setElementProperty=function(e,t,n){this.delegate.setProperty(e,t,n)},e.prototype.setElementAttribute=function(e,t,n){var r=c(bo(t),2),o=r[0],i=r[1];null!=n?this.delegate.setAttribute(e,i,n,o):this.delegate.removeAttribute(e,i,o)},e.prototype.setBindingDebugInfo=function(e,t,n){},e.prototype.setElementClass=function(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)},e.prototype.setElementStyle=function(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)},e.prototype.invokeElementMethod=function(e,t,n){e[t].apply(e,n)},e.prototype.setText=function(e,t){this.delegate.setValue(e,t)},e.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},e}();function ni(e,t,n,r){return new ri(e,t,n,r)}var ri=function(){function e(e,t,n,r){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var t=e._def,n=e._providers=new Array(t.providers.length),r=0;r<t.providers.length;r++){var o=t.providers[r];4096&o.flags||void 0===n[r]&&(n[r]=Ro(e,o))}}(this)}return e.prototype.get=function(e,t,n){void 0===t&&(t=je.THROW_IF_NOT_FOUND),void 0===n&&(n=0);var r=0;return 4&n?r|=1:2&n&&(r|=4),Mo(this,{token:e,tokenKey:Wr(e),flags:r},t)},Object.defineProperty(e.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentFactoryResolver",{get:function(){return this.get(Gt)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+Ie(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(e,t){for(var n=e._def,r=new Set,o=0;o<n.providers.length;o++)if(131072&n.providers[o].flags){var i=e._providers[o];if(i&&i!==xo){var a=i.ngOnDestroy;"function"!=typeof a||r.has(i)||(a.apply(i),r.add(i))}}}(this),this._destroyListeners.forEach(function(e){return e()})},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},e}(),oi=Wr(function(){}),ii=Wr(Tn),ai=Wr(In),si=Wr(xn),ui=Wr(kn),li=Wr(Nn),ci=Wr(je),hi=Wr(Ve);function di(e,t,n,r,o,i,a,s){var u=[];if(a)for(var l in a){var h=c(a[l],2);u[h[0]]={flags:8,name:l,nonMinifiedName:h[1],ns:null,securityContext:null,suffix:null}}var d=[];if(s)for(var f in s)d.push({type:1,propName:f,target:null,eventName:s[f]});return pi(e,t|=16384,n,r,o,o,i,u,d)}function fi(e,t,n,r,o){return pi(-1,e,t,0,n,r,o)}function pi(e,t,n,r,o,i,a,s,u){var l=so(n),c=l.matchedQueries,h=l.references,d=l.matchedQueryIds;u||(u=[]),s||(s=[]),i=ke(i);var f=uo(a,Ie(o));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:d,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:wo(s),outputs:u,element:null,provider:{token:o,value:i,deps:f},text:null,query:null,ngContent:null}}function yi(e,t){return bi(e,t)}function mi(e,t){for(var n=e;n.parent&&!io(n);)n=n.parent;return wi(n.parent,ro(n),!0,t.provider.value,t.provider.deps)}function gi(e,t){var n=wi(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(var r=0;r<t.outputs.length;r++){var o=t.outputs[r],i=n[o.propName].subscribe(vi(e,t.parent.nodeIndex,o.eventName));e.disposables[t.outputIndex+r]=i.unsubscribe.bind(i)}return n}function vi(e,t,n){return function(r){return to(e,t,n,r)}}function bi(e,t){var n=(8192&t.flags)>0,r=t.provider;switch(201347067&t.flags){case 512:return wi(e,t.parent,n,r.value,r.deps);case 1024:return function(e,t,n,r,o){var i=o.length;switch(i){case 0:return r();case 1:return r(Ci(e,t,n,o[0]));case 2:return r(Ci(e,t,n,o[0]),Ci(e,t,n,o[1]));case 3:return r(Ci(e,t,n,o[0]),Ci(e,t,n,o[1]),Ci(e,t,n,o[2]));default:for(var a=Array(i),s=0;s<i;s++)a[s]=Ci(e,t,n,o[s]);return r.apply(void 0,h(a))}}(e,t.parent,n,r.value,r.deps);case 2048:return Ci(e,t.parent,n,r.deps[0]);case 256:return r.value}}function wi(e,t,n,r,o){var i=o.length;switch(i){case 0:return new r;case 1:return new r(Ci(e,t,n,o[0]));case 2:return new r(Ci(e,t,n,o[0]),Ci(e,t,n,o[1]));case 3:return new r(Ci(e,t,n,o[0]),Ci(e,t,n,o[1]),Ci(e,t,n,o[2]));default:for(var a=new Array(i),s=0;s<i;s++)a[s]=Ci(e,t,n,o[s]);return new(r.bind.apply(r,h([void 0],a)))}}var _i={};function Ci(e,t,n,r,o){if(void 0===o&&(o=je.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var i=e;2&r.flags&&(o=null);var a=r.tokenKey;a===li&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);for(var s=e;s;){if(t)switch(a){case oi:return ei(Ei(s,t,n));case ii:return Ei(s,t,n).renderer;case ai:return new In(Rr(s,t.nodeIndex).renderElement);case si:return Rr(s,t.nodeIndex).viewContainer;case ui:if(t.element.template)return Rr(s,t.nodeIndex).template;break;case li:return Qo(Ei(s,t,n));case ci:case hi:return Jo(s,t);default:var u=(n?t.element.allProviders:t.element.publicProviders)[a];if(u){var l=Lr(s,u.nodeIndex);return l||(l={instance:bi(s,u)},s.nodes[u.nodeIndex]=l),l.instance}}n=io(s),t=ro(s),s=s.parent,4&r.flags&&(s=null)}var c=i.root.injector.get(r.token,_i);return c!==_i||o===_i?c:i.root.ngModule.injector.get(r.token,o)}function Ei(e,t,n){var r;if(n)r=Rr(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!io(r);)r=r.parent;return r}function Si(e,t,n,r,o,i){if(32768&n.flags){var a=Rr(e,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(t.instance[n.bindings[r].name]=o,524288&n.flags){i=i||{};var s=Vn.unwrap(e.oldValues[n.bindingIndex+r]);i[n.bindings[r].nonMinifiedName]=new Fn(s,o,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=o,i}function Ti(e,t){if(e.def.nodeFlags&t)for(var n=e.def.nodes,r=0,o=0;o<n.length;o++){var i=n[o],a=i.parent;for(!a&&i.flags&t&&Di(e,o,i.flags&t,r++),0==(i.childFlags&t)&&(o+=i.childCount);a&&1&a.flags&&o===a.nodeIndex+a.childCount;)a.directChildFlags&t&&(r=Ii(e,a,t,r)),a=a.parent}}function Ii(e,t,n,r){for(var o=t.nodeIndex+1;o<=t.nodeIndex+t.childCount;o++){var i=e.def.nodes[o];i.flags&n&&Di(e,o,i.flags&n,r++),o+=i.childCount}return r}function Di(e,t,n,r){var o=Lr(e,t);if(o){var i=o.instance;i&&(jr.setCurrentNode(e,t),1048576&n&&Or(e,512,r)&&i.ngAfterContentInit(),2097152&n&&i.ngAfterContentChecked(),4194304&n&&Or(e,768,r)&&i.ngAfterViewInit(),8388608&n&&i.ngAfterViewChecked(),131072&n&&i.ngOnDestroy())}}function ki(e){for(var t=e.def.nodeMatchedQueries;e.parent&&ao(e);){var n=e.parentNodeDef;e=e.parent;for(var r=n.nodeIndex+n.childCount,o=0;o<=r;o++)67108864&(i=e.def.nodes[o]).flags&&536870912&i.flags&&(i.query.filterId&t)===i.query.filterId&&Fr(e,o).setDirty(),!(1&i.flags&&o+i.childCount<n.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(o+=i.childCount)}if(134217728&e.def.nodeFlags)for(o=0;o<e.def.nodes.length;o++){var i;134217728&(i=e.def.nodes[o]).flags&&536870912&i.flags&&Fr(e,o).setDirty(),o+=i.childCount}}function xi(e,t){var n=Fr(e,t.nodeIndex);if(n.dirty){var r,o=void 0;if(67108864&t.flags){var i=t.parent.parent;o=Ni(e,i.nodeIndex,i.nodeIndex+i.childCount,t.query,[]),r=Lr(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(o=Ni(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(o);for(var a=t.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function Ni(e,t,n,r,o){for(var i=t;i<=n;i++){var a=e.def.nodes[i],s=a.matchedQueries[r.id];if(null!=s&&o.push(Ai(e,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=Rr(e,i);if((a.childMatchedQueries&r.filterId)===r.filterId&&(Ni(e,i+1,i+a.childCount,r,o),i+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var h=l[c],d=no(h);d&&d===u&&Ni(h,0,h.def.nodes.length-1,r,o)}var f=u.template._projectedViews;if(f)for(c=0;c<f.length;c++){var p=f[c];Ni(p,0,p.def.nodes.length-1,r,o)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(i+=a.childCount)}return o}function Ai(e,t,n){if(null!=n)switch(n){case 1:return Rr(e,t.nodeIndex).renderElement;case 0:return new In(Rr(e,t.nodeIndex).renderElement);case 2:return Rr(e,t.nodeIndex).template;case 3:return Rr(e,t.nodeIndex).viewContainer;case 4:return Lr(e,t.nodeIndex).instance}}function Pi(e,t){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:t}}}function Oi(e,t,n){var r=lo(e,t,n);r&&yo(e,n.ngContent.index,1,r,null,void 0)}function Mi(e,t,n){for(var r=new Array(n.length-1),o=1;o<n.length;o++)r[o-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[o]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function Ri(e,t,n){var r,o=e.renderer;r=o.createText(n.text.prefix);var i=lo(e,t,n);return i&&o.appendChild(i,r),{renderText:r}}function Li(e,t){return(null!=e?e.toString():"")+t.suffix}function Vi(e,t,n,r){for(var o=0,i=0,a=0,s=0,u=0,l=null,c=null,h=!1,d=!1,f=null,p=0;p<t.length;p++){var y=t[p];if(y.nodeIndex=p,y.parent=l,y.bindingIndex=o,y.outputIndex=i,y.renderParent=c,a|=y.flags,u|=y.matchedQueryIds,y.element){var m=y.element;m.publicProviders=l?l.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,h=!1,d=!1,y.element.template&&(u|=y.element.template.nodeMatchedQueries)}if(ji(l,y,t.length),o+=y.bindings.length,i+=y.outputs.length,!c&&3&y.flags&&(f=y),20224&y.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var g=0!=(32768&y.flags);0==(8192&y.flags)||g?l.element.publicProviders[Wr(y.provider.token)]=y:(d||(d=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Wr(y.provider.token)]=y),g&&(l.element.componentProvider=y)}if(l?(l.childFlags|=y.flags,l.directChildFlags|=y.flags,l.childMatchedQueries|=y.matchedQueryIds,y.element&&y.element.template&&(l.childMatchedQueries|=y.element.template.nodeMatchedQueries)):s|=y.flags,y.childCount>0)l=y,Fi(y)||(c=y);else for(;l&&p===l.nodeIndex+l.childCount;){var v=l.parent;v&&(v.childFlags|=l.childFlags,v.childMatchedQueries|=l.childMatchedQueries),c=(l=v)&&Fi(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||zr,updateRenderer:r||zr,handleEvent:function(e,n,r,o){return t[n].element.handleEvent(e,r,o)},bindingCount:o,outputCount:i,lastRenderRootNode:f}}function Fi(e){return 0!=(1&e.flags)&&null===e.element.name}function ji(e,t,n){var r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+t.nodeIndex+"!")}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+t.nodeIndex+"!");if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+t.nodeIndex+"!");if(134217728&t.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+t.nodeIndex+"!")}if(t.childCount){var o=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=o&&t.nodeIndex+t.childCount>o)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+t.nodeIndex+"!")}}function Bi(e,t,n,r){var o=zi(e.root,e.renderer,e,t,n);return Gi(o,e.component,r),Wi(o),o}function qi(e,t,n){var r=zi(e,e.renderer,null,null,t);return Gi(r,n,n),Wi(r),r}function Ui(e,t,n,r){var o,i=t.element.componentRendererType;return o=i?e.root.rendererFactory.createRenderer(r,i):e.root.renderer,zi(e.root,o,e,t.element.componentProvider,n)}function zi(e,t,n,r,o){var i=new Array(o.nodes.length),a=o.outputCount?new Array(o.outputCount):null;return{def:o,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:i,state:13,root:e,renderer:t,oldValues:new Array(o.bindingCount),disposables:a,initIndex:-1}}function Gi(e,t,n){e.component=t,e.context=n}function Wi(e){var t;io(e)&&(t=Rr(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var n=e.def,r=e.nodes,o=0;o<n.nodes.length;o++){var i=n.nodes[o];jr.setCurrentNode(e,o);var a=void 0;switch(201347067&i.flags){case 1:var s=To(e,t,i),u=void 0;if(33554432&i.flags){var l=ho(i.element.componentView);u=jr.createComponentView(e,i,l,s)}Io(e,u,i,s),a={renderElement:s,componentView:u,viewContainer:null,template:i.element.template?$o(e,i):void 0},16777216&i.flags&&(a.viewContainer=Wo(e,i,a));break;case 2:a=Ri(e,t,i);break;case 512:case 1024:case 2048:case 256:(a=r[o])||4096&i.flags||(a={instance:yi(e,i)});break;case 16:a={instance:mi(e,i)};break;case 16384:(a=r[o])||(a={instance:gi(e,i)}),32768&i.flags&&Gi(Rr(e,i.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new Dn;break;case 8:Oi(e,t,i),a=void 0}r[o]=a}ea(e,Xi.CreateViewNodes),oa(e,201326592,268435456,0)}function Hi(e){$i(e),jr.updateDirectives(e,1),ta(e,Xi.CheckNoChanges),jr.updateRenderer(e,1),ea(e,Xi.CheckNoChanges),e.state&=-97}function Qi(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,Pr(e,0,256),$i(e),jr.updateDirectives(e,0),ta(e,Xi.CheckAndUpdate),oa(e,67108864,536870912,0);var t=Pr(e,256,512);Ti(e,2097152|(t?1048576:0)),jr.updateRenderer(e,0),ea(e,Xi.CheckAndUpdate),oa(e,134217728,536870912,0),Ti(e,8388608|((t=Pr(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,Pr(e,768,1024)}function Ki(e,t,n,r,o,i,a,s,u,l,c,d,f){return 0===n?function(e,t,n,r,o,i,a,s,u,l,c,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,o,i,a,s,u,l,c,h){var d=t.bindings.length,f=!1;return d>0&&ko(e,t,0,n)&&(f=!0),d>1&&ko(e,t,1,r)&&(f=!0),d>2&&ko(e,t,2,o)&&(f=!0),d>3&&ko(e,t,3,i)&&(f=!0),d>4&&ko(e,t,4,a)&&(f=!0),d>5&&ko(e,t,5,s)&&(f=!0),d>6&&ko(e,t,6,u)&&(f=!0),d>7&&ko(e,t,7,l)&&(f=!0),d>8&&ko(e,t,8,c)&&(f=!0),d>9&&ko(e,t,9,h)&&(f=!0),f}(e,t,n,r,o,i,a,s,u,l,c,h);case 2:return function(e,t,n,r,o,i,a,s,u,l,c,h){var d=!1,f=t.bindings,p=f.length;if(p>0&&Jr(e,t,0,n)&&(d=!0),p>1&&Jr(e,t,1,r)&&(d=!0),p>2&&Jr(e,t,2,o)&&(d=!0),p>3&&Jr(e,t,3,i)&&(d=!0),p>4&&Jr(e,t,4,a)&&(d=!0),p>5&&Jr(e,t,5,s)&&(d=!0),p>6&&Jr(e,t,6,u)&&(d=!0),p>7&&Jr(e,t,7,l)&&(d=!0),p>8&&Jr(e,t,8,c)&&(d=!0),p>9&&Jr(e,t,9,h)&&(d=!0),d){var y=t.text.prefix;p>0&&(y+=Li(n,f[0])),p>1&&(y+=Li(r,f[1])),p>2&&(y+=Li(o,f[2])),p>3&&(y+=Li(i,f[3])),p>4&&(y+=Li(a,f[4])),p>5&&(y+=Li(s,f[5])),p>6&&(y+=Li(u,f[6])),p>7&&(y+=Li(l,f[7])),p>8&&(y+=Li(c,f[8])),p>9&&(y+=Li(h,f[9]));var m=Mr(e,t.nodeIndex).renderText;e.renderer.setValue(m,y)}return d}(e,t,n,r,o,i,a,s,u,l,c,h);case 16384:return function(e,t,n,r,o,i,a,s,u,l,c,h){var d=Lr(e,t.nodeIndex),f=d.instance,p=!1,y=void 0,m=t.bindings.length;return m>0&&Yr(e,t,0,n)&&(p=!0,y=Si(e,d,t,0,n,y)),m>1&&Yr(e,t,1,r)&&(p=!0,y=Si(e,d,t,1,r,y)),m>2&&Yr(e,t,2,o)&&(p=!0,y=Si(e,d,t,2,o,y)),m>3&&Yr(e,t,3,i)&&(p=!0,y=Si(e,d,t,3,i,y)),m>4&&Yr(e,t,4,a)&&(p=!0,y=Si(e,d,t,4,a,y)),m>5&&Yr(e,t,5,s)&&(p=!0,y=Si(e,d,t,5,s,y)),m>6&&Yr(e,t,6,u)&&(p=!0,y=Si(e,d,t,6,u,y)),m>7&&Yr(e,t,7,l)&&(p=!0,y=Si(e,d,t,7,l,y)),m>8&&Yr(e,t,8,c)&&(p=!0,y=Si(e,d,t,8,c,y)),m>9&&Yr(e,t,9,h)&&(p=!0,y=Si(e,d,t,9,h,y)),y&&f.ngOnChanges(y),65536&t.flags&&Or(e,256,t.nodeIndex)&&f.ngOnInit(),262144&t.flags&&f.ngDoCheck(),p}(e,t,n,r,o,i,a,s,u,l,c,h);case 32:case 64:case 128:return function(e,t,n,r,o,i,a,s,u,l,c,h){var d=t.bindings,f=!1,p=d.length;if(p>0&&Jr(e,t,0,n)&&(f=!0),p>1&&Jr(e,t,1,r)&&(f=!0),p>2&&Jr(e,t,2,o)&&(f=!0),p>3&&Jr(e,t,3,i)&&(f=!0),p>4&&Jr(e,t,4,a)&&(f=!0),p>5&&Jr(e,t,5,s)&&(f=!0),p>6&&Jr(e,t,6,u)&&(f=!0),p>7&&Jr(e,t,7,l)&&(f=!0),p>8&&Jr(e,t,8,c)&&(f=!0),p>9&&Jr(e,t,9,h)&&(f=!0),f){var y=Vr(e,t.nodeIndex),m=void 0;switch(201347067&t.flags){case 32:m=new Array(d.length),p>0&&(m[0]=n),p>1&&(m[1]=r),p>2&&(m[2]=o),p>3&&(m[3]=i),p>4&&(m[4]=a),p>5&&(m[5]=s),p>6&&(m[6]=u),p>7&&(m[7]=l),p>8&&(m[8]=c),p>9&&(m[9]=h);break;case 64:m={},p>0&&(m[d[0].name]=n),p>1&&(m[d[1].name]=r),p>2&&(m[d[2].name]=o),p>3&&(m[d[3].name]=i),p>4&&(m[d[4].name]=a),p>5&&(m[d[5].name]=s),p>6&&(m[d[6].name]=u),p>7&&(m[d[7].name]=l),p>8&&(m[d[8].name]=c),p>9&&(m[d[9].name]=h);break;case 128:var g=n;switch(p){case 1:m=g.transform(n);break;case 2:m=g.transform(r);break;case 3:m=g.transform(r,o);break;case 4:m=g.transform(r,o,i);break;case 5:m=g.transform(r,o,i,a);break;case 6:m=g.transform(r,o,i,a,s);break;case 7:m=g.transform(r,o,i,a,s,u);break;case 8:m=g.transform(r,o,i,a,s,u,l);break;case 9:m=g.transform(r,o,i,a,s,u,l,c);break;case 10:m=g.transform(r,o,i,a,s,u,l,c,h)}}y.value=m}return f}(e,t,n,r,o,i,a,s,u,l,c,h);default:throw"unreachable"}}(e,t,r,o,i,a,s,u,l,c,d,f):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){for(var r=!1,o=0;o<n.length;o++)ko(e,t,o,n[o])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){for(var r=t.bindings,o=!1,i=0;i<n.length;i++)Jr(e,t,i,n[i])&&(o=!0);if(o){var a="";for(i=0;i<n.length;i++)a+=Li(n[i],r[i]);a=t.text.prefix+a;var s=Mr(e,t.nodeIndex).renderText;e.renderer.setValue(s,a)}return o}(e,t,n);case 16384:return function(e,t,n){for(var r=Lr(e,t.nodeIndex),o=r.instance,i=!1,a=void 0,s=0;s<n.length;s++)Yr(e,t,s,n[s])&&(i=!0,a=Si(e,r,t,s,n[s],a));return a&&o.ngOnChanges(a),65536&t.flags&&Or(e,256,t.nodeIndex)&&o.ngOnInit(),262144&t.flags&&o.ngDoCheck(),i}(e,t,n);case 32:case 64:case 128:return function(e,t,n){for(var r=t.bindings,o=!1,i=0;i<n.length;i++)Jr(e,t,i,n[i])&&(o=!0);if(o){var a=Vr(e,t.nodeIndex),s=void 0;switch(201347067&t.flags){case 32:s=n;break;case 64:for(s={},i=0;i<n.length;i++)s[r[i].name]=n[i];break;case 128:var u=n[0],l=n.slice(1);s=u.transform.apply(u,h(l))}a.value=s}return o}(e,t,n);default:throw"unreachable"}}(e,t,r)}function $i(e){var t=e.def;if(4&t.nodeFlags)for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(4&r.flags){var o=Rr(e,n).template._projectedViews;if(o)for(var i=0;i<o.length;i++){var a=o[i];a.state|=32,eo(a,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Yi(e,t,n,r,o,i,a,s,u,l,c,h,d){return 0===n?function(e,t,n,r,o,i,a,s,u,l,c,h){var d=t.bindings.length;d>0&&Zr(e,t,0,n),d>1&&Zr(e,t,1,r),d>2&&Zr(e,t,2,o),d>3&&Zr(e,t,3,i),d>4&&Zr(e,t,4,a),d>5&&Zr(e,t,5,s),d>6&&Zr(e,t,6,u),d>7&&Zr(e,t,7,l),d>8&&Zr(e,t,8,c),d>9&&Zr(e,t,9,h)}(e,t,r,o,i,a,s,u,l,c,h,d):function(e,t,n){for(var r=0;r<n.length;r++)Zr(e,t,r,n[r])}(e,t,r),!1}function Ji(e,t){if(Fr(e,t.nodeIndex).dirty)throw Br(jr.createDebugContext(e,t.nodeIndex),"Query "+t.query.id+" not dirty","Query "+t.query.id+" dirty",0!=(1&e.state))}function Zi(e){if(!(128&e.state)){if(ta(e,Xi.Destroy),ea(e,Xi.Destroy),Ti(e,131072),e.disposables)for(var t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(16&e.state){var t=no(e);if(t){var n=t.template._projectedViews;n&&(Bo(n,n.indexOf(e)),jr.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var t=e.def.nodes.length,n=0;n<t;n++){var r=e.def.nodes[n];1&r.flags?e.renderer.destroyNode(Rr(e,n).renderElement):2&r.flags?e.renderer.destroyNode(Mr(e,n).renderText):(67108864&r.flags||134217728&r.flags)&&Fr(e,n).destroy()}}(e),io(e)&&e.renderer.destroy(),e.state|=128}}var Xi=function(e){return e[e.CreateViewNodes=0]="CreateViewNodes",e[e.CheckNoChanges=1]="CheckNoChanges",e[e.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate=3]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",e[e.Destroy=5]="Destroy",e}({});function ea(e,t){var n=e.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var o=n.nodes[r];33554432&o.flags?na(Rr(e,r).componentView,t):0==(33554432&o.childFlags)&&(r+=o.childCount)}}function ta(e,t){var n=e.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var o=n.nodes[r];if(16777216&o.flags)for(var i=Rr(e,r).viewContainer._embeddedViews,a=0;a<i.length;a++)na(i[a],t);else 0==(16777216&o.childFlags)&&(r+=o.childCount)}}function na(e,t){var n=e.state;switch(t){case Xi.CheckNoChanges:0==(128&n)&&(12==(12&n)?Hi(e):64&n&&ra(e,Xi.CheckNoChangesProjectedViews));break;case Xi.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Hi(e):64&n&&ra(e,t));break;case Xi.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Qi(e):64&n&&ra(e,Xi.CheckAndUpdateProjectedViews));break;case Xi.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Qi(e):64&n&&ra(e,t));break;case Xi.Destroy:Zi(e);break;case Xi.CreateViewNodes:Wi(e)}}function ra(e,t){ta(e,t),ea(e,t)}function oa(e,t,n,r){if(e.def.nodeFlags&t&&e.def.nodeFlags&n)for(var o=e.def.nodes.length,i=0;i<o;i++){var a=e.def.nodes[i];if(a.flags&t&&a.flags&n)switch(jr.setCurrentNode(e,a.nodeIndex),r){case 0:xi(e,a);break;case 1:Ji(e,a)}a.childFlags&t&&a.childFlags&n||(i+=a.childCount)}}var ia=!1;function aa(e,t,n,r,o,i){return qi(ua(e,o,o.injector.get(En),t,n),r,i)}function sa(e,t,n,r,o,i){var a=o.injector.get(En),s=ua(e,o,new Ua(a),t,n),u=va(r);return Ba(Da.create,qi,null,[s,u,i])}function ua(e,t,n,r,o){var i=t.injector.get(Ar),a=t.injector.get(dt);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:o,sanitizer:i,rendererFactory:n,renderer:n.createRenderer(null,null),errorHandler:a}}function la(e,t,n,r){var o=va(n);return Ba(Da.create,Bi,null,[e,t,o,r])}function ca(e,t,n,r){return n=pa.get(t.element.componentProvider.provider.token)||va(n),Ba(Da.create,Ui,null,[e,t,n,r])}function ha(e,t,n,r){return ni(e,t,n,function(e){var t=function(e){var t=!1,n=!1;return 0===da.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(function(e){var r=da.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)}),e.modules.forEach(function(e){fa.forEach(function(r,o){o.ngInjectableDef.providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e),n=t.hasDeprecatedOverrides;return t.hasOverrides?(function(e){for(var t=0;t<e.providers.length;t++){var r=e.providers[t];n&&(r.flags|=4096);var o=da.get(r.token);o&&(r.flags=-3841&r.flags|o.flags,r.deps=uo(o.deps),r.value=o.value)}if(fa.size>0){var i=new Set(e.modules);fa.forEach(function(t,r){if(i.has(r.ngInjectableDef.providedIn)){var o={token:r,flags:t.flags|(n?4096:0),deps:uo(t.deps),value:t.value,index:e.providers.length};e.providers.push(o),e.providersByKey[Wr(r)]=o}})}}(e=e.factory(function(){return zr})),e):e}(r))}var da=new Map,fa=new Map,pa=new Map;function ya(e){da.set(e.token,e),"function"==typeof e.token&&e.token.ngInjectableDef&&"function"==typeof e.token.ngInjectableDef.providedIn&&fa.set(e.token,e)}function ma(e,t){var n=ho(ho(t.viewDefFactory).nodes[0].element.componentView);pa.set(e,n)}function ga(){da.clear(),fa.clear(),pa.clear()}function va(e){if(0===da.size)return e;var t=function(e){for(var t=[],n=null,r=0;r<e.nodes.length;r++){var o=e.nodes[r];1&o.flags&&(n=o),n&&3840&o.flags&&da.has(o.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(function(){return zr});for(var n=0;n<t.length;n++)r(e,t[n]);return e;function r(e,t){for(var n=t+1;n<e.nodes.length;n++){var r=e.nodes[n];if(1&r.flags)return;if(3840&r.flags){var o=r.provider,i=da.get(o.token);i&&(r.flags=-3841&r.flags|i.flags,o.deps=uo(i.deps),o.value=i.value)}}}}function ba(e,t,n,r,o,i,a,s,u,l,c,h,d){var f=e.def.nodes[t];return Ki(e,f,n,r,o,i,a,s,u,l,c,h,d),224&f.flags?Vr(e,t).value:void 0}function wa(e,t,n,r,o,i,a,s,u,l,c,h,d){var f=e.def.nodes[t];return Yi(e,f,n,r,o,i,a,s,u,l,c,h,d),224&f.flags?Vr(e,t).value:void 0}function _a(e){return Ba(Da.detectChanges,Qi,null,[e])}function Ca(e){return Ba(Da.checkNoChanges,Hi,null,[e])}function Ea(e){return Ba(Da.destroy,Zi,null,[e])}var Sa,Ta,Ia,Da=function(e){return e[e.create=0]="create",e[e.detectChanges=1]="detectChanges",e[e.checkNoChanges=2]="checkNoChanges",e[e.destroy=3]="destroy",e[e.handleEvent=4]="handleEvent",e}({});function ka(e,t){Ta=e,Ia=t}function xa(e,t,n,r){return ka(e,t),Ba(Da.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function Na(e,t){if(128&e.state)throw Ur(Da[Sa]);return ka(e,La(e,0)),e.def.updateDirectives(function(e,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=e.def.nodes[n];return 0===t?Pa(e,a,r,o):Oa(e,a,r,o),16384&a.flags&&ka(e,La(e,n)),224&a.flags?Vr(e,a.nodeIndex).value:void 0},e)}function Aa(e,t){if(128&e.state)throw Ur(Da[Sa]);return ka(e,Va(e,0)),e.def.updateRenderer(function(e,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=e.def.nodes[n];return 0===t?Pa(e,a,r,o):Oa(e,a,r,o),3&a.flags&&ka(e,Va(e,n)),224&a.flags?Vr(e,a.nodeIndex).value:void 0},e)}function Pa(e,t,n,r){if(Ki.apply(void 0,h([e,t,n],r))){var o=1===n?r[0]:r;if(16384&t.flags){for(var i={},a=0;a<t.bindings.length;a++){var s=t.bindings[a],u=o[a];8&s.flags&&(i[(f=s.nonMinifiedName,"ng-reflect-"+(f=f.replace(/[$@]/g,"_").replace(Ma,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"-"+e[1].toLowerCase()})))]=Ra(u))}var l=t.parent,c=Rr(e,l.nodeIndex).renderElement;if(l.element.name)for(var d in i)null!=(u=i[d])?e.renderer.setAttribute(c,d,u):e.renderer.removeAttribute(c,d);else e.renderer.setValue(c,"bindings="+JSON.stringify(i,null,2))}}var f}function Oa(e,t,n,r){Yi.apply(void 0,h([e,t,n],r))}var Ma=/([A-Z])/g;function Ra(e){try{return null!=e?e.toString().slice(0,30):e}catch(e){return"[ERROR] Exception while trying to serialize the value"}}function La(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function Va(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var Fa=function(){function e(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];for(var n=this.nodeDef,r=e;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=ro(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(e.prototype,"elOrCompView",{get:function(){return Rr(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return Jo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){var e=[];if(this.elDef)for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){var e={};if(this.elDef){ja(this.elView,this.elDef,e);for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&ja(this.elView,n,e),t+=n.childCount}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentRenderElement",{get:function(){var e=function(e){for(;e&&!io(e);)e=e.parent;return e.parent?Rr(e.parent,ro(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?oo(this.view,this.nodeDef):oo(this.elView,this.elDef)},enumerable:!0,configurable:!0}),e.prototype.logError=function(e){for(var t,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];2&this.nodeDef.flags?(t=this.view.def,n=this.nodeDef.nodeIndex):(t=this.elView.def,n=this.elDef.nodeIndex);var i=function(e,t){for(var n=-1,r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}(t,n),a=-1;t.factory(function(){var t;return++a===i?(t=e.error).bind.apply(t,h([e],r)):zr}),a<i&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,h(r)))},e}();function ja(e,t,n){for(var r in t.references)n[r]=Ai(e,t,t.references[r])}function Ba(e,t,n,r){var o=Sa,i=Ta,a=Ia;try{Sa=e;var s=t.apply(n,r);return Ta=i,Ia=a,Sa=o,s}catch(e){if(lt(e)||!Ta)throw e;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),qr(e,t),e}(e,qa())}}function qa(){return Ta?new Fa(Ta,Ia):null}var Ua=function(){function e(e){this.delegate=e}return e.prototype.createRenderer=function(e,t){return new za(this.delegate.createRenderer(e,t))},e.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},e.prototype.end=function(){this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},e}(),za=function(){function e(e){this.delegate=e,this.data=this.delegate.data}return e.prototype.destroyNode=function(e){!function(e){On.delete(e.nativeNode)}(Mn(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)},e.prototype.destroy=function(){this.delegate.destroy()},e.prototype.createElement=function(e,t){var n=this.delegate.createElement(e,t),r=qa();if(r){var o=new Pn(n,null,r);o.name=e,Rn(o)}return n},e.prototype.createComment=function(e){var t=this.delegate.createComment(e),n=qa();return n&&Rn(new An(t,null,n)),t},e.prototype.createText=function(e){var t=this.delegate.createText(e),n=qa();return n&&Rn(new An(t,null,n)),t},e.prototype.appendChild=function(e,t){var n=Mn(e),r=Mn(t);n&&r&&n instanceof Pn&&n.addChild(r),this.delegate.appendChild(e,t)},e.prototype.insertBefore=function(e,t,n){var r=Mn(e),o=Mn(t),i=Mn(n);r&&o&&r instanceof Pn&&r.insertBefore(i,o),this.delegate.insertBefore(e,t,n)},e.prototype.removeChild=function(e,t){var n=Mn(e),r=Mn(t);n&&r&&n instanceof Pn&&n.removeChild(r),this.delegate.removeChild(e,t)},e.prototype.selectRootElement=function(e){var t=this.delegate.selectRootElement(e),n=qa();return n&&Rn(new Pn(t,null,n)),t},e.prototype.setAttribute=function(e,t,n,r){var o=Mn(e);o&&o instanceof Pn&&(o.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)},e.prototype.removeAttribute=function(e,t,n){var r=Mn(e);r&&r instanceof Pn&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)},e.prototype.addClass=function(e,t){var n=Mn(e);n&&n instanceof Pn&&(n.classes[t]=!0),this.delegate.addClass(e,t)},e.prototype.removeClass=function(e,t){var n=Mn(e);n&&n instanceof Pn&&(n.classes[t]=!1),this.delegate.removeClass(e,t)},e.prototype.setStyle=function(e,t,n,r){var o=Mn(e);o&&o instanceof Pn&&(o.styles[t]=n),this.delegate.setStyle(e,t,n,r)},e.prototype.removeStyle=function(e,t,n){var r=Mn(e);r&&r instanceof Pn&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)},e.prototype.setProperty=function(e,t,n){var r=Mn(e);r&&r instanceof Pn&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)},e.prototype.listen=function(e,t,n){if("string"!=typeof e){var r=Mn(e);r&&r.listeners.push(new function(e,t){this.name=e,this.callback=t}(t,n))}return this.delegate.listen(e,t,n)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setValue=function(e,t){return this.delegate.setValue(e,t)},e}(),Ga=function(e){function t(t,n,r){var o=e.call(this)||this;return o.moduleType=t,o._bootstrapComponents=n,o._ngModuleDefFactory=r,o}return o(t,e),t.prototype.create=function(e){!function(){if(!ia){ia=!0;var e=yn()?{setCurrentNode:ka,createRootView:sa,createEmbeddedView:la,createComponentView:ca,createNgModuleRef:ha,overrideProvider:ya,overrideComponentView:ma,clearOverrides:ga,checkAndUpdateView:_a,checkNoChangesView:Ca,destroyView:Ea,createDebugContext:function(e,t){return new Fa(e,t)},handleEvent:xa,updateDirectives:Na,updateRenderer:Aa}:{setCurrentNode:function(){},createRootView:aa,createEmbeddedView:Bi,createComponentView:Ui,createNgModuleRef:ni,overrideProvider:zr,overrideComponentView:zr,clearOverrides:zr,checkAndUpdateView:Qi,checkNoChangesView:Hi,destroyView:Zi,createDebugContext:function(e,t){return new Fa(e,t)},handleEvent:function(e,t,n,r){return e.def.handleEvent(e,t,n,r)},updateDirectives:function(e,t){return e.def.updateDirectives(0===t?ba:wa,e)},updateRenderer:function(e,t){return e.def.updateRenderer(0===t?ba:wa,e)}};jr.setCurrentNode=e.setCurrentNode,jr.createRootView=e.createRootView,jr.createEmbeddedView=e.createEmbeddedView,jr.createComponentView=e.createComponentView,jr.createNgModuleRef=e.createNgModuleRef,jr.overrideProvider=e.overrideProvider,jr.overrideComponentView=e.overrideComponentView,jr.clearOverrides=e.clearOverrides,jr.checkAndUpdateView=e.checkAndUpdateView,jr.checkNoChangesView=e.checkNoChangesView,jr.destroyView=e.destroyView,jr.resolveDep=Ci,jr.createDebugContext=e.createDebugContext,jr.handleEvent=e.handleEvent,jr.updateDirectives=e.updateDirectives,jr.updateRenderer=e.updateRenderer,jr.dirtyParentQueries=ki}}();var t=function(e){var t=Array.from(e.providers),n=Array.from(e.modules),r={};for(var o in e.providersByKey)r[o]=e.providersByKey[o];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(ho(this._ngModuleDefFactory));return jr.createNgModuleRef(this.moduleType,e||je.NULL,this._bootstrapComponents,t)},t}(Kt),Wa=16,Ha=0,Qa=1,Ka=2,$a=3,Ya=4,Ja=5,Za=6,Xa=7,es=8,ts=9,ns=10,rs=11,os=14;function is(e,t,n){e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked))}function as(e,t,n){e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked))}function ss(e,t,n){null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}function us(e,t,n){16&e[Ya]&&(ls(e[Xa],t.initHooks,t.checkHooks,n),e[Ya]&=-17)}function ls(e,t,n,r){var o=r?t:n;o&&cs(e,o)}function cs(e,t){for(var n=0;n<t.length;n+=2)t[n+1].call(e[t[n]])}var hs=0,ds=4,fs="ngProjectAs";function ps(e){return!!e.listen}var ys={createRenderer:function(e,t){return document}};function ms(e){return Array.isArray(e)?e[0]:e}function gs(e){if(2===e.tNode.type){var t=e.data;return t[Ka]?t[Ka][Ja]:null}return e.tNode.next?e.view[e.tNode.next.index]:null}function vs(e){return e.tNode.child?ms((2===e.tNode.type?e.data:e.view)[e.tNode.child.index]):null}function bs(e){if(-1===e.tNode.index&&2===e.tNode.type){var t=e.data[os];return-1===t?null:e.view[t].dynamicLContainerNode}var n=e.tNode.parent;return ms(n?e.view[n.index]:e.view[Ja])}var ws=[];function _s(e){for(var t=e[Ja];2===t.tNode.type;)t=(e=e[Qa])[Ja];return t}function Cs(e,t,n,r,o){0===e?ps(t)?t.insertBefore(n,r,o):n.insertBefore(r,o,!0):1===e?ps(t)?t.removeChild(n,r):n.removeChild(r):2===e&&t.destroyNode(r)}function Es(e){if(-1===e[Ha].childIndex)return null;var t=e[e[Ha].childIndex];return t.data?t.data:t.dynamicLContainerNode.data}function Ss(e,t){var n;return(n=e[Ja])&&2===n.tNode.type?bs(n).data:e[Qa]===t?null:e[Qa]}function Ts(e){if(e[Ha]){var t=e;!function(e){var t=e[Ha].cleanup;if(null!=t){for(var n=0;n<t.length-1;n+=2)"string"==typeof t[n]?(ms(e[t[n+1]]).native.removeEventListener(t[n],e[es][t[n+2]],t[n+3]),n+=2):"number"==typeof t[n]?(0,e[es][t[n]])():t[n].call(e[es][t[n+1]]);e[es]=null}}(t),function(e){var t,n=e[Ha];null!=n&&null!=(t=n.destroyHooks)&&cs(e[Xa],t)}(t),(r=(n=t)[Ha]&&n[Ha].pipeDestroyHooks)&&cs(n,r),-1===t[Ha].id&&ps(t[rs])&&t[rs].destroy()}var n,r}var Is,Ds,ks,xs,Ns,As,Ps,Os,Ms,Rs="__ngHostLNode__",Ls=Promise.resolve(null),Vs=[0,0],Fs=new Array(Wa).fill(null),js=!1,Bs=!0;function qs(e,t){var n=Os;return Ms=e&&e[Xa],Ns=e&&e[Ha],Ps=e&&1==(1&e[Ya]),Bs=e&&Ns.firstTemplatePass,Is=e&&e[rs],null!=t&&(ks=t,xs=!0),Os=e,As=e&&e[$a],n}function Us(e,t){t||(js||ls(Ms,Ns.viewHooks,Ns.viewCheckHooks,Ps),Os[Ya]&=-6),Os[Ya]|=16,Os[Za]=-1,qs(e,null)}function zs(){js||us(Os,Ns,Ps),function(e){for(var t=Es(Os);null!==t;t=t[Ka])if(t.length<Wa&&null===t[hs])for(var n=t,r=0;r<n[ds].length;r++){var o=n[ds][r],i=o.data;Qs(o,i[Ha],i[ts],2)}}(),js||ls(Ms,Ns.contentHooks,Ns.contentCheckHooks,Ps),Ns.firstTemplatePass=Bs=!1,Gs(Ns.hostBindings),function(e){if(null!=e.contentQueries)for(var t=0;t<e.contentQueries.length;t+=2){var n=e.contentQueries[t];e.directives[n].contentQueriesRefresh(n,e.contentQueries[t+1])}}(Ns),function(e){if(null!=e)for(var t=0;t<e.length;t+=2)tu(e[t],e[t+1])}(Ns.components)}function Gs(e){if(null!=e)for(var t=Ns.directives,n=0;n<e.length;n+=2){var r=e[n],o=t[r];o.hostBindings&&o.hostBindings(r,e[n+1])}}function Ws(e,t,n,r,o){return[t,Os,null,null,25|r,null,-1,null,null,n,Os&&Os[ns],e,o||null,null,-1,null]}function Hs(e,t,n,r,o,i){var a=xs?ks:ks&&bs(ks),s=a&&a.view===Os?a.tNode:null,u=(xs?As:ks&&ks.queries)||a&&a.queries&&a.queries.child(),l=null!=i,c=function(e,t,n,r,o,i){return{native:r,view:Os,nodeInjector:n?n.nodeInjector:null,data:o,queries:i,tNode:null,dynamicLContainerNode:null}}(0,0,a,n,l?i:null,u);if(-1===e||2===t)c.tNode=(i?i[Ha].node:null)||eu(t,e,null,null,s,null);else{var h=e+Wa,d=Ns.data;if(Os[h]=c,h>=d.length){var f=d[h]=eu(t,h,r,o,s,null);if(!xs&&ks){var p=ks.tNode;p.next=f,p.dynamicContainerNode&&(p.dynamicContainerNode.next=f)}}c.tNode=d[h],xs&&(As=null,(null==ks.tNode.child&&ks.view===Os||2===ks.tNode.type)&&(ks.tNode.child=c.tNode))}if(2==(2&t)&&l){var y=i;y[Ja]=c,Bs&&(y[Ha].node=c.tNode)}return ks=c,xs=!0,c}function Qs(e,t,n,r){var o,i=xs,a=ks;if(null==e.data[Qa]&&e.data[ts]&&!t.template)ru(e.data[ts]);else try{xs=!0,ks=null,o=qs(e.data,e),Js(),t.template(r,n),2&r?zs():e.data[Ha].firstTemplatePass=Bs=!1}finally{Us(o,1==(1&r)),xs=i,ks=a}return e}function Ks(e,t,n,r){var o=qs(t,e);try{Ds.begin&&Ds.begin(),r?(Js(),r($s(t),n),zs()):(js||(us(Os,Ns,Ps),ls(Ms,Ns.contentHooks,Ns.contentCheckHooks,Ps)),Gs(Vs),tu(0,Wa))}finally{Ds.end&&Ds.end(),Us(o)}}function $s(e){return 1&e[Ya]?3:2}var Ys=null;function Js(){Ys=null}function Zs(e,t,n,r,o){return{id:e,template:t,viewQuery:o,node:null,data:Fs.slice(),childIndex:-1,bindingStartIndex:-1,directives:null,firstTemplatePass:!0,initHooks:null,checkHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,pipeDestroyHooks:null,cleanup:null,hostBindings:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof n?n():n,pipeRegistry:"function"==typeof r?r():r,currentMatches:null}}function Xs(e,t){Ds=e;var n=e.createRenderer(null,null);return"string"==typeof t?ps(n)?n.selectRootElement(t):n.querySelector(t):t}function eu(e,t,n,r,o,i){return{type:e,index:t,flags:0,tagName:n,attrs:r,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:i,next:null,child:null,parent:o,dynamicContainerNode:null,detached:null,stylingTemplate:null,projection:null}}function tu(e,t){var n=Os[t],r=n.data;nu(r)&&6&r[Ya]&&au(r,n,Ms[e])}function nu(e){return 8==(8&e[Ya])}function ru(e){for(var t=0;t<e.components.length;t++){var n=e.components[t];Ks(su(n),ou(n),n)}}function ou(e){for(var t=su(e).view;t[Qa];)t=t[Qa];return t}function iu(e){var t=su(e);au(t.data,t,e)}function au(e,t,n){var r=qs(e,t),o=e[Ha],i=o.template,a=o.viewQuery;try{Js(),function(t,n,r){t&&1&e[Ya]&&t(1,r)}(a,0,n),i($s(e),n),zs(),function(e,t){e&&e(2,t)}(a,n)}finally{Us(r)}}function su(e){return e[Rs]}var uu=Ls;function lu(e){return{components:[],scheduler:e,clean:uu}}var cu=function(){function e(e,t){this._view=e,this._appRef=null,this._viewContainerRef=null,this._lViewNode=null,this.context=t}return e.prototype._setComponentContext=function(e,t){this._view=e,this.context=t},Object.defineProperty(e.prototype,"destroyed",{get:function(){return 32==(32&this._view[Ya])},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){var e,t;this._viewContainerRef&&nu(this._view)&&(this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),this._viewContainerRef=null),ps(t=(e=this._view)[rs])&&t.destroyNode&&function(t,n,r,o,i,a){for(var s=e[Ja],u=-1;s;){var l=null,c=s.tNode.type;if(3===c)Cs(2,o,null,s.native,a),s.dynamicLContainerNode&&Cs(2,o,null,s.dynamicLContainerNode.native,a);else if(0===c){Cs(2,o,null,s.native,a);var h=s,d=h.dynamicLContainerNode?h.dynamicLContainerNode.data:h.data;(l=d[ds].length?vs(d[ds][0]):null)&&(a=h.dynamicLContainerNode?h.dynamicLContainerNode.native:h.native)}else if(1===c){var f=_s(s.view),p=f.tNode.projection[s.tNode.projection];ws[++u]=s,l=p?f.data[Qa][p.index]:null}else l=vs(s);if(null===l)for(null===(l=gs(s))&&8192&s.tNode.flags&&(l=gs(ws[u--]));s&&!l;){if(null===(s=bs(s))||s===n)return null;s.tNode.next||0!==c||(a=s.native),l=gs(s)}s=l}}(0,e[Ja],0,t),function(e){if(-1===e[Ha].childIndex)return Ts(e);for(var t=Es(e);t;){var n=null;if(t.length>=Wa?t[Ha].childIndex>-1&&(n=Es(t)):t[ds].length&&(n=t[ds][0].data),null==n){for(;t&&!t[Ka]&&t!==e;)Ts(t),t=Ss(t,e);Ts(t||e),n=t&&t[Ka]}t=n}}(e),e[Ya]|=32},e.prototype.onDestroy=function(e){var t,n;n=e,function(e){return e[es]||(e[es]=[])}(t=this._view).push(n),t[Ha].firstTemplatePass&&function(e){return e[Ha].cleanup||(e[Ha].cleanup=[])}(t).push(t[es].length-1,null)},e.prototype.markForCheck=function(){!function(e){for(var t=e;null!=t[Qa];)t[Ya]|=4,t=t[Qa];var n,r;t[Ya]|=4,(n=t[ts]).clean==Ls&&(n.clean=new Promise(function(e){return r=e}),n.scheduler(function(){ru(n),r(null),n.clean=Ls}))}(this._view)},e.prototype.detach=function(){this._view[Ya]&=-9},e.prototype.reattach=function(){this._view[Ya]|=8},e.prototype.detectChanges=function(){iu(this.context)},e.prototype.checkNoChanges=function(){!function(e){js=!0;try{iu(e)}finally{js=!1}}(this.context)},e.prototype.attachToViewContainerRef=function(e){this._viewContainerRef=e},e.prototype.detachFromAppRef=function(){this._appRef=null},e.prototype.attachToAppRef=function(e){this._appRef=e},e}(),hu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.resolveComponentFactory=function(e){return new yu(e.ngComponentDef)},t}(Gt);function du(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var fu=new ye("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return lu(tt(pu))}}),pu=new ye("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return requestAnimationFrame.bind(window)}}),yu=function(e){function t(t){var n=e.call(this)||this;return n.componentDef=t,n.componentType=t.type,n.selector=t.selectors[0][0],n.ngContentSelectors=[],n}return o(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){return du(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return du(this.componentDef.outputs)},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,r){var o,i,a=void 0===n,s=r?r.injector.get(En):ys,u=a?(o=this.selector,ps(i=s.createRenderer(null,this.componentDef.rendererType)||Is)?i.createElement(o,Ys):null===Ys?i.createElement(o):i.createElementNS(Ys,o)):Xs(s,n),l=r&&!a?r.injector.get(fu):lu(requestAnimationFrame.bind(window)),c=Ws(s.createRenderer(u,this.componentDef.rendererType),Zs(-1,null,null,null,null),l,this.componentDef.onPush?4:2);c[ns]=r&&r.injector||null;var h,d,f=qs(c,null);try{if(s.begin&&s.begin(),d=function(e,t,n,r){xs=!1,ks=null;var o,i=Hs(0,3,t,null,null,Ws(Is,(o=n.template).ngPrivateData||(o.ngPrivateData=Zs(-1,o,n.directiveDefs,n.pipeDefs,n.viewQuery)),null,n.onPush?4:2,r));return Bs&&(i.tNode.flags=4096,n.diPublic&&n.diPublic(n),Ns.directives=[n]),i}(0,u,this.componentDef),l.components.push(h=function(e,t,n){if(Object.defineProperty(t,Rs,{enumerable:!1,value:ks}),null==Ms&&(Os[Xa]=Ms=[]),Ms[e]=t,Bs){var r=ks.tNode.flags;0==(4095&r)?ks.tNode.flags=e<<14|4096&r|1:ks.tNode.flags++}else{var o=n.diPublic;o&&o(n)}return null!=n.attributes&&3==ks.tNode.type&&function(e,t){for(var n=ps(Is),r=0;r<t.length;){var o=t[r];if(1===o)break;if(o===fs)r+=2;else if(0===o){var i=t[r+1],a=t[r+2],s=t[r+3];n?Is.setAttribute(e,a,s,i):e.setAttributeNS(i,a,s),r+=4}else s=t[r+1],n?Is.setAttribute(e,o,s):e.setAttribute(o,s),r+=2}}(ks.native,n.attributes),t}(0,this.componentDef.factory(),this.componentDef)),function(e,t,n){e&&null!=e.changeDetectorRef&&e.changeDetectorRef._setComponentContext(d.data,h)}(d.nodeInjector),function(e,t){var n=su(e),r=n.view[Ha];(function(e,t,n,r){t&&(r.initHooks||(r.initHooks=[])).push(0,t),n&&((r.initHooks||(r.initHooks=[])).push(0,n),(r.checkHooks||(r.checkHooks=[])).push(0,n))})(0,t.onInit,t.doCheck,r),function(e,t){if(t.firstTemplatePass)for(var n=e>>14,r=n+(4095&e),o=n;o<r;o++){var i=t.directives[o];is(i,t,o),as(i,t,o),ss(i,t,o)}}(n.tNode.flags,r)}(h,this.componentDef),t)for(var p=0,y=d.tNode.projection=[],m=0;m<t.length;m++){for(var g=t[m],v=null,b=null,w=0;w<g.length;w++){var _=Hs(++p,3,g[w],null,null);b?b.next=_.tNode:v=_.tNode,b=_.tNode}y.push(v)}Qs(d,d.data[Ha],h,1),d.data[Ya]&=-2}finally{qs(f,null),s.end&&s.end()}var C=new mu(this.componentType,h,c,e,u);return a&&(C.hostView._lViewNode.tNode.child=d.tNode),C},t}(Ft),mu=function(e){function t(t,n,r,o,i){var a=e.call(this)||this;return a.destroyCbs=[],a.instance=n,a.hostView=a.changeDetectorRef=new cu(r,n),a.hostView._lViewNode=Hs(-1,2,null,null,null,r),a.injector=o,a.location=new In(i),a.componentType=t,a}return o(t,e),t.prototype.destroy=function(){this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null},t.prototype.onDestroy=function(e){this.destroyCbs.push(e)},t}(Vt),gu={provide:Gt,useFactory:function(){return new hu},deps:[]},vu=function(e){function t(t,n){var r=e.call(this)||this;return r._bootstrapComponents=[],r.destroyCbs=[],r._bootstrapComponents=t.ngModuleDef.bootstrap,r.injector=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=null),t=t||vt(),new bt(e,n,t)}(t,n,[gu,{provide:Qt,useValue:r}]),r.instance=r.injector.get(t),r.componentFactoryResolver=new hu,r}return o(t,e),t.prototype.destroy=function(){this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null},t.prototype.onDestroy=function(e){this.destroyCbs.push(e)},t}(Qt);!function(e){function t(t){var n=e.call(this)||this;return n.moduleType=t,n}o(t,e),t.prototype.create=function(e){return new vu(this.moduleType,e)}}(Kt);var bu=function(){},wu=function(){function e(){this.title="test02"}return e.prototype.ngOnInit=function(){},e}(),_u=function(){},Cu=void 0,Eu=["en",[["a","p"],["AM","PM"],Cu],[["AM","PM"],Cu,Cu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cu,"{1} 'at' {0}",Cu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Su={},Tu=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),Iu=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}({}),Du=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}({}),ku=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}({}),xu=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({});function Nu(e,t,n){var r=ju(e);return Vu(Vu([r[3],r[4]],t),n)}function Au(e,t,n){var r=ju(e);return Vu(Vu([r[5],r[6]],t),n)}function Pu(e,t){return Vu(ju(e)[10],t)}function Ou(e,t){return Vu(ju(e)[11],t)}function Mu(e,t){return Vu(ju(e)[12],t)}function Ru(e,t){var n=ju(e),r=n[13][t];if(void 0===r){if(t===xu.CurrencyDecimal)return n[13][xu.Decimal];if(t===xu.CurrencyGroup)return n[13][xu.Group]}return r}function Lu(e){if(!e[19])throw new Error('Missing extra locale data for the locale "'+e[0]+'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.')}function Vu(e,t){for(var n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function Fu(e){var t=c(e.split(":"),2);return{hours:+t[0],minutes:+t[1]}}function ju(e){var t=e.toLowerCase().replace(/_/g,"-"),n=Su[t];if(n)return n;var r=t.split("-")[0];if(n=Su[r])return n;if("en"===r)return Eu;throw new Error('Missing locale data for the locale "'+e+'".')}var Bu=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,qu={},Uu=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,zu=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}({}),Gu=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}({}),Wu=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}({});function Hu(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e}function Qu(e,t,n,r,o){void 0===n&&(n="-");var i="";(e<0||o&&e<=0)&&(o?e=1-e:(e=-e,i=n));for(var a=String(e);a.length<t;)a="0"+a;return r&&(a=a.substr(a.length-t)),i+a}function Ku(e,t,n,r,o){return void 0===n&&(n=0),void 0===r&&(r=!1),void 0===o&&(o=!1),function(i,a){var s,u=function(e,t){switch(e){case Gu.FullYear:return t.getFullYear();case Gu.Month:return t.getMonth();case Gu.Date:return t.getDate();case Gu.Hours:return t.getHours();case Gu.Minutes:return t.getMinutes();case Gu.Seconds:return t.getSeconds();case Gu.FractionalSeconds:return t.getMilliseconds();case Gu.Day:return t.getDay();default:throw new Error('Unknown DateType value "'+e+'".')}}(e,i);if((n>0||u>-n)&&(u+=n),e===Gu.Hours)0===u&&-12===n&&(u=12);else if(e===Gu.FractionalSeconds)return s=t,Qu(u,3).substr(0,s);var l=Ru(a,xu.MinusSign);return Qu(u,t,l,r,o)}}function $u(e,t,n,r){return void 0===n&&(n=Iu.Format),void 0===r&&(r=!1),function(o,i){return function(e,t,n,r,o,i){switch(n){case Wu.Months:return Au(t,o,r)[e.getMonth()];case Wu.Days:return Nu(t,o,r)[e.getDay()];case Wu.DayPeriods:var a=e.getHours(),s=e.getMinutes();if(i){var u,l=function(e){var t=ju(e);return Lu(t),(t[19][2]||[]).map(function(e){return"string"==typeof e?Fu(e):[Fu(e[0]),Fu(e[1])]})}(t),c=function(e,t,n){var r=ju(e);return Lu(r),Vu(Vu([r[19][0],r[19][1]],t)||[],n)||[]}(t,o,r);if(l.forEach(function(e,t){if(Array.isArray(e)){var n=e[0],r=e[1],o=r.hours;a>=n.hours&&s>=n.minutes&&(a<o||a===o&&s<r.minutes)&&(u=c[t])}else e.hours===a&&e.minutes===s&&(u=c[t])}),u)return u}return function(e,t,n){var r=ju(e);return Vu(Vu([r[1],r[2]],t),n)}(t,o,r)[a<12?0:1];case Wu.Eras:return function(e,t){return Vu(ju(e)[7],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(o,i,e,t,n,r)}}function Yu(e){return function(t,n,r){var o=-1*r,i=Ru(n,xu.MinusSign),a=o>0?Math.floor(o/60):Math.ceil(o/60);switch(e){case zu.Short:return(o>=0?"+":"")+Qu(a,2,i)+Qu(Math.abs(o%60),2,i);case zu.ShortGMT:return"GMT"+(o>=0?"+":"")+Qu(a,1,i);case zu.Long:return"GMT"+(o>=0?"+":"")+Qu(a,2,i)+":"+Qu(Math.abs(o%60),2,i);case zu.Extended:return 0===r?"Z":(o>=0?"+":"")+Qu(a,2,i)+":"+Qu(Math.abs(o%60),2,i);default:throw new Error('Unknown zone width "'+e+'"')}}}var Ju=0,Zu=4;function Xu(e,t){return void 0===t&&(t=!1),function(n,r){var o,i,a,s;if(t){var u=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,l=n.getDate();o=1+Math.floor((l+u)/7)}else{var c=(a=n.getFullYear(),s=new Date(a,Ju,1).getDay(),new Date(a,0,1+(s<=Zu?Zu:Zu+7)-s)),h=(i=n,new Date(i.getFullYear(),i.getMonth(),i.getDate()+(Zu-i.getDay()))).getTime()-c.getTime();o=1+Math.round(h/6048e5)}return Qu(o,e,Ru(r,xu.MinusSign))}}var el={};function tl(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function nl(e){return e instanceof Date&&!isNaN(e.valueOf())}var rl=new ye("UseV4Plurals"),ol=function(){},il=function(e){function t(t,n){var r=e.call(this)||this;return r.locale=t,r.deprecatedPluralFn=n,r}return o(t,e),t.prototype.getPluralCategory=function(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return ju(e)[18]}(t||this.locale)(e)){case Tu.Zero:return"zero";case Tu.One:return"one";case Tu.Two:return"two";case Tu.Few:return"few";case Tu.Many:return"many";default:return"other"}},a([s(0,xe(rr)),s(1,Ne()),s(1,xe(rl))],t)}(ol);function al(e,t){var n,r;t=encodeURIComponent(t);try{for(var o=l(e.split(";")),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.indexOf("="),u=c(-1==s?[a,""]:[a.slice(0,s),a.slice(s+1)],2),h=u[1];if(u[0].trim()===t)return decodeURIComponent(h)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}var sl=function(){function e(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}return Object.defineProperty(e.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),e}(),ul=function(){function e(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(e.prototype,"ngForOf",{set:function(e){this._ngForOf=e,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(e){yn()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(e)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},e.prototype._applyChanges=function(e){var t=this,n=[];e.forEachOperation(function(e,r,o){if(null==e.previousIndex){var i=t._viewContainer.createEmbeddedView(t._template,new sl(null,t._ngForOf,-1,-1),o),a=new ll(e,i);n.push(a)}else null==o?t._viewContainer.remove(r):(i=t._viewContainer.get(r),t._viewContainer.move(i,o),a=new ll(e,i),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var o=this._viewContainer.length;r<o;r++){var i=this._viewContainer.get(r);i.context.index=r,i.context.count=o,i.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})},e.prototype._perViewChange=function(e,t){e.context.$implicit=t.item},e}(),ll=function(e,t){this.record=e,this.view=t},cl=function(){function e(e,t){this._viewContainer=e,this._context=new hl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}return Object.defineProperty(e.prototype,"ngIf",{set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfThen",{set:function(e){dl("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfElse",{set:function(e){dl("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),e.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},e}(),hl=function(){this.$implicit=null,this.ngIf=null};function dl(e,t){if(t&&!t.createEmbeddedView)throw new Error(e+" must be a TemplateRef, but received '"+Ie(t)+"'.")}var fl=function(){function e(e){this._viewContainerRef=e}return e.prototype.ngOnChanges=function(e){this._shouldRecreateView(e)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)},e.prototype._shouldRecreateView=function(e){var t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)},e.prototype._hasContextShapeChanged=function(e){var t,n,r=Object.keys(e.previousValue||{}),o=Object.keys(e.currentValue||{});if(r.length===o.length){try{for(var i=l(o),a=i.next();!a.done;a=i.next())if(-1===r.indexOf(a.value))return!0}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1}return!0},e.prototype._updateExistingContext=function(e){var t,n;try{for(var r=l(Object.keys(e)),o=r.next();!o.done;o=r.next()){var i=o.value;this._viewRef.context[i]=this.ngTemplateOutletContext[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e}(),pl=function(){},yl=new ye("DocumentToken"),ml="server";function gl(e){return e===ml}var vl=new N(function(e){return e.complete()});var bl=function(e){function t(t,n){var r=e.call(this,t)||this;r.sources=n,r.completed=0,r.haveValues=0;var o=n.length;r.values=new Array(o);for(var i=0;i<o;i++){var a=K(r,n[i],null,i);a&&r.add(a)}return r}return o(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.values[n]=t,o._hasValue||(o._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,n=this.haveValues,r=this.values,o=r.length;e._hasValue?(this.completed++,this.completed===o&&(n===o&&t.next(r),t.complete())):t.complete()},t}(Y),wl=null;function _l(){return wl}var Cl,El={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Sl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};we.Node&&(Cl=we.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var Il,Dl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.parse=function(e){throw new Error("parse not implemented")},t.makeCurrent=function(){var e;e=new t,wl||(wl=e)},t.prototype.hasProperty=function(e,t){return t in e},t.prototype.setProperty=function(e,t,n){e[t]=n},t.prototype.getProperty=function(e,t){return e[t]},t.prototype.invoke=function(e,t,n){var r;(r=e)[t].apply(r,h(n))},t.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},t.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},t.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},t.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return El},enumerable:!0,configurable:!0}),t.prototype.contains=function(e,t){return Cl.call(e,t)},t.prototype.querySelector=function(e,t){return e.querySelector(t)},t.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},t.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},t.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},t.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},t.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},t.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},t.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},t.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},t.prototype.getInnerHTML=function(e){return e.innerHTML},t.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},t.prototype.getOuterHTML=function(e){return e.outerHTML},t.prototype.nodeName=function(e){return e.nodeName},t.prototype.nodeValue=function(e){return e.nodeValue},t.prototype.type=function(e){return e.type},t.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},t.prototype.firstChild=function(e){return e.firstChild},t.prototype.nextSibling=function(e){return e.nextSibling},t.prototype.parentElement=function(e){return e.parentNode},t.prototype.childNodes=function(e){return e.childNodes},t.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},t.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.prototype.appendChild=function(e,t){e.appendChild(t)},t.prototype.removeChild=function(e,t){e.removeChild(t)},t.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},t.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},t.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},t.prototype.insertAllBefore=function(e,t,n){n.forEach(function(n){return e.insertBefore(n,t)})},t.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},t.prototype.setInnerHTML=function(e,t){e.innerHTML=t},t.prototype.getText=function(e){return e.textContent},t.prototype.setText=function(e,t){e.textContent=t},t.prototype.getValue=function(e){return e.value},t.prototype.setValue=function(e,t){e.value=t},t.prototype.getChecked=function(e){return e.checked},t.prototype.setChecked=function(e,t){e.checked=t},t.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},t.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},t.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},t.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},t.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},t.prototype.createScriptTag=function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r},t.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},t.prototype.createShadowRoot=function(e){return e.createShadowRoot()},t.prototype.getShadowRoot=function(e){return e.shadowRoot},t.prototype.getHost=function(e){return e.host},t.prototype.clone=function(e){return e.cloneNode(!0)},t.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},t.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},t.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},t.prototype.addClass=function(e,t){e.classList.add(t)},t.prototype.removeClass=function(e,t){e.classList.remove(t)},t.prototype.hasClass=function(e,t){return e.classList.contains(t)},t.prototype.setStyle=function(e,t,n){e.style[t]=n},t.prototype.removeStyle=function(e,t){e.style[t]=""},t.prototype.getStyle=function(e,t){return e.style[t]},t.prototype.hasStyle=function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:r.length>0},t.prototype.tagName=function(e){return e.tagName},t.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var o=n.item(r);t.set(o.name,o.value)}return t},t.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},t.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},t.prototype.getAttribute=function(e,t){return e.getAttribute(t)},t.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},t.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},t.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},t.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},t.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},t.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},t.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},t.prototype.getDefaultDocument=function(){return document},t.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},t.prototype.getTitle=function(e){return e.title},t.prototype.setTitle=function(e,t){e.title=t||""},t.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},t.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},t.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},t.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},t.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},t.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},t.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},t.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},t.prototype.adoptNode=function(e){return document.adoptNode(e)},t.prototype.getHref=function(e){return e.getAttribute("href")},t.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Tl.hasOwnProperty(t)&&(t=Tl[t]))}return Sl[t]||t},t.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},t.prototype.getHistory=function(){return window.history},t.prototype.getLocation=function(){return window.location},t.prototype.getBaseHref=function(e){var t,n=kl||(kl=document.querySelector("base"))?kl.getAttribute("href"):null;return null==n?null:(t=n,Il||(Il=document.createElement("a")),Il.setAttribute("href",t),"/"===Il.pathname.charAt(0)?Il.pathname:"/"+Il.pathname)},t.prototype.resetBaseElement=function(){kl=null},t.prototype.getUserAgent=function(){return window.navigator.userAgent},t.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},t.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},t.prototype.getComputedStyle=function(e){return getComputedStyle(e)},t.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},t.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},t.prototype.supportsCookies=function(){return!0},t.prototype.getCookie=function(e){return al(document.cookie,e)},t.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},t}(function(e){function t(){var t=e.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],o=0;o<r.length;o++)if(null!=t.getStyle(n,r[o]+"AnimationName")){t._animationPrefix="-"+r[o].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=i[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}return o(t,e),t.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},t.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},t.prototype.supportsDOMEvents=function(){return!0},t.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},t.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},t.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},t.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},t}(function(){function e(){this.resourceLoaderType=null}return Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),e}())),kl=null,xl=yl;function Nl(){return!!window.history.pushState}var Al=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._init(),n}return o(t,e),t.prototype._init=function(){this.location=_l().getLocation(),this._history=_l().getHistory()},t.prototype.getBaseHrefFromDOM=function(){return _l().getBaseHref(this._doc)},t.prototype.onPopState=function(e){_l().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},t.prototype.onHashChange=function(e){_l().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(t.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),t.prototype.pushState=function(e,t,n){Nl()?this._history.pushState(e,t,n):this.location.hash=n},t.prototype.replaceState=function(e,t,n){Nl()?this._history.replaceState(e,t,n):this.location.hash=n},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},a([s(0,xe(xl)),u("design:paramtypes",[Object])],t)}(_u),Pl=new ye("TRANSITION_ID"),Ol=[{provide:Tt,useFactory:function(e,t,n){return function(){n.get(It).donePromise.then(function(){var n=_l();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(function(t){return n.getAttribute(t,"ng-transition")===e}).forEach(function(e){return n.remove(e)})})}},deps:[Pl,xl,je],multi:!0}],Ml=function(){function e(){}return e.init=function(){var t;t=new e,hn=t},e.prototype.addToWindow=function(e){we.getAngularTestability=function(t,n){void 0===n&&(n=!0);var r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},we.getAllAngularTestabilities=function(){return e.getAllTestabilities()},we.getAllAngularRootElements=function(){return e.getAllRootElements()},we.frameworkStabilizers||(we.frameworkStabilizers=[]),we.frameworkStabilizers.push(function(e){var t=we.getAllAngularTestabilities(),n=t.length,r=!1,o=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(o)})})},e.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?_l().isShadowRoot(t)?this.findTestabilityInTree(e,_l().getHost(t),!0):this.findTestabilityInTree(e,_l().parentElement(t),!0):null},e}();function Rl(e,t){"undefined"!=typeof COMPILED&&COMPILED||((we.ng=we.ng||{})[e]=t)}var Ll={ApplicationRef:_n,NgZone:en};function Vl(e){return Mn(e)}var Fl=new ye("EventManagerPlugins"),jl=function(){function e(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},e.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error("No event manager plugin found for event "+e)},a([s(0,xe(Fl))],e)}(),Bl=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,t,n){var r=_l().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target "+r+" for event "+t);return this.addEventListener(r,t,n)},e}(),ql=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}(),Ul=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(t.head),n}return o(t,e),t.prototype._addStylesToHost=function(e,t){var n=this;e.forEach(function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))})},t.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},t.prototype.removeHost=function(e){this._hostNodes.delete(e)},t.prototype.onStylesAdded=function(e){var t=this;this._hostNodes.forEach(function(n){return t._addStylesToHost(e,n)})},t.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return _l().remove(e)})},a([s(0,xe(xl))],t)}(ql),zl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Gl=/%COMP%/g,Wl="_nghost-%COMP%",Hl="_ngcontent-%COMP%";function Ql(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?Ql(e,o,n):(o=o.replace(Gl,e),n.push(o))}return n}function Kl(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var $l=function(){function e(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new Yl(e)}return e.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case rt.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new ec(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case rt.Native:case rt.ShadowDom:return new tc(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=Ql(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}(),Yl=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,t){return t?document.createElementNS(zl[t],e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,t){e.appendChild(t)},e.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},e.prototype.removeChild=function(e,t){e&&e.removeChild(t)},e.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,t,n,r){if(r){t=r+":"+t;var o=zl[r];o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)},e.prototype.removeAttribute=function(e,t,n){if(n){var r=zl[n];r?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t)}else e.removeAttribute(t)},e.prototype.addClass=function(e,t){e.classList.add(t)},e.prototype.removeClass=function(e,t){e.classList.remove(t)},e.prototype.setStyle=function(e,t,n,r){r&Sn.DashCase?e.style.setProperty(t,n,r&Sn.Important?"important":""):e.style[t]=n},e.prototype.removeStyle=function(e,t,n){n&Sn.DashCase?e.style.removeProperty(t):e.style[t]=""},e.prototype.setProperty=function(e,t,n){Zl(t,"property"),e[t]=n},e.prototype.setValue=function(e,t){e.nodeValue=t},e.prototype.listen=function(e,t,n){return Zl(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Kl(n)):this.eventManager.addEventListener(e,t,Kl(n))},e}(),Jl="@".charCodeAt(0);function Zl(e,t){if(e.charCodeAt(0)===Jl)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Xl,ec=function(e){function t(t,n,r){var o=e.call(this,t)||this;o.component=r;var i=Ql(r.id,r.styles,[]);return n.addStyles(i),o.contentAttr=Hl.replace(Gl,r.id),o.hostAttr=Wl.replace(Gl,r.id),o}return o(t,e),t.prototype.applyToHost=function(t){e.prototype.setAttribute.call(this,t,this.hostAttr,"")},t.prototype.createElement=function(t,n){var r=e.prototype.createElement.call(this,t,n);return e.prototype.setAttribute.call(this,r,this.contentAttr,""),r},t}(Yl),tc=function(e){function t(t,n,r,o){var i=e.call(this,t)||this;i.sharedStylesHost=n,i.hostEl=r,i.component=o,i.shadowRoot=o.encapsulation===rt.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var a=Ql(o.id,o.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],i.shadowRoot.appendChild(u)}return i}return o(t,e),t.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},t.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},t.prototype.appendChild=function(t,n){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.insertBefore=function(t,n,r){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(t),n,r)},t.prototype.removeChild=function(t,n){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.parentNode=function(t){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(t)))},t}(Yl),nc="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},rc=nc("addEventListener"),oc=nc("removeEventListener"),ic={},ac="__zone_symbol__propagationStopped";"undefined"!=typeof Zone&&Zone[nc("BLACK_LISTED_EVENTS")]&&(Xl={});var sc=function(e){return!!Xl&&Xl.hasOwnProperty(e)},uc=function(e){var t=ic[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var o=n.slice(),i=0;i<o.length&&!0!==e[ac];i++){var a;(a=o[i]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},lc=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.ngZone=n,r&&gl(r)||o.patchEvent(),o}return o(t,e),t.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[ac]=!0),e&&e.apply(this,arguments)}}},t.prototype.supports=function(e){return!0},t.prototype.addEventListener=function(e,t,n){var r=this,o=n;if(!e[rc]||en.isInAngularZone()&&!sc(t))e.addEventListener(t,o,!1);else{var i=ic[t];i||(i=ic[t]=nc("ANGULAR"+t+"FALSE"));var a=e[i],s=a&&a.length>0;a||(a=e[i]=[]);var u=sc(t)?Zone.root:Zone.current;if(0===a.length)a.push({zone:u,handler:o});else{for(var l=!1,c=0;c<a.length;c++)if(a[c].handler===o){l=!0;break}l||a.push({zone:u,handler:o})}s||e[rc](t,uc,!1)}return function(){return r.removeEventListener(e,t,o)}},t.prototype.removeEventListener=function(e,t,n){var r=e[oc];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);var o=ic[t],i=o&&e[o];if(!i)return e.removeEventListener.apply(e,[t,n,!1]);for(var a=!1,s=0;s<i.length;s++)if(i[s].handler===n){a=!0,i.splice(s,1);break}a?0===i.length&&r.apply(e,[t,uc,!1]):e.removeEventListener.apply(e,[t,n,!1])},a([s(0,xe(xl)),s(2,Ne()),s(2,xe(At))],t)}(Bl),cc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},hc=new ye("HammerGestureConfig"),dc=new ye("HammerLoader"),fc=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},e}(),pc=function(e){function t(t,n,r,o){var i=e.call(this,t)||this;return i._config=n,i.console=r,i.loader=o,i}return o(t,e),t.prototype.supports=function(e){return!(!cc.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+e+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},t.prototype.addEventListener=function(e,t,n){var r=this,o=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var i=!1,a=function(){i=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});i||(a=r.addEventListener(e,t,n))}).catch(function(){r.console.warn('The "'+t+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return o.runOutsideAngular(function(){var i=r._config.buildHammer(e),a=function(e){o.runGuarded(function(){n(e)})};return i.on(t,a),function(){i.off(t,a),"function"==typeof i.destroy&&i.destroy()}})},t.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},a([s(0,xe(xl)),s(1,xe(hc)),s(3,Ne()),s(3,xe(dc))],t)}(Bl),yc=["alt","control","meta","shift"],mc={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},gc=function(e){function t(t){return e.call(this,t)||this}var n;return o(t,e),n=t,t.prototype.supports=function(e){return null!=n.parseEventName(e)},t.prototype.addEventListener=function(e,t,r){var o=n.parseEventName(t),i=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return _l().onAndCancel(e,o.domEventName,i)})},t.parseEventName=function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var o=n._normalizeKey(t.pop()),i="";if(yc.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),i+=e+".")}),i+=o,0!=t.length||0===o.length)return null;var a={};return a.domEventName=r,a.fullKey=i,a},t.getEventFullKey=function(e){var t="",n=_l().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),yc.forEach(function(r){r!=n&&(0,mc[r])(e)&&(t+=r+".")}),t+=n},t.eventCallback=function(e,t,r){return function(o){n.getEventFullKey(o)===e&&r.runGuarded(function(){return t(o)})}},t._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},n=a([s(0,xe(xl))],t)}(Bl),vc=function(){},bc=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n}return o(t,e),t.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case Nr.NONE:return t;case Nr.HTML:return t instanceof _c?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=null;try{pr=pr||new ur(e);var r=t?String(t):"";n=pr.getInertBodyElement(r);var o=5,i=r;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,r=i,i=n.innerHTML,n=pr.getInertBodyElement(r)}while(r!==i);var a=new Er,s=a.sanitizeChildren(Dr(n)||n);return yn()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),s}finally{if(n)for(var u=Dr(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(this._doc,String(t)));case Nr.STYLE:return t instanceof Cc?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(xr);return t&&hr(t[1])===t[1]||e.match(kr)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var o=e.charAt(r);"'"===o&&n?t=!t:'"'===o&&t&&(n=!n)}return t&&n}(e)?e:(yn()&&console.warn("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(t));case Nr.SCRIPT:if(t instanceof Ec)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case Nr.URL:return t instanceof Tc||t instanceof Sc?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),hr(String(t)));case Nr.RESOURCE_URL:if(t instanceof Tc)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},t.prototype.checkNotSafeValue=function(e,t){if(e instanceof wc)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},t.prototype.bypassSecurityTrustHtml=function(e){return new _c(e)},t.prototype.bypassSecurityTrustStyle=function(e){return new Cc(e)},t.prototype.bypassSecurityTrustScript=function(e){return new Ec(e)},t.prototype.bypassSecurityTrustUrl=function(e){return new Sc(e)},t.prototype.bypassSecurityTrustResourceUrl=function(e){return new Tc(e)},a([s(0,xe(xl))],t)}(vc),wc=function(){function e(e){this.changingThisBreaksApplicationSecurity=e}return e.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},e}(),_c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTypeName=function(){return"HTML"},t}(wc),Cc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTypeName=function(){return"Style"},t}(wc),Ec=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTypeName=function(){return"Script"},t}(wc),Sc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTypeName=function(){return"URL"},t}(wc),Tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTypeName=function(){return"ResourceURL"},t}(wc),Ic=gn(nr,"browser",[{provide:At,useValue:"browser"},{provide:Nt,useValue:function(){Dl.makeCurrent(),Ml.init()},multi:!0},{provide:_u,useClass:Al,deps:[xl]},{provide:xl,useFactory:function(){return document},deps:[]}]);function Dc(){return new dt}var kc=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var t;return t=e,e.withServerTransition=function(e){return{ngModule:t,providers:[{provide:Dt,useValue:e.appId},{provide:Pl,useExisting:Dt},Ol]}},t=a([s(0,Ne()),s(0,Pe()),s(0,xe(t))],e)}();"undefined"!=typeof window&&window;var xc=function(){function e(){}return Object.defineProperty(e.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},e.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},e.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},e}(),Nc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t}(xc);function Ac(e){return null==e||0===e.length}var Pc=new ye("NgValidators"),Oc=new ye("NgAsyncValidators"),Mc=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Rc=function(){function e(){}return e.min=function(e){return function(t){if(Ac(t.value)||Ac(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}},e.max=function(e){return function(t){if(Ac(t.value)||Ac(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}},e.required=function(e){return Ac(e.value)?{required:!0}:null},e.requiredTrue=function(e){return!0===e.value?null:{required:!0}},e.email=function(e){return Ac(e.value)?null:Mc.test(e.value)?null:{email:!0}},e.minLength=function(e){return function(t){if(Ac(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}},e.maxLength=function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}},e.pattern=function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(Ac(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r},e.nullValidator=function(e){return null},e.compose=function(e){if(!e)return null;var t=e.filter(Lc);return 0==t.length?null:function(e){return Fc(function(e,n){return t.map(function(t){return t(e)})}(e))}},e.composeAsync=function(e){if(!e)return null;var t=e.filter(Lc);return 0==t.length?null:function(e){return function e(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&d(n[0])&&(n=n[0]),0===n.length?vl:t?e(n).pipe(J(function(e){return t.apply(void 0,e)})):new N(function(e){return new bl(e,n)})}(function(e,n){return t.map(function(t){return t(e)})}(e).map(Vc)).pipe(J(Fc))}},e}();function Lc(e){return null!=e}function Vc(e){var t,n=St(e)?te(e):e;if(!(t=n)||"function"!=typeof t.subscribe)throw new Error("Expected validator to return Promise or Observable.");return n}function Fc(e){var t=e.reduce(function(e,t){return null!=t?i({},e,t):e},{});return 0===Object.keys(t).length?null:t}var jc=new ye("NgValueAccessor"),Bc=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),qc=new ye("CompositionEventMode"),Uc=function(){function e(e,t,n){var r;this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=_l()?_l().getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},a([s(2,Ne()),s(2,xe(qc))],e)}();function zc(e){return e.validate?function(t){return e.validate(t)}:e}function Gc(e){return e.validate?function(t){return e.validate(t)}:e}var Wc=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();function Hc(){throw new Error("unimplemented")}var Qc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return o(t,e),Object.defineProperty(t.prototype,"validator",{get:function(){return Hc()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return Hc()},enumerable:!0,configurable:!0}),t}(xc),Kc=function(){function e(){this._accessors=[]}return e.prototype.add=function(e,t){this._accessors.push([e,t])},e.prototype.remove=function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},e.prototype.select=function(e){var t=this;this._accessors.forEach(function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})},e.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},e}(),$c=function(){function e(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){this._control=this._injector.get(Qc),this._checkName(),this._registry.add(this._control,this)},e.prototype.ngOnDestroy=function(){this._registry.remove(this)},e.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},e.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},e.prototype.fireUncheck=function(e){this.writeValue(e)},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},e.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},e}(),Yc=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}(),Jc='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Zc='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';function Xc(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var eh=function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Te}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=Xc(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(){return(this._idCounter++).toString()},e.prototype._getOptionId=function(e){var t,n;try{for(var r=l(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i),e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e},e}(),th=function(){function e(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Xc(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},a([s(2,Ne()),s(2,Oe())],e)}();function nh(e,t){return null==e?""+t:("string"==typeof t&&(t="'"+t+"'"),t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var rh=function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Te}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map(function(e){return n._getOptionId(e)});t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var o=n.selectedOptions,i=0;i<o.length;i++){var a=o.item(i),s=t._getOptionValue(a.value);r.push(s)}else for(o=n.options,i=0;i<o.length;i++)(a=o.item(i)).selected&&(s=t._getOptionValue(a.value),r.push(s));t.value=r,e(r)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},e.prototype._getOptionId=function(e){var t,n;try{for(var r=l(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i)._value,e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e},e}(),oh=function(){function e(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(nh(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(nh(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},a([s(2,Ne()),s(2,Oe())],e)}();function ih(e,t){return h(t.path,[e])}function ah(e,t){e||uh(t,"Cannot find control with"),t.valueAccessor||uh(t,"No value accessor for form control with"),e.validator=Rc.compose([e.validator,t.validator]),e.asyncValidator=Rc.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&sh(e,t)})}(e,t),function(e,t){e.registerOnChange(function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&sh(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(function(e){t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})}),t._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(function(){return e.updateValueAndValidity()})})}function sh(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function uh(e,t){var n;throw n=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+n)}function lh(e){return null!=e?Rc.compose(e.map(zc)):null}function ch(e){return null!=e?Rc.composeAsync(e.map(Gc)):null}var hh=[Bc,Yc,Wc,eh,rh,$c],dh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(t.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return ih(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return lh(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return ch(this._asyncValidators)},enumerable:!0,configurable:!0}),t.prototype._checkParentType=function(){},t}(Nc),fh=function(){function e(e){this._cd=e}return Object.defineProperty(e.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),e}(),ph=function(e){function t(t){return e.call(this,t)||this}return o(t,e),a([s(0,Ae())],t)}(fh),yh=function(e){function t(t){return e.call(this,t)||this}return o(t,e),a([s(0,Ae())],t)}(fh);function mh(e){var t=vh(e)?e.validators:e;return Array.isArray(t)?lh(t):t||null}function gh(e,t){var n=vh(t)?t.asyncValidators:e;return Array.isArray(n)?ch(n):n||null}function vh(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var bh=function(){function e(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return"VALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return"INVALID"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return"PENDING"==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return"DISABLED"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return"DISABLED"!==this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),e.prototype.setValidators=function(e){this.validator=mh(e)},e.prototype.setAsyncValidators=function(e){this.asyncValidator=gh(e)},e.prototype.clearValidators=function(){this.validator=null},e.prototype.clearAsyncValidators=function(){this.asyncValidator=null},e.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},e.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},e.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype.markAsPending=function(e){void 0===e&&(e={}),this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},e.prototype.disable=function(e){void 0===e&&(e={}),this.status="DISABLED",this.errors=null,this._forEachChild(function(t){t.disable(i({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!0)})},e.prototype.enable=function(e){void 0===e&&(e={}),this.status="VALID",this._forEachChild(function(t){t.enable(i({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(e),this._onDisabledChange.forEach(function(e){return e(!1)})},e.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},e.prototype.setParent=function(e){this._parent=e},e.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},e.prototype._updateTreeValidity=function(e){void 0===e&&(e={emitEvent:!0}),this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"},e.prototype._runValidator=function(){return this.validator?this.validator(this):null},e.prototype._runAsyncValidator=function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=Vc(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){return t.setErrors(n,{emitEvent:e})})}},e.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},e.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},e.prototype.get=function(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce(function(e,t){return e instanceof _h?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Ch&&e.at(t)||null},e))}(this,e)},e.prototype.getError=function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null},e.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),e.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},e.prototype._initObservables=function(){this.valueChanges=new Xt,this.statusChanges=new Xt},e.prototype._calculateStatus=function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"},e.prototype._anyControlsHaveStatus=function(e){return this._anyControls(function(t){return t.status===e})},e.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},e.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},e.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},e.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},e.prototype._setUpdateStrategy=function(e){vh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},e}(),wh=function(e){function t(t,n,r){void 0===t&&(t=null);var o=e.call(this,mh(n),gh(r,n))||this;return o._onChange=[],o._applyFormState(t),o._setUpdateStrategy(n),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o._initObservables(),o}return o(t,e),t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},t.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},t.prototype._updateValue=function(){},t.prototype._anyControls=function(e){return!1},t.prototype._allControlsDisabled=function(){return this.disabled},t.prototype.registerOnChange=function(e){this._onChange.push(e)},t.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},t.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},t.prototype._forEachChild=function(e){},t.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},t.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},t}(bh),_h=function(e){function t(t,n,r){var o=e.call(this,mh(n),gh(r,n))||this;return o.controls=t,o._initObservables(),o._setUpdateStrategy(n),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return o(t,e),t.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},t.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){n._throwIfControlMissing(r),n.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),Object.keys(e).forEach(function(r){n.controls[r]&&n.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.reset=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)},t.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof wh?t.value:t.getRawValue(),e})},t.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},t.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},t.prototype._forEachChild=function(e){var t=this;Object.keys(this.controls).forEach(function(n){return e(t.controls[n],n)})},t.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})},t.prototype._updateValue=function(){this.value=this._reduceValue()},t.prototype._anyControls=function(e){var t=this,n=!1;return this._forEachChild(function(r,o){n=n||t.contains(o)&&e(r)}),n},t.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})},t.prototype._reduceChildren=function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n},t.prototype._allControlsDisabled=function(){var e,t;try{for(var n=l(Object.keys(this.controls)),r=n.next();!r.done;r=n.next())if(this.controls[r.value].enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return Object.keys(this.controls).length>0||this.disabled},t.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},t}(bh),Ch=function(e){function t(t,n,r){var o=e.call(this,mh(n),gh(r,n))||this;return o.controls=t,o._initObservables(),o._setUpdateStrategy(n),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),o}return o(t,e),t.prototype.at=function(e){return this.controls[e]},t.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},t.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},t.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},t.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(t.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),t.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),e.forEach(function(e,r){n._throwIfControlMissing(r),n.at(r).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),e.forEach(function(e,r){n.at(r)&&n.at(r).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)},t.prototype.reset=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)},t.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof wh?e.value:e.getRawValue()})},t.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},t.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},t.prototype._forEachChild=function(e){this.controls.forEach(function(t,n){e(t,n)})},t.prototype._updateValue=function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})},t.prototype._anyControls=function(e){return this.controls.some(function(t){return t.enabled&&e(t)})},t.prototype._setUpControls=function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})},t.prototype._checkAllValuesPresent=function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: "+n+".")})},t.prototype._allControlsDisabled=function(){var e,t;try{for(var n=l(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.controls.length>0||this.disabled},t.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},t}(bh),Eh=Promise.resolve(null),Sh=function(e){function t(t,n){var r=e.call(this)||this;return r.submitted=!1,r._directives=[],r.ngSubmit=new Xt,r.form=new _h({},lh(t),ch(n)),r}return o(t,e),t.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(t.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),t.prototype.addControl=function(e){var t=this;Eh.then(function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),ah(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)})},t.prototype.getControl=function(e){return this.form.get(e.path)},t.prototype.removeControl=function(e){var t=this;Eh.then(function(){var n,r,o=t._findContainer(e.path);o&&o.removeControl(e.name),(r=(n=t._directives).indexOf(e))>-1&&n.splice(r,1)})},t.prototype.addFormGroup=function(e){var t=this;Eh.then(function(){var n=t._findContainer(e.path),r=new _h({});(function(e,t){null==e&&uh(t,"Cannot find control with"),e.validator=Rc.compose([e.validator,t.validator]),e.asyncValidator=Rc.composeAsync([e.asyncValidator,t.asyncValidator])})(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})},t.prototype.removeFormGroup=function(e){var t=this;Eh.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)})},t.prototype.getFormGroup=function(e){return this.form.get(e.path)},t.prototype.updateModel=function(e,t){var n=this;Eh.then(function(){n.form.get(e.path).setValue(t)})},t.prototype.setValue=function(e){this.control.setValue(e)},t.prototype.onSubmit=function(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t},t.prototype.onReset=function(){this.resetForm()},t.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},t.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},t.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},a([s(0,Ne()),s(0,Ae()),s(0,xe(Pc)),s(1,Ne()),s(1,Ae()),s(1,xe(Oc))],t)}(Nc),Th=function(){function e(){}return e.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},e.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Jc+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Zc)},e.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},e.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Jc+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Zc)},e}(),Ih=function(e){function t(t,n,r){var o=e.call(this)||this;return o._parent=t,o._validators=n,o._asyncValidators=r,o}var n;return o(t,e),n=t,t.prototype._checkParentType=function(){this._parent instanceof n||this._parent instanceof Sh||Th.modelGroupParentException()},n=a([s(0,Oe()),s(0,Pe()),s(1,Ne()),s(1,Ae()),s(1,xe(Pc)),s(2,Ne()),s(2,Ae()),s(2,xe(Oc))],t)}(dh),Dh=Promise.resolve(null),kh=function(e){function t(t,n,r,o){var i=e.call(this)||this;return i.control=new wh,i._registered=!1,i.update=new Xt,i._parent=t,i._rawValidators=n||[],i._rawAsyncValidators=r||[],i.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||uh(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,o=void 0;return t.forEach(function(t){var i;t.constructor===Uc?n=t:(i=t,hh.some(function(e){return i.constructor===e})?(r&&uh(e,"More than one built-in value accessor matches form control with"),r=t):(o&&uh(e,"More than one custom value accessor matches form control with"),o=t))}),o||r||n||(uh(e,"No valid value accessor for form control with"),null)}(i,o),i}return o(t,e),t.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Te(t,n.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},t.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(t.prototype,"path",{get:function(){return this._parent?ih(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validator",{get:function(){return lh(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asyncValidator",{get:function(){return ch(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),t.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},t.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},t.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},t.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},t.prototype._setUpStandalone=function(){ah(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},t.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},t.prototype._checkParentType=function(){!(this._parent instanceof Ih)&&this._parent instanceof dh?Th.formGroupNameException():this._parent instanceof Ih||this._parent instanceof Sh||Th.modelParentException()},t.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Th.missingNameException()},t.prototype._updateValue=function(e){var t=this;Dh.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},t.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;Dh.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})},a([s(0,Ne()),s(0,Oe()),s(1,Ne()),s(1,Ae()),s(1,xe(Pc)),s(2,Ne()),s(2,Ae()),s(2,xe(Oc)),s(3,Ne()),s(3,Ae()),s(3,xe(jc))],t)}(Qc),xh=function(){},Nh=function(){},Ah=function(){},Ph=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return o(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return o(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(w)),Oh=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),Mh=function(e){function t(n,r){void 0===r&&(r=Oh.now);var o=e.call(this,n,function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return o(t,e),t.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,o):e.prototype.schedule.call(this,n,r,o)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Oh);function Rh(e,t,n,r){return p(n)&&(r=n,n=void 0),r?Rh(e,t,n).pipe(J(function(e){return d(e)?r.apply(void 0,e):r(e)})):new N(function(r){!function e(t,n,r,o,i){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,i),a=function(){return s.removeEventListener(n,r,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),a=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var l=t;t.addListener(n,r),a=function(){return l.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var c=0,h=t.length;c<h;c++)e(t[c],n,r,o,i)}o.add(a)}(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function Lh(e,t){return function(n){return n.lift(new Vh(e,t))}}Object;var Vh=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Fh(e,this.predicate,this.thisArg))},e}(),Fh=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.predicate=n,o.thisArg=r,o.count=0,o}return o(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(D);function jh(e){return function(t){return t.lift(new Bh(e))}}var Bh=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new qh(e),r=K(n,this.notifier);return r&&!r.closed?(n.add(r),t.subscribe(n)):n},e}(),qh=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.complete()},t.prototype.notifyComplete=function(){},t}(Y),Uh=function(e){function t(){var n=e.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,t.prototype),n}return o(t,e),t}(Error),zh=function(){function e(e){if(this.total=e,this.total<0)throw new Uh}return e.prototype.call=function(e,t){return t.subscribe(new Gh(e,this.total))},e}(),Gh=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return o(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(D);function Wh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new Hh(e,n))}}var Hh=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new Qh(e,this.observables,this.project))},e}(),Qh=function(e){function t(t,n,r){var o=e.call(this,t)||this;o.observables=n,o.project=r,o.toRespond=[];var i=n.length;o.values=new Array(i);for(var a=0;a<i;a++)o.toRespond.push(a);for(a=0;a<i;a++){var s=n[a];o.add(K(o,s,s,a))}return o}return o(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.values[n]=t;var i=this.toRespond;if(i.length>0){var a=i.indexOf(n);-1!==a&&i.splice(a,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Y);function Kh(e){return parseInt(""+e,10)}function $h(e){return void 0!==e&&null!==e?""+e:""}function Yh(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function Jh(e){return void 0!==e&&null!==e}var Zh=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),Xh=function(){function e(){this.dismissible=!0,this.type="warning"}return e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ed=function(){function e(e,t,n){this._renderer=t,this._element=n,this.close=new Xt,this.dismissible=e.dismissible,this.type=e.type}return e.prototype.closeHandler=function(){this.close.emit(null)},e.prototype.ngOnChanges=function(e){var t=e.type;t&&!t.firstChange&&(this._renderer.removeClass(this._element.nativeElement,"alert-"+t.previousValue),this._renderer.addClass(this._element.nativeElement,"alert-"+t.currentValue))},e.prototype.ngOnInit=function(){this._renderer.addClass(this._element.nativeElement,"alert-"+this.type)},e}(),td=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),nd=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),rd=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),od=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),id=function(){function e(e,t,n){this.year=Yh(e)?e:null,this.month=Yh(t)?t:null,this.day=Yh(n)?n:null}return e.from=function(t){return t instanceof e?t:t?new e(t.year,t.month,t.day):null},e.prototype.equals=function(e){return e&&this.year===e.year&&this.month===e.month&&this.day===e.day},e.prototype.before=function(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day<e.day:this.month<e.month:this.year<e.year)},e.prototype.after=function(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day>e.day:this.month>e.month:this.year>e.year)},e}();function ad(e){return new id(e.getFullYear(),e.getMonth()+1,e.getDate())}function sd(e){var t=new Date(e.year,e.month-1,e.day,12);return isNaN(t.getTime())||t.setFullYear(e.year),t}function ud(){return new cd}var ld=function(){function e(){}return e.ngInjectableDef=pe({factory:ud,token:e,providedIn:"root"}),e}(),cd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getDaysPerWeek=function(){return 7},t.prototype.getMonths=function(){return[1,2,3,4,5,6,7,8,9,10,11,12]},t.prototype.getWeeksPerMonth=function(){return 6},t.prototype.getNext=function(e,t,n){void 0===t&&(t="d"),void 0===n&&(n=1);var r=sd(e);switch(t){case"y":return new id(e.year+n,1,1);case"m":r=new Date(e.year,e.month+n-1,1,12);break;case"d":r.setDate(r.getDate()+n);break;default:return e}return ad(r)},t.prototype.getPrev=function(e,t,n){return void 0===t&&(t="d"),void 0===n&&(n=1),this.getNext(e,t,-n)},t.prototype.getWeekday=function(e){var t=sd(e).getDay();return 0===t?7:t},t.prototype.getWeekNumber=function(e,t){7===t&&(t=0);var n=sd(e[(11-t)%7]);n.setDate(n.getDate()+4-(n.getDay()||7));var r=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((r-n.getTime())/864e5)/7)+1},t.prototype.getToday=function(){return ad(new Date)},t.prototype.isValid=function(e){if(!(e&&Yh(e.year)&&Yh(e.month)&&Yh(e.day)))return!1;if(0===e.year)return!1;var t=sd(e);return!isNaN(t.getTime())&&t.getFullYear()===e.year&&t.getMonth()+1===e.month&&t.getDate()===e.day},t}(ld);function hd(e,t){return!function(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)}(e,t)}function dd(e,t,n){return e&&t&&e.before(t)?t:e&&n&&e.after(n)?n:e}function fd(e,t){var n=t.minDate,r=t.maxDate,o=t.disabled,i=t.markDisabled;return!(!Jh(e)||o||i&&i(e,{year:e.year,month:e.month})||n&&e.before(n)||r&&e.after(r))}var pd=function(){function e(){}return e.prototype.getDayNumerals=function(e){return""+e.day},e.prototype.getWeekNumerals=function(e){return""+e},e.prototype.getYearNumerals=function(e){return""+e},e.ngInjectableDef=pe({factory:function(){return e=tt(rr),new yd(e);var e},token:e,providedIn:"root"}),e}(),yd=function(e){function t(t){var n=e.call(this)||this;n._locale=t;var r=Nu(t,Iu.Standalone,Du.Short);return n._weekdaysShort=r.map(function(e,t){return r[(t+1)%7]}),n._monthsShort=Au(t,Iu.Standalone,Du.Abbreviated),n._monthsFull=Au(t,Iu.Standalone,Du.Wide),n}return o(t,e),t.prototype.getWeekdayShortName=function(e){return this._weekdaysShort[e-1]},t.prototype.getMonthShortName=function(e){return this._monthsShort[e-1]},t.prototype.getMonthFullName=function(e){return this._monthsFull[e-1]},t.prototype.getDayAriaLabel=function(e){return function(e,t,n,r){var o=function(e){if(nl(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();var t,n=parseFloat(e);if(!isNaN(e-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var r=c(e.split("-").map(function(e){return+e}),3);return new Date(r[0],r[1]-1,r[2])}if(t=e.match(Bu))return function(e){var t=new Date(0),n=0,r=0,o=e[8]?t.setUTCFullYear:t.setFullYear,i=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),o.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));var a=Number(e[4]||0)-n,s=Number(e[5]||0)-r,u=Number(e[6]||0),l=Math.round(1e3*parseFloat("0."+(e[7]||0)));return i.call(t,a,s,u,l),t}(t)}var o=new Date(e);if(!nl(o))throw new Error('Unable to convert "'+e+'" into a date');return o}(e);t=function e(t,n){var r=function(e){return ju(e)[0]}(t);if(qu[r]=qu[r]||{},qu[r][n])return qu[r][n];var o="";switch(n){case"shortDate":o=Pu(t,ku.Short);break;case"mediumDate":o=Pu(t,ku.Medium);break;case"longDate":o=Pu(t,ku.Long);break;case"fullDate":o=Pu(t,ku.Full);break;case"shortTime":o=Ou(t,ku.Short);break;case"mediumTime":o=Ou(t,ku.Medium);break;case"longTime":o=Ou(t,ku.Long);break;case"fullTime":o=Ou(t,ku.Full);break;case"short":var i=e(t,"shortTime"),a=e(t,"shortDate");o=Hu(Mu(t,ku.Short),[i,a]);break;case"medium":var s=e(t,"mediumTime"),u=e(t,"mediumDate");o=Hu(Mu(t,ku.Medium),[s,u]);break;case"long":var l=e(t,"longTime"),c=e(t,"longDate");o=Hu(Mu(t,ku.Long),[l,c]);break;case"full":var h=e(t,"fullTime"),d=e(t,"fullDate");o=Hu(Mu(t,ku.Full),[h,d])}return o&&(qu[r][n]=o),o}(n,t)||t;for(var i,a=[];t;){if(!(i=Uu.exec(t))){a.push(t);break}var s=(a=a.concat(i.slice(1))).pop();if(!s)break;t=s}var u=o.getTimezoneOffset();r&&(u=tl(r,u),o=function(e,t,n){var r=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(tl(t,r)-r))}(o,r));var l="";return a.forEach(function(e){var t=function(e){if(el[e])return el[e];var t;switch(e){case"G":case"GG":case"GGG":t=$u(Wu.Eras,Du.Abbreviated);break;case"GGGG":t=$u(Wu.Eras,Du.Wide);break;case"GGGGG":t=$u(Wu.Eras,Du.Narrow);break;case"y":t=Ku(Gu.FullYear,1,0,!1,!0);break;case"yy":t=Ku(Gu.FullYear,2,0,!0,!0);break;case"yyy":t=Ku(Gu.FullYear,3,0,!1,!0);break;case"yyyy":t=Ku(Gu.FullYear,4,0,!1,!0);break;case"M":case"L":t=Ku(Gu.Month,1,1);break;case"MM":case"LL":t=Ku(Gu.Month,2,1);break;case"MMM":t=$u(Wu.Months,Du.Abbreviated);break;case"MMMM":t=$u(Wu.Months,Du.Wide);break;case"MMMMM":t=$u(Wu.Months,Du.Narrow);break;case"LLL":t=$u(Wu.Months,Du.Abbreviated,Iu.Standalone);break;case"LLLL":t=$u(Wu.Months,Du.Wide,Iu.Standalone);break;case"LLLLL":t=$u(Wu.Months,Du.Narrow,Iu.Standalone);break;case"w":t=Xu(1);break;case"ww":t=Xu(2);break;case"W":t=Xu(1,!0);break;case"d":t=Ku(Gu.Date,1);break;case"dd":t=Ku(Gu.Date,2);break;case"E":case"EE":case"EEE":t=$u(Wu.Days,Du.Abbreviated);break;case"EEEE":t=$u(Wu.Days,Du.Wide);break;case"EEEEE":t=$u(Wu.Days,Du.Narrow);break;case"EEEEEE":t=$u(Wu.Days,Du.Short);break;case"a":case"aa":case"aaa":t=$u(Wu.DayPeriods,Du.Abbreviated);break;case"aaaa":t=$u(Wu.DayPeriods,Du.Wide);break;case"aaaaa":t=$u(Wu.DayPeriods,Du.Narrow);break;case"b":case"bb":case"bbb":t=$u(Wu.DayPeriods,Du.Abbreviated,Iu.Standalone,!0);break;case"bbbb":t=$u(Wu.DayPeriods,Du.Wide,Iu.Standalone,!0);break;case"bbbbb":t=$u(Wu.DayPeriods,Du.Narrow,Iu.Standalone,!0);break;case"B":case"BB":case"BBB":t=$u(Wu.DayPeriods,Du.Abbreviated,Iu.Format,!0);break;case"BBBB":t=$u(Wu.DayPeriods,Du.Wide,Iu.Format,!0);break;case"BBBBB":t=$u(Wu.DayPeriods,Du.Narrow,Iu.Format,!0);break;case"h":t=Ku(Gu.Hours,1,-12);break;case"hh":t=Ku(Gu.Hours,2,-12);break;case"H":t=Ku(Gu.Hours,1);break;case"HH":t=Ku(Gu.Hours,2);break;case"m":t=Ku(Gu.Minutes,1);break;case"mm":t=Ku(Gu.Minutes,2);break;case"s":t=Ku(Gu.Seconds,1);break;case"ss":t=Ku(Gu.Seconds,2);break;case"S":t=Ku(Gu.FractionalSeconds,1);break;case"SS":t=Ku(Gu.FractionalSeconds,2);break;case"SSS":t=Ku(Gu.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Yu(zu.Short);break;case"ZZZZZ":t=Yu(zu.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Yu(zu.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Yu(zu.Long);break;default:return null}return el[e]=t,t}(e);l+=t?t(o,n,u):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}(new Date(e.year,e.month-1,e.day),"fullDate",this._locale)},t}(pd),md=function(){function e(e,t){this._calendar=e,this._i18n=t,this._model$=new R,this._select$=new R,this._state={disabled:!1,displayMonths:1,firstDayOfWeek:1,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectBoxes:{years:[],months:[]},selectedDate:null}}return Object.defineProperty(e.prototype,"model$",{get:function(){return this._model$.pipe(Lh(function(e){return e.months.length>0}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"select$",{get:function(){return this._select$.pipe(Lh(function(e){return null!==e}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dayTemplateData",{set:function(e){this._state.dayTemplateData!==e&&this._nextState({dayTemplateData:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{set:function(e){this._state.disabled!==e&&this._nextState({disabled:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMonths",{set:function(e){Yh(e=Kh(e))&&e>0&&this._state.displayMonths!==e&&this._nextState({displayMonths:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstDayOfWeek",{set:function(e){Yh(e=Kh(e))&&e>=0&&this._state.firstDayOfWeek!==e&&this._nextState({firstDayOfWeek:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusVisible",{set:function(e){this._state.focusVisible===e||this._state.disabled||this._nextState({focusVisible:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{set:function(e){var t=this.toValidDate(e,null);hd(this._state.maxDate,t)&&this._nextState({maxDate:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markDisabled",{set:function(e){this._state.markDisabled!==e&&this._nextState({markDisabled:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minDate",{set:function(e){var t=this.toValidDate(e,null);hd(this._state.minDate,t)&&this._nextState({minDate:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"navigation",{set:function(e){this._state.navigation!==e&&this._nextState({navigation:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outsideDays",{set:function(e){this._state.outsideDays!==e&&this._nextState({outsideDays:e})},enumerable:!0,configurable:!0}),e.prototype.focus=function(e){!this._state.disabled&&this._calendar.isValid(e)&&hd(this._state.focusDate,e)&&this._nextState({focusDate:e})},e.prototype.focusMove=function(e,t){this.focus(this._calendar.getNext(this._state.focusDate,e,t))},e.prototype.focusSelect=function(){fd(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})},e.prototype.open=function(e){var t=this.toValidDate(e,this._calendar.getToday());this._state.disabled||this._nextState({firstDate:t})},e.prototype.select=function(e,t){void 0===t&&(t={});var n=this.toValidDate(e,null);this._state.disabled||(hd(this._state.selectedDate,n)&&this._nextState({selectedDate:n}),t.emitEvent&&fd(n,this._state)&&this._select$.next(n))},e.prototype.toValidDate=function(e,t){var n=id.from(e);return void 0===t&&(t=this._calendar.getToday()),this._calendar.isValid(n)?n:t},e.prototype._nextState=function(e){var t=this._updateState(e);this._patchContexts(t),this._state=t,this._model$.next(this._state)},e.prototype._patchContexts=function(e){var t=e.months,n=e.displayMonths,r=e.selectedDate,o=e.focusDate,i=e.focusVisible,a=e.disabled,s=e.outsideDays;e.months.forEach(function(e){e.weeks.forEach(function(u){u.days.forEach(function(u){o&&(u.context.focused=o.equals(u.date)&&i),u.tabindex=!a&&u.date.equals(o)&&o.month===e.number?0:-1,!0===a&&(u.context.disabled=!0),void 0!==r&&(u.context.selected=null!==r&&r.equals(u.date)),e.number!==u.date.month&&(u.hidden="hidden"===s||"collapsed"===s||n>1&&u.date.after(t[0].firstDate)&&u.date.before(t[n-1].lastDate))})})})},e.prototype._updateState=function(e){var t,n,r=Object.assign({},this._state,e),o=r.firstDate;if(("minDate"in e||"maxDate"in e)&&(function(e,t){if(t&&e&&t.before(e))throw new Error("'maxDate' "+t+" should be greater than 'minDate' "+e)}(r.minDate,r.maxDate),r.focusDate=dd(r.focusDate,r.minDate,r.maxDate),r.firstDate=dd(r.firstDate,r.minDate,r.maxDate),o=r.focusDate),"disabled"in e&&(r.focusVisible=!1),"selectedDate"in e&&0===this._state.months.length&&(o=r.selectedDate),"focusDate"in e&&(r.focusDate=dd(r.focusDate,r.minDate,r.maxDate),o=r.focusDate,0!==r.months.length&&!r.focusDate.before(r.firstDate)&&!r.focusDate.after(r.lastDate)))return r;if("firstDate"in e&&(r.firstDate=dd(r.firstDate,r.minDate,r.maxDate),o=r.firstDate),o){var i=function(e,t,n,r,o){var i=n.displayMonths,a=n.months,s=a.splice(0,a.length);return Array.from({length:i},function(n,r){var i=e.getNext(t,"m",r);if(a[r]=null,!o){var u=s.findIndex(function(e){return e.firstDate.equals(i)});-1!==u&&(a[r]=s.splice(u,1)[0])}return i}).forEach(function(t,o){null===a[o]&&(a[o]=function(e,t,n,r,o){void 0===o&&(o={});var i=n.dayTemplateData,a=n.minDate,s=n.maxDate,u=n.firstDayOfWeek,l=n.markDisabled,c=n.outsideDays;o.firstDate=null,o.lastDate=null,o.number=t.month,o.year=t.year,o.weeks=o.weeks||[],o.weekdays=o.weekdays||[],t=function(e,t,n){var r=e.getDaysPerWeek(),o=new id(t.year,t.month,1),i=e.getWeekday(o)%r;return e.getPrev(o,"d",(r+i-n)%r)}(e,t,u);for(var h=0;h<e.getWeeksPerMonth();h++){var d=o.weeks[h];d||(d=o.weeks[h]={number:0,days:[],collapsed:!0});for(var f=d.days,p=0;p<e.getDaysPerWeek();p++){0===h&&(o.weekdays[p]=e.getWeekday(t));var y=new id(t.year,t.month,t.day),m=e.getNext(y),g=r.getDayAriaLabel(y),v=!!(a&&y.before(a)||s&&y.after(s));!v&&l&&(v=l(y,{month:o.number,year:o.year}));var b=i?i(y,{month:o.number,year:o.year}):void 0;null===o.firstDate&&y.month===o.number&&(o.firstDate=y),y.month===o.number&&m.month!==o.number&&(o.lastDate=y);var w=f[p];w||(w=f[p]={}),w.date=y,w.context=Object.assign(w.context||{},{$implicit:y,date:y,data:b,currentMonth:o.number,disabled:v,focused:!1,selected:!1}),w.tabindex=-1,w.ariaLabel=g,w.hidden=!1,t=m}d.number=e.getWeekNumber(f.map(function(e){return e.date}),u),d.collapsed="collapsed"===c&&f[0].date.month!==o.number&&f[f.length-1].date.month!==o.number}return o}(e,t,n,r,s.shift()||{}))}),a}(this._calendar,o,r,this._i18n,"dayTemplateData"in e||"firstDayOfWeek"in e||"markDisabled"in e||"minDate"in e||"maxDate"in e||"disabled"in e||"outsideDays"in e);r.months=i,r.firstDate=i.length>0?i[0].firstDate:void 0,r.lastDate=i.length>0?i[i.length-1].lastDate:void 0,"selectedDate"in e&&!fd(r.selectedDate,r)&&(r.selectedDate=null),"firstDate"in e&&(void 0===r.focusDate||r.focusDate.before(r.firstDate)||r.focusDate.after(r.lastDate))&&(r.focusDate=o);var a=!this._state.firstDate||this._state.firstDate.year!==r.firstDate.year,s=!this._state.firstDate||this._state.firstDate.month!==r.firstDate.month;"select"===r.navigation?(("minDate"in e||"maxDate"in e||0===r.selectBoxes.years.length||a)&&(r.selectBoxes.years=function(e,t,n){if(!e)return[];var r=t&&t.year||e.year-10;return Array.from({length:(n&&n.year||e.year+10)-r+1},function(e,t){return r+t})}(r.firstDate,r.minDate,r.maxDate)),("minDate"in e||"maxDate"in e||0===r.selectBoxes.months.length||a)&&(r.selectBoxes.months=function(e,t,n,r){if(!t)return[];var o=e.getMonths(t.year);if(n&&t.year===n.year){var i=o.findIndex(function(e){return e===n.month});o=o.slice(i)}return r&&t.year===r.year&&(i=o.findIndex(function(e){return e===r.month}),o=o.slice(0,i+1)),o}(this._calendar,r.firstDate,r.minDate,r.maxDate))):r.selectBoxes={years:[],months:[]},"arrows"!==r.navigation&&"select"!==r.navigation||!(s||a||"minDate"in e||"maxDate"in e||"disabled"in e)||(r.prevDisabled=r.disabled||(t=r.minDate,n=this._calendar.getPrev(r.firstDate,"m"),t&&(n.year===t.year&&n.month<t.month||n.year<t.year&&1===t.month)),r.nextDisabled=r.disabled||function(e,t,n){return n&&e.getNext(r.lastDate,"m").after(n)}(this._calendar,0,r.maxDate))}return r},e}(),gd=function(){var e={Tab:9,Enter:13,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40};return e[e.Tab]="Tab",e[e.Enter]="Enter",e[e.Escape]="Escape",e[e.Space]="Space",e[e.PageUp]="PageUp",e[e.PageDown]="PageDown",e[e.End]="End",e[e.Home]="Home",e[e.ArrowLeft]="ArrowLeft",e[e.ArrowUp]="ArrowUp",e[e.ArrowRight]="ArrowRight",e[e.ArrowDown]="ArrowDown",e}(),vd=function(){function e(e,t){var n=this;this._service=e,this._calendar=t,e.model$.subscribe(function(e){n._minDate=e.minDate,n._maxDate=e.maxDate,n._firstViewDate=e.firstDate,n._lastViewDate=e.lastDate})}return e.prototype.processKey=function(e){if(gd[$h(e.which)]){switch(e.which){case gd.PageUp:this._service.focusMove(e.shiftKey?"y":"m",-1);break;case gd.PageDown:this._service.focusMove(e.shiftKey?"y":"m",1);break;case gd.End:this._service.focus(e.shiftKey?this._maxDate:this._lastViewDate);break;case gd.Home:this._service.focus(e.shiftKey?this._minDate:this._firstViewDate);break;case gd.ArrowLeft:this._service.focusMove("d",-1);break;case gd.ArrowUp:this._service.focusMove("d",-this._calendar.getDaysPerWeek());break;case gd.ArrowRight:this._service.focusMove("d",1);break;case gd.ArrowDown:this._service.focusMove("d",this._calendar.getDaysPerWeek());break;case gd.Enter:case gd.Space:this._service.focusSelect();break;default:return}e.preventDefault(),e.stopPropagation()}},e}(),bd=function(){var e={PREV:0,NEXT:1};return e[e.PREV]="PREV",e[e.NEXT]="NEXT",e}(),wd=function(){function e(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekdays=!0,this.showWeekNumbers=!1}return e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e}();function _d(){return new Ed}var Cd=function(){function e(){}return e.ngInjectableDef=pe({factory:_d,token:e,providedIn:"root"}),e}(),Ed=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.fromModel=function(e){return e&&Yh(e.year)&&Yh(e.month)&&Yh(e.day)?{year:e.year,month:e.month,day:e.day}:null},t.prototype.toModel=function(e){return e&&Yh(e.year)&&Yh(e.month)&&Yh(e.day)?{year:e.year,month:e.month,day:e.day}:null},t}(Cd),Sd=function(){function e(e,t,n,r,o,i,a,s,u){var l=this;this._keyMapService=e,this._service=t,this._calendar=n,this.i18n=r,this._cd=i,this._elementRef=a,this._ngbDateAdapter=s,this._ngZone=u,this.navigate=new Xt,this.select=new Xt,this.onChange=function(e){},this.onTouched=function(){},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekdays","showWeekNumbers","startDate"].forEach(function(e){return l[e]=o[e]}),this._selectSubscription=t.select$.subscribe(function(e){l.select.emit(e)}),this._subscription=t.model$.subscribe(function(e){var t=e.firstDate,n=l.model?l.model.firstDate:null,r=e.selectedDate,o=e.focusDate,a=l.model?l.model.focusDate:null;l.model=e,hd(r,l._controlValue)&&(l._controlValue=r,l.onTouched(),l.onChange(l._ngbDateAdapter.toModel(r))),hd(o,a)&&a&&e.focusVisible&&l.focus(),t.equals(n)||l.navigate.emit({current:n?{year:n.year,month:n.month}:null,next:{year:t.year,month:t.month}}),i.markForCheck()})}return e.prototype.focus=function(){var e=this;this._ngZone.onStable.asObservable().pipe(function(e){return e.lift(new zh(1))}).subscribe(function(){var t=e._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})},e.prototype.navigateTo=function(e){this._service.open(id.from(e?i({},e,{day:1}):null))},e.prototype.ngOnDestroy=function(){this._subscription.unsubscribe(),this._selectSubscription.unsubscribe()},e.prototype.ngOnInit=function(){var e=this;void 0===this.model&&(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].forEach(function(t){return e._service[t]=e[t]}),this.navigateTo(this.startDate))},e.prototype.ngOnChanges=function(e){var t=this;["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].filter(function(t){return t in e}).forEach(function(e){return t._service[e]=t[e]}),"startDate"in e&&this.navigateTo(this.startDate)},e.prototype.onDateSelect=function(e){this._service.focus(e),this._service.select(e,{emitEvent:!0})},e.prototype.onKeyDown=function(e){this._keyMapService.processKey(e)},e.prototype.onNavigateDateSelect=function(e){this._service.open(e)},e.prototype.onNavigateEvent=function(e){switch(e){case bd.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case bd.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._service.disabled=e},e.prototype.showFocus=function(e){this._service.focusVisible=e},e.prototype.writeValue=function(e){this._controlValue=id.from(this._ngbDateAdapter.fromModel(e)),this._service.select(this._controlValue)},e}(),Td=function(){function e(e){this.i18n=e,this.select=new Xt}return e.prototype.doSelect=function(e){e.context.disabled||e.hidden||this.select.emit(e.date)},e}(),Id=function(){return function(e){this.i18n=e,this.navigation=bd,this.months=[],this.navigate=new Xt,this.select=new Xt}}(),Dd=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function kd(e){var t=e.querySelectorAll(Dd);return[t[0],t[t.length-1]]}var xd=function(e,t,n){void 0===n&&(n=!1);var r=Rh(e,"focusin").pipe(jh(t),J(function(e){return e.target}));Rh(e,"keydown").pipe(jh(t),Lh(function(e){return e.which===gd.Tab}),Wh(r)).subscribe(function(t){var n=c(t,2),r=n[0],o=n[1],i=c(kd(e),2),a=i[0],s=i[1];o!==a&&o!==e||!r.shiftKey||(s.focus(),r.preventDefault()),o!==s||r.shiftKey||(a.focus(),r.preventDefault())}),n&&Rh(e,"click").pipe(jh(t),Wh(r),J(function(e){return e[1]})).subscribe(function(e){return e.focus()})},Nd=function(){function e(e){this.i18n=e}return e.prototype.isMuted=function(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)},e}(),Ad=function(){function e(e){this.i18n=e,this.select=new Xt}return e.prototype.changeMonth=function(e){this.select.emit(new id(this.date.year,Kh(e),1))},e.prototype.changeYear=function(e){this.select.emit(new id(Kh(e),this.date.month,1))},e}(),Pd=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),Od=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),Md=function(){function e(){this.backdrop=!0,this.keyboard=!0}return e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Rd=function(e,t,n){this.nodes=e,this.viewRef=t,this.componentRef=n},Ld=function(){},Vd=function(){function e(e){this._document=e}return e.prototype.compensate=function(){return this._isPresent()?this._adjustBody(this._getWidth()):Ld},e.prototype._adjustBody=function(e){var t=this._document.body,n=t.style.paddingRight,r=parseFloat(window.getComputedStyle(t)["padding-right"]);return t.style["padding-right"]=r+e+"px",function(){return t.style["padding-right"]=n}},e.prototype._isPresent=function(){var e=this._document.body.getBoundingClientRect();return e.left+e.right<window.innerWidth},e.prototype._getWidth=function(){var e=this._document.createElement("div");e.className="modal-scrollbar-measure";var t=this._document.body;t.appendChild(e);var n=e.getBoundingClientRect().width-e.clientWidth;return t.removeChild(e),n},e.ngInjectableDef=pe({factory:function(){return new e(tt(yl))},token:e,providedIn:"root"}),e}(),Fd=function(){},jd=function(){function e(){}return e.prototype.close=function(e){},e.prototype.dismiss=function(e){},e}(),Bd=function(){function e(e,t,n,r){var o=this;this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=n,this._beforeDismiss=r,e.instance.dismissEvent.subscribe(function(e){o.dismiss(e)}),this.result=new Promise(function(e,t){o._resolve=e,o._reject=t}),this.result.then(null,function(){})}return Object.defineProperty(e.prototype,"componentInstance",{get:function(){if(this._contentRef.componentRef)return this._contentRef.componentRef.instance},enumerable:!0,configurable:!0}),e.prototype.close=function(e){this._windowCmptRef&&(this._resolve(e),this._removeModalElements())},e.prototype._dismiss=function(e){this._reject(e),this._removeModalElements()},e.prototype.dismiss=function(e){var t=this;if(this._windowCmptRef)if(this._beforeDismiss){var n=this._beforeDismiss();n&&n.then?n.then(function(n){!1!==n&&t._dismiss(e)},function(){}):!1!==n&&this._dismiss(e)}else this._dismiss(e)},e.prototype._removeModalElements=function(){var e=this._windowCmptRef.location.nativeElement;if(e.parentNode.removeChild(e),this._windowCmptRef.destroy(),this._backdropCmptRef){var t=this._backdropCmptRef.location.nativeElement;t.parentNode.removeChild(t),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null},e}(),qd=function(){var e={BACKDROP_CLICK:0,ESC:1};return e[e.BACKDROP_CLICK]="BACKDROP_CLICK",e[e.ESC]="ESC",e}(),Ud=function(){function e(e,t){this._document=e,this._elRef=t,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Xt}return e.prototype.backdropClick=function(e){!0===this.backdrop&&this._elRef.nativeElement===e.target&&this.dismiss(qd.BACKDROP_CLICK)},e.prototype.escKey=function(e){this.keyboard&&!e.defaultPrevented&&this.dismiss(qd.ESC)},e.prototype.dismiss=function(e){this.dismissEvent.emit(e)},e.prototype.ngOnInit=function(){this._elWithFocus=this._document.activeElement},e.prototype.ngAfterViewInit=function(){if(!this._elRef.nativeElement.contains(document.activeElement)){var e=this._elRef.nativeElement.querySelector("[ngbAutofocus]"),t=kd(this._elRef.nativeElement)[0];(e||t||this._elRef.nativeElement).focus()}},e.prototype.ngOnDestroy=function(){var e=this._document.body,t=this._elWithFocus;(t&&t.focus&&e.contains(t)?t:e).focus(),this._elWithFocus=null},e}(),zd=function(){function e(e,t,n,r,o){var i=this;this._applicationRef=e,this._injector=t,this._document=n,this._scrollBar=r,this._rendererFactory=o,this._windowAttributes=["ariaLabelledBy","backdrop","centered","keyboard","size","windowClass"],this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowCmpts=[],this._activeWindowCmptHasChanged=new R,this._activeWindowCmptHasChanged.subscribe(function(){i._windowCmpts.length&&xd(i._windowCmpts[i._windowCmpts.length-1].location.nativeElement,i._activeWindowCmptHasChanged)})}return e.prototype.open=function(e,t,n,r){var o=this,i=Jh(r.container)?this._document.querySelector(r.container):this._document.body,a=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),u=function(){o._modalRefs.length||a.removeClass(o._document.body,"modal-open")};if(!i)throw new Error('The specified modal container "'+(r.container||"body")+'" was not found in the DOM.');var l=new jd,c=this._getContentRef(e,r.injector||t,n,l),h=!1!==r.backdrop?this._attachBackdrop(e,i):null,d=this._attachWindowComponent(e,i,c),f=new Bd(d,c,h,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(d),f.result.then(s,s),f.result.then(u,u),l.close=function(e){f.close(e)},l.dismiss=function(e){f.dismiss(e)},this._applyWindowOptions(d.instance,r),1===this._modalRefs.length&&a.addClass(this._document.body,"modal-open"),h&&h.instance&&this._applyBackdropOptions(h.instance,r),f},e.prototype.dismissAll=function(e){this._modalRefs.forEach(function(t){return t.dismiss(e)})},e.prototype.hasOpenModals=function(){return this._modalRefs.length>0},e.prototype._attachBackdrop=function(e,t){var n=e.resolveComponentFactory(Fd).create(this._injector);return this._applicationRef.attachView(n.hostView),t.appendChild(n.location.nativeElement),n},e.prototype._attachWindowComponent=function(e,t,n){var r=e.resolveComponentFactory(Ud).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r},e.prototype._applyWindowOptions=function(e,t){this._windowAttributes.forEach(function(n){Jh(t[n])&&(e[n]=t[n])})},e.prototype._applyBackdropOptions=function(e,t){this._backdropAttributes.forEach(function(n){Jh(t[n])&&(e[n]=t[n])})},e.prototype._getContentRef=function(e,t,n,r){return n?n instanceof kn?this._createFromTemplateRef(n,r):"string"==typeof n?this._createFromString(n):this._createFromComponent(e,t,n,r):new Rd([])},e.prototype._createFromTemplateRef=function(e,t){var n=e.createEmbeddedView({$implicit:t,close:function(e){t.close(e)},dismiss:function(e){t.dismiss(e)}});return this._applicationRef.attachView(n),new Rd([n.rootNodes],n)},e.prototype._createFromString=function(e){var t=this._document.createTextNode(""+e);return new Rd([[t]])},e.prototype._createFromComponent=function(e,t,n,r){var o=e.resolveComponentFactory(n),i=je.create({providers:[{provide:jd,useValue:r}],parent:t}),a=o.create(i);return this._applicationRef.attachView(a.hostView),new Rd([[a.location.nativeElement]],a.hostView,a)},e.prototype._registerModalRef=function(e){var t=this,n=function(){var n=t._modalRefs.indexOf(e);n>-1&&t._modalRefs.splice(n,1)};this._modalRefs.push(e),e.result.then(n,n)},e.prototype._registerWindowCmpt=function(e){var t=this;this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(function(){var n=t._windowCmpts.indexOf(e);n>-1&&(t._windowCmpts.splice(n,1),t._activeWindowCmptHasChanged.next())})},e.ngInjectableDef=pe({factory:function(){return new e(tt(_n),tt(Ve),tt(yl),tt(Vd),tt(En))},token:e,providedIn:"root"}),e}(),Gd=function(){function e(e,t,n,r){this._moduleCFR=e,this._injector=t,this._modalStack=n,this._config=r}return e.prototype.open=function(e,t){void 0===t&&(t={});var n=Object.assign({},this._config,t);return this._modalStack.open(this._moduleCFR,this._injector,e,n)},e.prototype.dismissAll=function(e){this._modalStack.dismissAll(e)},e.prototype.hasOpenModals=function(){return this._modalStack.hasOpenModals()},e.ngInjectableDef=pe({factory:function(){return new e(tt(Gt),tt(Ve),tt(zd),tt(Md))},token:e,providedIn:"root"}),e}(),Wd=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),Hd=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),Qd=function(){function e(e,t){this._element=e,this._renderer=t,this.placement="top"}return e.prototype.isTitleTemplate=function(){return this.title instanceof kn},e.prototype.applyPlacement=function(e){this._renderer.removeClass(this._element.nativeElement,"bs-popover-"+this.placement.toString().split("-")[0]),this._renderer.removeClass(this._element.nativeElement,"bs-popover-"+this.placement.toString()),this.placement=e,this._renderer.addClass(this._element.nativeElement,"bs-popover-"+this.placement.toString().split("-")[0]),this._renderer.addClass(this._element.nativeElement,"bs-popover-"+this.placement.toString())},e.prototype.isEventFrom=function(e){return this._element.nativeElement.contains(e.target)},e}(),Kd=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),$d=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),Yd=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),Jd=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),Zd=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),Xd=function(){function e(e,t){this._element=e,this._renderer=t,this.placement="top"}return e.prototype.applyPlacement=function(e){this._renderer.removeClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString().split("-")[0]),this._renderer.removeClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString()),this.placement=e,this._renderer.addClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString().split("-")[0]),this._renderer.addClass(this._element.nativeElement,"bs-tooltip-"+this.placement.toString())},e.prototype.isEventFrom=function(e){return this._element.nativeElement.contains(e.target)},e}(),ef=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),tf=function(){function e(){this.highlightClass="ngb-highlight"}return e.prototype.ngOnChanges=function(e){var t,n=$h(this.result),r=n.toLowerCase(),o=$h(this.term).toLowerCase(),i=0;this.parts=o.length>0?r.split(new RegExp("("+(t=o,t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))+")")).map(function(e){var t=n.substr(i,e.length);return i+=e.length,t}):[n]},e}(),nf=function(){function e(){this.activeIdx=0,this.focusFirst=!0,this.formatter=$h,this.selectEvent=new Xt,this.activeChangeEvent=new Xt}return e.prototype.hasActive=function(){return this.activeIdx>-1&&this.activeIdx<this.results.length},e.prototype.getActive=function(){return this.results[this.activeIdx]},e.prototype.markActive=function(e){this.activeIdx=e,this._activeChanged()},e.prototype.next=function(){this.activeIdx===this.results.length-1?this.activeIdx=this.focusFirst?(this.activeIdx+1)%this.results.length:-1:this.activeIdx++,this._activeChanged()},e.prototype.prev=function(){this.activeIdx<0?this.activeIdx=this.results.length-1:0===this.activeIdx?this.activeIdx=this.focusFirst?this.results.length-1:-1:this.activeIdx--,this._activeChanged()},e.prototype.resetActive=function(){this.activeIdx=this.focusFirst?0:-1,this._activeChanged()},e.prototype.select=function(e){this.selectEvent.emit(e)},e.prototype.ngOnInit=function(){this.resetActive()},e.prototype._activeChanged=function(){this.activeChangeEvent.emit(this.activeIdx>=0?this.id+"-"+this.activeIdx:void 0)},e}(),rf=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),of=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e}(),af=Kr({encapsulation:0,styles:["[_nghost-%COMP%]{display:block}"],data:{}});function sf(e){return Vi(0,[(e()(),So(0,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.closeHandler()&&r),r},null,null)),(e()(),So(1,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(e()(),Mi(-1,null,["\xd7"]))],null,null)}function uf(e){return Vi(2,[(e()(),Eo(16777216,null,null,1,null,sf)),di(1,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),Pi(null,0)],function(e,t){e(t,1,0,t.component.dismissible)},null)}var lf=Uo("ngb-alert",ed,function(e){return Vi(0,[(e()(),So(0,0,null,null,1,"ngb-alert",[["class","alert"],["role","alert"]],[[2,"alert-dismissible",null]],null,null,uf,af)),di(1,638976,null,0,ed,[Xh,Tn,In],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,Xo(t,1).dismissible)})},{dismissible:"dismissible",type:"type"},{close:"close"},["*"]),cf=Kr({encapsulation:0,styles:["[_nghost-%COMP%]{display:block}.ngb-dp-week-number[_ngcontent-%COMP%], .ngb-dp-weekday[_ngcontent-%COMP%]{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday[_ngcontent-%COMP%]{color:#5bc0de;color:var(--info)}.ngb-dp-week[_ngcontent-%COMP%]{border-radius:.25rem;display:-ms-flexbox;display:flex}.ngb-dp-weekdays[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.125);border-radius:0}.ngb-dp-day[_ngcontent-%COMP%], .ngb-dp-week-number[_ngcontent-%COMP%], .ngb-dp-weekday[_ngcontent-%COMP%]{width:2rem;height:2rem}.ngb-dp-day[_ngcontent-%COMP%]{cursor:pointer}.ngb-dp-day.disabled[_ngcontent-%COMP%], .ngb-dp-day.hidden[_ngcontent-%COMP%]{cursor:default}"],data:{}});function hf(e){return Vi(0,[(e()(),So(0,0,null,null,0,"div",[["class","ngb-dp-weekday ngb-dp-showweek"]],null,null,null,null,null))],null,null)}function df(e){return Vi(0,[(e()(),So(0,0,null,null,1,"div",[["class","ngb-dp-weekday small"]],null,null,null,null,null)),(e()(),Mi(1,null,[" "," "]))],null,function(e,t){e(t,1,0,t.component.i18n.getWeekdayShortName(t.context.$implicit))})}function ff(e){return Vi(0,[(e()(),So(0,0,null,null,4,"div",[["class","ngb-dp-week ngb-dp-weekdays bg-light"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,hf)),di(2,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),Eo(16777216,null,null,1,null,df)),di(4,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.showWeekNumbers),e(t,4,0,n.month.weekdays)},null)}function pf(e){return Vi(0,[(e()(),So(0,0,null,null,1,"div",[["class","ngb-dp-week-number small text-muted"]],null,null,null,null,null)),(e()(),Mi(1,null,["",""]))],null,function(e,t){e(t,1,0,t.component.i18n.getWeekNumerals(t.parent.parent.context.$implicit.number))})}function yf(e){return Vi(0,[(e()(),Eo(0,null,null,0))],null,null)}function mf(e){return Vi(0,[(e()(),Eo(16777216,null,null,1,null,yf)),di(1,540672,null,0,fl,[xn],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),(e()(),Eo(0,null,null,0))],function(e,t){e(t,1,0,t.parent.context.$implicit.context,t.component.dayTemplate)},null)}function gf(e){return Vi(0,[(e()(),So(0,0,null,null,2,"div",[["class","ngb-dp-day"],["role","gridcell"]],[[2,"disabled",null],[8,"tabIndex",0],[2,"hidden",null],[1,"aria-label",0]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.doSelect(e.context.$implicit)&&r),r},null,null)),(e()(),Eo(16777216,null,null,1,null,mf)),di(2,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,!t.context.$implicit.hidden)},function(e,t){e(t,0,0,t.context.$implicit.context.disabled,t.context.$implicit.tabindex,t.context.$implicit.hidden,t.context.$implicit.ariaLabel)})}function vf(e){return Vi(0,[(e()(),So(0,0,null,null,4,"div",[["class","ngb-dp-week"],["role","row"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,pf)),di(2,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),Eo(16777216,null,null,1,null,gf)),di(4,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){e(t,2,0,t.component.showWeekNumbers),e(t,4,0,t.parent.context.$implicit.days)},null)}function bf(e){return Vi(0,[(e()(),Eo(16777216,null,null,1,null,vf)),di(1,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),Eo(0,null,null,0))],function(e,t){e(t,1,0,!t.context.$implicit.collapsed)},null)}function wf(e){return Vi(0,[(e()(),Eo(16777216,null,null,1,null,ff)),di(1,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),Eo(16777216,null,null,1,null,bf)),di(3,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.showWeekdays),e(t,3,0,n.month.weeks)},null)}var _f=Kr({encapsulation:0,styles:["[_nghost-%COMP%]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:0 0}.outside[_nghost-%COMP%]{opacity:.5}"],data:{}});function Cf(e){return Vi(2,[(e()(),Mi(0,null,["",""]))],null,function(e,t){var n=t.component;e(t,0,0,n.i18n.getDayNumerals(n.date))})}var Ef=Kr({encapsulation:0,styles:["[_nghost-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-dp-navigation-chevron[_ngcontent-%COMP%]{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.right[_ngcontent-%COMP%]   .ngb-dp-navigation-chevron[_ngcontent-%COMP%]{-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right[_ngcontent-%COMP%]{-ms-flex-pack:end;justify-content:flex-end}.ngb-dp-arrow-btn[_ngcontent-%COMP%]{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn[_ngcontent-%COMP%]:focus{outline:auto 1px}.ngb-dp-month-name[_ngcontent-%COMP%]{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex:1 1 9rem;flex:1 1 9rem}"],data:{}});function Sf(e){return Vi(0,[(e()(),So(0,0,null,null,1,"ngb-datepicker-navigation-select",[["class","ngb-dp-navigation-select"]],null,[[null,"select"]],function(e,t,n){var r=!0;return"select"===t&&(r=!1!==e.component.select.emit(n)&&r),r},Of,Nf)),di(1,49152,null,0,Ad,[pd],{date:[0,"date"],disabled:[1,"disabled"],months:[2,"months"],years:[3,"years"]},{select:"select"})],function(e,t){var n=t.component;e(t,1,0,n.date,n.disabled,n.selectBoxes.months,n.selectBoxes.years)},null)}function Tf(e){return Vi(0,[(e()(),So(0,0,null,null,0,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null))],null,null)}function If(e){return Vi(0,[(e()(),So(0,0,null,null,0,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null))],null,null)}function Df(e){return Vi(0,[(e()(),Eo(16777216,null,null,1,null,Tf)),di(1,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),So(2,0,null,null,1,"div",[["class","ngb-dp-month-name"]],null,null,null,null,null)),(e()(),Mi(3,null,[" "," "," "])),(e()(),Eo(16777216,null,null,1,null,If)),di(5,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),Eo(0,null,null,0))],function(e,t){var n=t.component;e(t,1,0,t.context.index>0),e(t,5,0,t.context.index!==n.months.length-1)},function(e,t){var n=t.component;e(t,3,0,n.i18n.getMonthFullName(t.context.$implicit.number,t.context.$implicit.year),n.i18n.getYearNumerals(t.context.$implicit.year))})}function kf(e){return Vi(0,[(e()(),Eo(16777216,null,null,1,null,Df)),di(1,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null),(e()(),Eo(0,null,null,0))],function(e,t){e(t,1,0,t.component.months)},null)}function xf(e){return Vi(2,[(e()(),So(0,0,null,null,2,"div",[["class","ngb-dp-arrow"]],null,null,null,null,null)),(e()(),So(1,0,null,null,1,"button",[["aria-label","Previous month"],["class","btn btn-link ngb-dp-arrow-btn"],["title","Previous month"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var r=!0,o=e.component;return"click"===t&&(r=!1!==o.navigate.emit(o.navigation.PREV)&&r),r},null,null)),(e()(),So(2,0,null,null,0,"span",[["class","ngb-dp-navigation-chevron"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,Sf)),di(4,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),Eo(16777216,null,null,1,null,kf)),di(6,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),So(7,0,null,null,2,"div",[["class","ngb-dp-arrow right"]],null,null,null,null,null)),(e()(),So(8,0,null,null,1,"button",[["aria-label","Next month"],["class","btn btn-link ngb-dp-arrow-btn"],["title","Next month"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var r=!0,o=e.component;return"click"===t&&(r=!1!==o.navigate.emit(o.navigation.NEXT)&&r),r},null,null)),(e()(),So(9,0,null,null,0,"span",[["class","ngb-dp-navigation-chevron"]],null,null,null,null,null))],function(e,t){var n=t.component;e(t,4,0,n.showSelect),e(t,6,0,!n.showSelect)},function(e,t){var n=t.component;e(t,1,0,n.prevDisabled),e(t,8,0,n.nextDisabled)})}var Nf=Kr({encapsulation:0,styles:["[_nghost-%COMP%] > select[_ngcontent-%COMP%]{-ms-flex:1 1 auto;flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}"],data:{}});function Af(e){return Vi(0,[(e()(),So(0,0,null,null,3,"option",[],[[1,"aria-label",0]],null,null,null,null)),di(1,147456,null,0,th,[In,Tn,[8,null]],{value:[0,"value"]},null),di(2,147456,null,0,oh,[In,Tn,[8,null]],{value:[0,"value"]},null),(e()(),Mi(3,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit),e(t,2,0,t.context.$implicit)},function(e,t){var n=t.component;e(t,0,0,n.i18n.getMonthFullName(t.context.$implicit,null==n.date?null:n.date.year)),e(t,3,0,n.i18n.getMonthShortName(t.context.$implicit,null==n.date?null:n.date.year))})}function Pf(e){return Vi(0,[(e()(),So(0,0,null,null,3,"option",[],null,null,null,null,null)),di(1,147456,null,0,th,[In,Tn,[8,null]],{value:[0,"value"]},null),di(2,147456,null,0,oh,[In,Tn,[8,null]],{value:[0,"value"]},null),(e()(),Mi(3,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit),e(t,2,0,t.context.$implicit)},function(e,t){e(t,3,0,t.component.i18n.getYearNumerals(t.context.$implicit))})}function Of(e){return Vi(2,[(e()(),So(0,0,null,null,2,"select",[["aria-label","Select month"],["class","custom-select"],["title","Select month"]],[[8,"disabled",0],[8,"value",0]],[[null,"change"]],function(e,t,n){var r=!0;return"change"===t&&(r=!1!==e.component.changeMonth(n.target.value)&&r),r},null,null)),(e()(),Eo(16777216,null,null,1,null,Af)),di(2,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null),(e()(),So(3,0,null,null,2,"select",[["aria-label","Select year"],["class","custom-select"],["title","Select year"]],[[8,"disabled",0],[8,"value",0]],[[null,"change"]],function(e,t,n){var r=!0;return"change"===t&&(r=!1!==e.component.changeYear(n.target.value)&&r),r},null,null)),(e()(),Eo(16777216,null,null,1,null,Pf)),di(5,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.months),e(t,5,0,n.years)},function(e,t){var n=t.component;e(t,0,0,n.disabled,null==n.date?null:n.date.month),e(t,3,0,n.disabled,null==n.date?null:n.date.year)})}var Mf=Kr({encapsulation:0,styles:["[_nghost-%COMP%]{border:1px solid #dfdfdf;border-radius:.25rem;display:inline-block}.ngb-dp-month[_ngcontent-%COMP%]{pointer-events:none}.ngb-dp-header[_ngcontent-%COMP%]{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem}ngb-datepicker-month-view[_ngcontent-%COMP%]{pointer-events:auto}.ngb-dp-month-name[_ngcontent-%COMP%]{font-size:larger;height:2rem;line-height:2rem;text-align:center}  .ngb-dp-month+.ngb-dp-month>ngb-datepicker-month-view>.ngb-dp-week{padding-left:1rem}  .ngb-dp-month+.ngb-dp-month>.ngb-dp-month-name{padding-left:1rem}  .ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}  .ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}  .ngb-dp-month>ngb-datepicker-month-view>.ngb-dp-week:last-child{padding-bottom:.25rem}.ngb-dp-months[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}"],data:{}});function Rf(e){return Vi(0,[(e()(),So(0,0,null,null,1,"div",[["class","btn-light"],["ngbDatepickerDayView",""]],[[2,"bg-primary",null],[2,"text-white",null],[2,"text-muted",null],[2,"outside",null],[2,"active",null]],null,null,Cf,_f)),di(1,49152,null,0,Nd,[pd],{currentMonth:[0,"currentMonth"],date:[1,"date"],disabled:[2,"disabled"],focused:[3,"focused"],selected:[4,"selected"]},null)],function(e,t){e(t,1,0,t.context.currentMonth,t.context.date,t.context.disabled,t.context.focused,t.context.selected)},function(e,t){e(t,0,0,Xo(t,1).selected,Xo(t,1).selected,Xo(t,1).isMuted(),Xo(t,1).isMuted(),Xo(t,1).focused)})}function Lf(e){return Vi(0,[(e()(),So(0,0,null,null,1,"ngb-datepicker-navigation",[],null,[[null,"navigate"],[null,"select"]],function(e,t,n){var r=!0,o=e.component;return"navigate"===t&&(r=!1!==o.onNavigateEvent(n)&&r),"select"===t&&(r=!1!==o.onNavigateDateSelect(n)&&r),r},xf,Ef)),di(1,49152,null,0,Id,[pd],{date:[0,"date"],disabled:[1,"disabled"],months:[2,"months"],showSelect:[3,"showSelect"],prevDisabled:[4,"prevDisabled"],nextDisabled:[5,"nextDisabled"],selectBoxes:[6,"selectBoxes"]},{navigate:"navigate",select:"select"})],function(e,t){var n=t.component;e(t,1,0,n.model.firstDate,n.model.disabled,n.model.months,"select"===n.model.navigation,n.model.prevDisabled,n.model.nextDisabled,n.model.selectBoxes)},null)}function Vf(e){return Vi(0,[(e()(),So(0,0,null,null,1,"div",[["class","ngb-dp-month-name bg-light"]],null,null,null,null,null)),(e()(),Mi(1,null,[" "," "," "]))],null,function(e,t){var n=t.component;e(t,1,0,n.i18n.getMonthFullName(t.parent.context.$implicit.number,t.parent.context.$implicit.year),n.i18n.getYearNumerals(t.parent.context.$implicit.year))})}function Ff(e){return Vi(0,[(e()(),So(0,0,null,null,4,"div",[["class","ngb-dp-month"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,Vf)),di(2,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),So(3,0,null,null,1,"ngb-datepicker-month-view",[["role","grid"]],null,[[null,"select"]],function(e,t,n){var r=!0;return"select"===t&&(r=!1!==e.component.onDateSelect(n)&&r),r},wf,cf)),di(4,49152,null,0,Td,[pd],{dayTemplate:[0,"dayTemplate"],month:[1,"month"],showWeekdays:[2,"showWeekdays"],showWeekNumbers:[3,"showWeekNumbers"]},{select:"select"})],function(e,t){var n=t.component;e(t,2,0,"none"===n.navigation||n.displayMonths>1&&"select"===n.navigation),e(t,4,0,n.dayTemplate||Xo(t.parent,0),t.context.$implicit,n.showWeekdays,n.showWeekNumbers)},null)}function jf(e){return Vi(0,[(e()(),Eo(0,null,null,0))],null,null)}function Bf(e){return Vi(2,[(e()(),Eo(0,[["dt",2]],null,0,null,Rf)),(e()(),So(1,0,null,null,2,"div",[["class","ngb-dp-header bg-light"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,Lf)),di(3,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),So(4,0,null,null,2,"div",[["class","ngb-dp-months"]],null,[[null,"keydown"],[null,"focusin"],[null,"focusout"]],function(e,t,n){var r=!0,o=e.component;return"keydown"===t&&(r=!1!==o.onKeyDown(n)&&r),"focusin"===t&&(r=!1!==o.showFocus(!0)&&r),"focusout"===t&&(r=!1!==o.showFocus(!1)&&r),r},null,null)),(e()(),Eo(16777216,null,null,1,null,Ff)),di(6,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null),(e()(),Eo(16777216,null,null,1,null,jf)),di(8,540672,null,0,fl,[xn],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(e,t){var n=t.component;e(t,3,0,"none"!==n.navigation),e(t,6,0,n.model.months),e(t,8,0,n.footerTemplate)},null)}var qf=Uo("ngb-datepicker",Sd,function(e){return Vi(0,[(e()(),So(0,0,null,null,4,"ngb-datepicker",[],null,null,null,Bf,Mf)),fi(5120,null,jc,function(e){return[e]},[Sd]),fi(512,null,md,md,[ld,pd]),fi(512,null,vd,vd,[md,ld]),di(4,770048,null,0,Sd,[vd,md,ld,pd,wd,Nn,In,Cd,en],null,null)],function(e,t){e(t,4,0)},null)},{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekdays:"showWeekdays",showWeekNumbers:"showWeekNumbers",startDate:"startDate"},{navigate:"navigate",select:"select"},[]),Uf=Kr({encapsulation:0,styles:[".bs-popover-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:50%;margin-left:-5px}.bs-popover-bottom-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-top-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:2em}.bs-popover-bottom-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-top-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:auto;right:2em}.bs-popover-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:50%;margin-top:-5px}.bs-popover-left-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-right-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:.7em}.bs-popover-left-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-right-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:auto;bottom:.7em}"],data:{}});function zf(e){return Vi(0,[(e()(),Mi(0,null,["",""]))],null,function(e,t){e(t,0,0,t.component.title)})}function Gf(e){return Vi(0,[(e()(),Eo(0,null,null,0))],null,null)}function Wf(e){return Vi(0,[(e()(),So(0,0,null,null,3,"h3",[["class","popover-header"]],null,null,null,null,null)),(e()(),Eo(0,[["simpleTitle",2]],null,0,null,zf)),(e()(),Eo(16777216,null,null,1,null,Gf)),di(3,540672,null,0,fl,[xn],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null)],function(e,t){var n=t.component;e(t,3,0,n.context,n.isTitleTemplate()?n.title:Xo(t,1))},null)}function Hf(e){return Vi(2,[(e()(),So(0,0,null,null,0,"div",[["class","arrow"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,Wf)),di(2,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),So(3,0,null,null,1,"div",[["class","popover-body"]],null,null,null,null,null)),Pi(null,0)],function(e,t){e(t,2,0,null!=t.component.title)},null)}var Qf=Uo("ngb-popover-window",Qd,function(e){return Vi(0,[(e()(),So(0,0,null,null,1,"ngb-popover-window",[["role","tooltip"]],[[8,"className",0],[8,"id",0]],null,null,Hf,Uf)),di(1,49152,null,0,Qd,[In,Tn],null,null)],null,function(e,t){e(t,0,0,"popover bs-popover-"+Xo(t,1).placement.split("-")[0]+" bs-popover-"+Xo(t,1).placement+(Xo(t,1).popoverClass?" "+Xo(t,1).popoverClass:""),Xo(t,1).id)})},{placement:"placement",title:"title",id:"id",popoverClass:"popoverClass",context:"context"},{},["*"]),Kf=Kr({encapsulation:0,styles:[".bs-tooltip-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:calc(50% - .4rem)}.bs-tooltip-bottom-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-top-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:1em}.bs-tooltip-bottom-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-top-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:auto;right:.8rem}.bs-tooltip-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:calc(50% - .4rem)}.bs-tooltip-left-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-right-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:.4rem}.bs-tooltip-left-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-tooltip-right-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:auto;bottom:.4rem}"],data:{}});function $f(e){return Vi(2,[(e()(),So(0,0,null,null,0,"div",[["class","arrow"]],null,null,null,null,null)),(e()(),So(1,0,null,null,1,"div",[["class","tooltip-inner"]],null,null,null,null,null)),Pi(null,0)],null,null)}var Yf=Uo("ngb-tooltip-window",Xd,function(e){return Vi(0,[(e()(),So(0,0,null,null,1,"ngb-tooltip-window",[["role","tooltip"]],[[8,"className",0],[8,"id",0]],null,null,$f,Kf)),di(1,49152,null,0,Xd,[In,Tn],null,null)],null,function(e,t){e(t,0,0,"tooltip show bs-tooltip-"+Xo(t,1).placement.split("-")[0]+" bs-tooltip-"+Xo(t,1).placement+(Xo(t,1).tooltipClass?" "+Xo(t,1).tooltipClass:""),Xo(t,1).id)})},{placement:"placement",id:"id",tooltipClass:"tooltipClass"},{},["*"]),Jf=Kr({encapsulation:2,styles:[],data:{}});function Zf(e){return Vi(0,[(e()(),So(0,0,null,null,1,"ngb-highlight",[],null,null,null,sp,rp)),di(1,573440,null,0,tf,[],{result:[0,"result"],term:[1,"term"]},null)],function(e,t){e(t,1,0,t.context.formatter(t.context.result),t.context.term)},null)}function Xf(e){return Vi(0,[(e()(),Eo(0,null,null,0))],null,null)}function ep(e){return Vi(0,[(e()(),So(0,0,null,null,3,"button",[["class","dropdown-item"],["role","option"],["type","button"]],[[8,"id",0],[2,"active",null]],[[null,"mouseenter"],[null,"click"]],function(e,t,n){var r=!0,o=e.component;return"mouseenter"===t&&(r=!1!==o.markActive(e.context.index)&&r),"click"===t&&(r=!1!==o.select(e.context.$implicit)&&r),r},null,null)),(e()(),Eo(16777216,null,null,2,null,Xf)),di(2,540672,null,0,fl,[xn],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),function(e,t){for(var n=Object.keys(t),r=n.length,o=new Array(r),i=0;i<r;i++){var a=n[i];o[t[a]]=a}return function(e,t,n){for(var r=new Array(n.length),o=0;o<n.length;o++){var i=n[o];r[o]={flags:8,name:i,ns:null,nonMinifiedName:i,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:3,flags:64,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:wo(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}(0,0,o)}(0,{result:0,term:1,formatter:2})],function(e,t){var n=t.component;e(t,2,0,e(t,3,0,t.context.$implicit,n.term,n.formatter),n.resultTemplate||Xo(t.parent,0))},function(e,t){var n=t.component;e(t,0,0,n.id+"-"+t.context.index,t.context.index===n.activeIdx)})}function tp(e){return Vi(0,[(e()(),Eo(0,[["rt",2]],null,0,null,Zf)),(e()(),Eo(16777216,null,null,1,null,ep)),di(2,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){e(t,2,0,t.component.results)},null)}var np=Uo("ngb-typeahead-window",nf,function(e){return Vi(0,[(e()(),So(0,0,null,null,1,"ngb-typeahead-window",[["class","dropdown-menu show"],["role","listbox"]],[[8,"id",0]],null,null,tp,Jf)),di(1,114688,null,0,nf,[],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,Xo(t,1).id)})},{id:"id",focusFirst:"focusFirst",results:"results",term:"term",formatter:"formatter",resultTemplate:"resultTemplate"},{selectEvent:"select",activeChangeEvent:"activeChange"},[]),rp=Kr({encapsulation:0,styles:[".ngb-highlight[_ngcontent-%COMP%]{font-weight:700}"],data:{}});function op(e){return Vi(0,[(e()(),So(0,0,null,null,1,"span",[],[[8,"className",0]],null,null,null,null)),(e()(),Mi(1,null,["",""]))],null,function(e,t){e(t,0,0,t.component.highlightClass),e(t,1,0,t.parent.context.$implicit)})}function ip(e){return Vi(0,[(e()(),Mi(0,null,["",""]))],null,function(e,t){e(t,0,0,t.parent.context.$implicit)})}function ap(e){return Vi(0,[(e()(),Eo(16777216,null,null,1,null,op)),di(1,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),Eo(0,[["even",2]],null,0,null,ip))],function(e,t){e(t,1,0,t.context.odd,Xo(t,2))},null)}function sp(e){return Vi(2,[(e()(),Eo(16777216,null,null,1,null,ap)),di(1,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){e(t,1,0,t.component.parts)},null)}var up=Kr({encapsulation:2,styles:[],data:{}});function lp(e){return Vi(0,[],null,null)}var cp=Uo("ngb-modal-backdrop",Fd,function(e){return Vi(0,[(e()(),So(0,0,null,null,1,"ngb-modal-backdrop",[["style","z-index: 1050"]],[[8,"className",0]],null,null,lp,up)),di(1,49152,null,0,Fd,[],null,null)],null,function(e,t){e(t,0,0,"modal-backdrop fade show"+(Xo(t,1).backdropClass?" "+Xo(t,1).backdropClass:""))})},{backdropClass:"backdropClass"},{},[]),hp=Kr({encapsulation:2,styles:[],data:{}});function dp(e){return Vi(0,[(e()(),So(0,0,null,null,2,"div",[["role","document"]],[[8,"className",0]],null,null,null,null)),(e()(),So(1,0,null,null,1,"div",[["class","modal-content"]],null,null,null,null,null)),Pi(null,0)],null,function(e,t){var n=t.component;e(t,0,0,"modal-dialog"+(n.size?" modal-"+n.size:"")+(n.centered?" modal-dialog-centered":""))})}var fp=Uo("ngb-modal-window",Ud,function(e){return Vi(0,[(e()(),So(0,0,null,null,1,"ngb-modal-window",[["role","dialog"],["tabindex","-1"]],[[8,"className",0],[1,"aria-labelledby",0]],[[null,"keyup.esc"],[null,"click"]],function(e,t,n){var r=!0;return"keyup.esc"===t&&(r=!1!==Xo(e,1).escKey(n)&&r),"click"===t&&(r=!1!==Xo(e,1).backdropClick(n)&&r),r},dp,hp)),di(1,4440064,null,0,Ud,[yl,In],null,null)],function(e,t){e(t,1,0)},function(e,t){e(t,0,0,"modal fade show d-block"+(Xo(t,1).windowClass?" "+Xo(t,1).windowClass:""),Xo(t,1).ariaLabelledBy)})},{ariaLabelledBy:"ariaLabelledBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",size:"size",windowClass:"windowClass"},{dismissEvent:"dismiss"},["*"]),pp=function(){function e(){}return e.prototype.ngOnInit=function(){},e}(),yp=Kr({encapsulation:0,styles:[[""]],data:{}});function mp(e){return Vi(0,[(e()(),So(0,0,null,null,5,"div",[["class","modal fade"],["id","myFormulario"]],null,null,null,null,null)),(e()(),So(1,0,null,null,4,"div",[["class","modal-dialog"]],null,null,null,null,null)),(e()(),So(2,0,null,null,3,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),So(3,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),So(4,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),Mi(-1,null,["Some text in the modal."]))],null,null)}var gp=Uo("app-partidos-form",pp,function(e){return Vi(0,[(e()(),So(0,0,null,null,1,"app-partidos-form",[],null,null,null,mp,yp)),di(1,114688,null,0,pp,[],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]);function vp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r,o=e[e.length-1];switch(F(o)?e.pop():o=void 0,e.length){case 0:return function(e){return e?function(e){return new N(function(t){return e.schedule(function(){return t.complete()})})}(e):vl}(o);case 1:return o?ee(e,o):(n=e[0],(r=new N(function(e){e.next(n),e.complete()}))._isScalar=!0,r.value=n,r);default:return ee(e,o)}}var bp=function(){},wp=function(){},_p=function(){function e(e){var t=this;this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){t.headers=new Map,e.split("\n").forEach(function(e){var n=e.indexOf(":");if(n>0){var r=e.slice(0,n),o=r.toLowerCase(),i=e.slice(n+1).trim();t.maybeSetNormalizedName(r,o),t.headers.has(o)?t.headers.get(o).push(i):t.headers.set(o,[i])}})}:function(){t.headers=new Map,Object.keys(e).forEach(function(n){var r=e[n],o=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(t.headers.set(o,r),t.maybeSetNormalizedName(n,o))})}:this.headers=new Map}return e.prototype.has=function(e){return this.init(),this.headers.has(e.toLowerCase())},e.prototype.get=function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null},e.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},e.prototype.getAll=function(e){return this.init(),this.headers.get(e.toLowerCase())||null},e.prototype.append=function(e,t){return this.clone({name:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({name:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({name:e,value:t,op:"d"})},e.prototype.maybeSetNormalizedName=function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)},e.prototype.init=function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))},e.prototype.copyFrom=function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})},e.prototype.clone=function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n},e.prototype.applyUpdate=function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,h(n)),this.headers.set(t,r);break;case"d":var o=e.value;if(o){var i=this.headers.get(t);if(!i)return;0===(i=i.filter(function(e){return-1===o.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,i)}else this.headers.delete(t),this.normalizedNames.delete(t)}},e.prototype.forEach=function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})},e}(),Cp=function(){function e(){}return e.prototype.encodeKey=function(e){return Ep(e)},e.prototype.encodeValue=function(e){return Ep(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}();function Ep(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var Sp=function(){function e(e){void 0===e&&(e={});var t,n,r,o=this;if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Cp,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(t=e.fromString,n=this.encoder,r=new Map,t.length>0&&t.split("&").forEach(function(e){var t=e.indexOf("="),o=c(-1==t?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],2),i=o[0],a=o[1],s=r.get(i)||[];s.push(a),r.set(i,s)}),r)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(function(t){var n=e.fromObject[t];o.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}return e.prototype.has=function(e){return this.init(),this.map.has(e)},e.prototype.get=function(e){this.init();var t=this.map.get(e);return t?t[0]:null},e.prototype.getAll=function(e){return this.init(),this.map.get(e)||null},e.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},e.prototype.append=function(e,t){return this.clone({param:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({param:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({param:e,value:t,op:"d"})},e.prototype.toString=function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+"="+e.encoder.encodeValue(t)}).join("&")}).join("&")},e.prototype.clone=function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n},e.prototype.init=function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],o=r.indexOf(t.value);-1!==o&&r.splice(o,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}}),this.cloneFrom=null)},e}();function Tp(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function Ip(e){return"undefined"!=typeof Blob&&e instanceof Blob}function Dp(e){return"undefined"!=typeof FormData&&e instanceof FormData}var kp=function(){function e(e,t,n,r){var o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new _p),this.params){var i=this.params.toString();if(0===i.length)this.urlWithParams=t;else{var a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+i}}else this.params=new Sp,this.urlWithParams=t}return e.prototype.serializeBody=function(){return null===this.body?null:Tp(this.body)||Ip(this.body)||Dp(this.body)||"string"==typeof this.body?this.body:this.body instanceof Sp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},e.prototype.detectContentTypeHeader=function(){return null===this.body?null:Dp(this.body)?null:Ip(this.body)?this.body.type||null:Tp(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Sp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},e.prototype.clone=function(t){void 0===t&&(t={});var n=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce(function(e,n){return e.set(n,t.setHeaders[n])},u)),t.setParams&&(l=Object.keys(t.setParams).reduce(function(e,n){return e.set(n,t.setParams[n])},l)),new e(n,r,i,{params:l,headers:u,reportProgress:s,responseType:o,withCredentials:a})},e}(),xp=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({}),Np=function(){return function(e,t,n){void 0===t&&(t=200),void 0===n&&(n="OK"),this.headers=e.headers||new _p,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}(),Ap=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=xp.ResponseHeader,n}return o(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(Np),Pp=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=xp.Response,n.body=void 0!==t.body?t.body:null,n}return o(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(Np),Op=function(e){function t(t){var n=e.call(this,t,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for "+(t.url||"(unknown url)")+": "+t.status+" "+t.statusText,n.error=t.error||null,n}return o(t,e),t}(Np);function Mp(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var Rp=function(){function e(e){this.handler=e}return e.prototype.request=function(e,t,n){var r,o=this;if(void 0===n&&(n={}),e instanceof kp)r=e;else{var i;i=n.headers instanceof _p?n.headers:new _p(n.headers);var a=void 0;n.params&&(a=n.params instanceof Sp?n.params:new Sp({fromObject:n.params})),r=new kp(e,t,void 0!==n.body?n.body:null,{headers:i,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var s=vp(r).pipe(ne(function(e){return o.handler.handle(e)},void 0,1));if(e instanceof kp||"events"===n.observe)return s;var u=s.pipe(Lh(function(e){return e instanceof Pp}));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return u.pipe(J(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return u.pipe(J(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return u.pipe(J(function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return u.pipe(J(function(e){return e.body}))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},e.prototype.delete=function(e,t){return void 0===t&&(t={}),this.request("DELETE",e,t)},e.prototype.get=function(e,t){return void 0===t&&(t={}),this.request("GET",e,t)},e.prototype.head=function(e,t){return void 0===t&&(t={}),this.request("HEAD",e,t)},e.prototype.jsonp=function(e,t){return this.request("JSONP",e,{params:(new Sp).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},e.prototype.options=function(e,t){return void 0===t&&(t={}),this.request("OPTIONS",e,t)},e.prototype.patch=function(e,t,n){return void 0===n&&(n={}),this.request("PATCH",e,Mp(n,t))},e.prototype.post=function(e,t,n){return void 0===n&&(n={}),this.request("POST",e,Mp(n,t))},e.prototype.put=function(e,t,n){return void 0===n&&(n={}),this.request("PUT",e,Mp(n,t))},e}(),Lp=function(){function e(e,t){this.next=e,this.interceptor=t}return e.prototype.handle=function(e){return this.interceptor.intercept(e,this.next)},e}(),Vp=new ye("HTTP_INTERCEPTORS"),Fp=function(){function e(){}return e.prototype.intercept=function(e,t){return t.handle(e)},e}(),jp=/^\)\]\}',?\n/,Bp=function(){},qp=function(){function e(){}return e.prototype.build=function(){return new XMLHttpRequest},e}(),Up=function(){function e(e){this.xhrFactory=e}return e.prototype.handle=function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new N(function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach(function(e,t){return r.setRequestHeader(e,t.join(","))}),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var o=e.detectContentTypeHeader();null!==o&&r.setRequestHeader("Content-Type",o)}if(e.responseType){var i=e.responseType.toLowerCase();r.responseType="json"!==i?i:"text"}var a=e.serializeBody(),s=null,u=function(){if(null!==s)return s;var t=1223===r.status?204:r.status,n=r.statusText||"OK",o=new _p(r.getAllResponseHeaders()),i=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return s=new Ap({headers:o,status:t,statusText:n,url:i})},l=function(){var t=u(),o=t.headers,i=t.status,a=t.statusText,s=t.url,l=null;204!==i&&(l=void 0===r.response?r.responseText:r.response),0===i&&(i=l?200:0);var c=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof l){var h=l;l=l.replace(jp,"");try{l=""!==l?JSON.parse(l):null}catch(e){l=h,c&&(c=!1,l={error:e,text:l})}}c?(n.next(new Pp({body:l,headers:o,status:i,statusText:a,url:s||void 0})),n.complete()):n.error(new Op({error:l,headers:o,status:i,statusText:a,url:s||void 0}))},c=function(e){var t=new Op({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error"});n.error(t)},h=!1,d=function(t){h||(n.next(u()),h=!0);var o={type:xp.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(o.total=t.total),"text"===e.responseType&&r.responseText&&(o.partialText=r.responseText),n.next(o)},f=function(e){var t={type:xp.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",l),r.addEventListener("error",c),e.reportProgress&&(r.addEventListener("progress",d),null!==a&&r.upload&&r.upload.addEventListener("progress",f)),r.send(a),n.next({type:xp.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",l),e.reportProgress&&(r.removeEventListener("progress",d),null!==a&&r.upload&&r.upload.removeEventListener("progress",f)),r.abort()}})},e}(),zp=new ye("XSRF_COOKIE_NAME"),Gp=new ye("XSRF_HEADER_NAME"),Wp=function(){},Hp=function(){function e(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return e.prototype.getToken=function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=al(e,this.cookieName),this.lastCookieString=e),this.lastToken},a([s(0,xe(yl)),s(1,xe(At)),s(2,xe(zp))],e)}(),Qp=function(){function e(e,t){this.tokenService=e,this.headerName=t}return e.prototype.intercept=function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)},a([s(1,xe(Gp))],e)}(),Kp=function(){function e(e,t){this.backend=e,this.injector=t,this.chain=null}return e.prototype.handle=function(e){if(null===this.chain){var t=this.injector.get(Vp,[]);this.chain=t.reduceRight(function(e,t){return new Lp(e,t)},this.backend)}return this.chain.handle(e)},e}(),$p=function(){function e(){}var t;return t=e,e.disable=function(){return{ngModule:t,providers:[{provide:Qp,useClass:Fp}]}},e.withOptions=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[e.cookieName?{provide:zp,useValue:e.cookieName}:[],e.headerName?{provide:Gp,useValue:e.headerName}:[]]}},e}(),Yp=function(){},Jp=function(){function e(e){this.http=e}return e.prototype.getData=function(e){var t="https://apis.datos.gob.ar/georef/api/direcciones?direccion="+e;return console.log("La url qued\xf3: ",t),this.http.get(t)},e.ngInjectableDef=pe({factory:function(){return new e(tt(Rp))},token:e,providedIn:"root"}),e}(),Zp=function(){function e(e){this.buscaDirecc=e,this.listado=[],this.coordenadas=[],this.valorTexto="",this.vectorBusquedasGuardadas=[],this.vectorBusquedas=[],this.contador=0,this.infoBuscar="Buscar con la API de la Secretaria de Modernizaci\xf3n de la Naci\xf3n https://datos.gob.ar/apis",this.eventoMarcador=new Xt}return e.prototype.ngOnInit=function(){},e.prototype.buscaLugar=function(e){var t=this;this.listado=[],this.coordenadas=[];var n=e;this.buscaDirecc.getData(n).subscribe(function(e){console.log("Se busc\xf3: ",n,", y el servicio respondi\xf3: ",e),console.log("cantidad de elementos:",e.cantidad);for(var r=0,o=e.direcciones;r<o.length;r++){var i=o[r];console.log("altura valor: ",i.altura.valor),console.log("calle nombre: ",i.calle.nombre),console.log("calle cruce 1: ",i.calle_cruce_1.nombre),console.log("calle cruce 2: ",i.calle_cruce_2.nombre),console.log("departamento: ",i.departamento.nombre),console.log("nomenclatura: ",i.nomenclatura),console.log("piso: ",i.piso),console.log("provincia: ",i.provincia.nombre),console.log("ubicacion lat: ",i.ubicacion.lat),console.log("ubicacion lon: ",i.ubicacion.lon),null!==i.ubicacion.lat&&(t.listado.push(i.nomenclatura),t.coordenadas.push(i.ubicacion.lat+", "+i.ubicacion.lon))}console.log(t.listado),console.log(t.coordenadas)})},e.prototype.recargar=function(){location.reload()},e.prototype.atajar=function(e){var t=e.currentTarget.childNodes[0].data.split("-"),n=t[0].trim(),r=t[1].trim(),o=this.coordenadas[n],i=o.split(","),a=i[0].trim(),s=i[1].trim(),u=parseFloat(a),l=parseFloat(s);this.latLon={lat:u,lon:l,texto:r},this.contador=this.contador+1,this.vectorBusquedas.push(r),this.eventoMarcador.emit(this.latLon),this.vectorBusquedasGuardadas.push({epsg:"",categoria:"",origin:"",geometry:o,nombre:r}),console.log("vector busquedas guardadas:",this.vectorBusquedasGuardadas),this.listado=[],this.coordenadas=[],this.valorTexto=""},e.prototype.keyDownFunction=function(e){13==e.keyCode&&this.buscaLugar(this.valorTexto)},e.prototype.busquedasGuardadas=function(e){for(var t=e.currentTarget.childNodes[0].data.split("-")[1].trim(),n=0,r=this.vectorBusquedasGuardadas;n<r.length;n++){var o=r[n];if(o.nombre==t){var i=o.geometry.split(","),a=i[0].trim(),s=i[1].trim(),u=parseFloat(a),l=parseFloat(s);this.latLon={lat:u,lon:l,texto:t},this.eventoMarcador.emit(this.latLon)}}},e}(),Xp=Kr({encapsulation:0,styles:[["*[_ngcontent-%COMP%]{z-index:2000}"]],data:{}});function ey(e){return Vi(0,[(e()(),So(0,0,null,null,1,"a",[["class","dropdown-item"],["href","#"],["style","font-size: small;"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.busquedasGuardadas(n)&&r),r},null,null)),(e()(),Mi(1,null,[""," - ",""]))],null,function(e,t){e(t,1,0,t.context.index,t.context.$implicit)})}function ty(e){return Vi(0,[(e()(),So(0,0,null,null,1,"button",[["class","list-group-item list-group-item-action"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.atajar(n)&&r),r},null,null)),(e()(),Mi(1,null,[""," - ",""]))],null,function(e,t){e(t,1,0,t.context.index,t.context.$implicit)})}function ny(e){return Vi(0,[(e()(),So(0,0,null,null,25,"div",[["class","container"]],null,null,null,null,null)),(e()(),So(1,0,null,null,20,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(2,0,null,null,19,"div",[["class","col-md-auto"]],null,null,null,null,null)),(e()(),So(3,0,null,null,18,"nav",[["class","navbar navbar-expand-lg navbar-ligth ml-5"],["style","background-color: white; height: 2.5rem;"]],null,null,null,null,null)),(e()(),So(4,0,null,null,17,"div",[["class","collapse navbar-collapse"],["id","navbarSupportedContent"]],null,null,null,null,null)),(e()(),So(5,0,null,null,1,"a",[["class","navbar-brand"],["href","#"],["style","font-size:medium;"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Geolocalizar"])),(e()(),So(7,0,null,null,3,"a",[["aria-expanded","false"],["aria-haspopup","true"],["class","nav-link dropdown-toggle"],["data-toggle","dropdown"],["href","#"],["id","navbarDropdown"],["role","button"]],null,null,null,null,null)),(e()(),Mi(-1,null,[" \xa0 "])),(e()(),So(9,0,null,null,1,"span",[["class","badge badge-pill badge-info"]],null,null,null,null,null)),(e()(),Mi(10,null,["",""])),(e()(),So(11,0,null,null,2,"div",[["aria-labelledby","navbarDropdown"],["class","dropdown-menu"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,ey)),di(13,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null),(e()(),So(14,0,[["direbuscar",1]],null,5,"input",[["aria-label","Search"],["class","form-control mr-sm-2"],["data-placement","top"],["data-toggle","tooltip"],["placeholder","Secr.Modern."],["style","font-size: small; max-width: 10rem; max-height: 2rem; border-color: #0dc6df;"],["type","text"]],[[8,"title",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Xo(e,15)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,15).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xo(e,15)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xo(e,15)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.valorTexto=n)&&r),"keydown"===t&&(r=!1!==o.keyDownFunction(n)&&r),r},null,null)),di(15,16384,null,0,Uc,[Tn,In,[2,qc]],null,null),fi(1024,null,jc,function(e){return[e]},[Uc]),di(17,671744,null,0,kh,[[8,null],[8,null],[8,null],[6,jc]],{model:[0,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(19,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(20,0,null,null,1,"button",[["class","btn btn-sm btn-outline-info my-2 my-sm-0"],["data-placement","top"],["data-toggle","tooltip"],["type","submit"]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.buscaLugar(Xo(e,14).value)&&r),r},null,null)),(e()(),Mi(-1,null,["Buscar"])),(e()(),So(22,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(23,0,null,null,2,"ul",[["class","list-group"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,ty)),di(25,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,13,0,n.vectorBusquedas),e(t,17,0,n.valorTexto),e(t,25,0,n.listado)},function(e,t){var n=t.component;e(t,10,0,n.contador),e(t,14,0,_o(1,"",n.infoBuscar,""),Xo(t,19).ngClassUntouched,Xo(t,19).ngClassTouched,Xo(t,19).ngClassPristine,Xo(t,19).ngClassDirty,Xo(t,19).ngClassValid,Xo(t,19).ngClassInvalid,Xo(t,19).ngClassPending),e(t,20,0,_o(1,"",n.infoBuscar,""))})}var ry=function(){function e(e){this.http=e}return e.prototype.getData=function(e){return this.http.get("https://us1.locationiq.org/v1/search.php?key=7c041d46548c08&q="+e+"&format=json")},e.ngInjectableDef=pe({factory:function(){return new e(tt(Rp))},token:e,providedIn:"root"}),e}(),oy=function(){function e(e){this.buscaDirecc=e,this.valorTexto="",this.listado=[],this.coordenadas=[],this.vectorBusquedasGuardadas=[],this.vectorBusquedas=[],this.contador=0,this.infoBuscar="Buscar con Location Iq: https://locationiq.com/",this.eventoMarcador=new Xt}return e.prototype.keyDownFunction=function(e){13==e.keyCode&&this.buscaLugar(this.valorTexto)},e.prototype.buscaLugar=function(e){var t=this;this.listado=[],this.coordenadas=[],this.buscaDirecc.getData(e).subscribe(function(e){for(var n=0,r=e;n<r.length;n++){var o=r[n];t.listado.push(o.display_name),t.coordenadas.push(o.lat+", "+o.lon)}})},e.prototype.atajar=function(e){var t=e.currentTarget.childNodes[0].data.split("-"),n=t[0].trim(),r=t[1].trim(),o=this.coordenadas[n],i=o.split(","),a=i[0].trim(),s=i[1].trim(),u=parseFloat(a),l=parseFloat(s);this.latLon={lat:u,lon:l,texto:r},this.contador=this.contador+1,this.vectorBusquedas.push(r),this.eventoMarcador.emit(this.latLon),this.vectorBusquedasGuardadas.push({epsg:"",categoria:"",origin:"",geometry:o,nombre:r}),console.log("vector busquedas guardadas:",this.vectorBusquedasGuardadas),this.listado=[],this.coordenadas=[],this.valorTexto=""},e.prototype.busquedasGuardadas=function(e){for(var t=e.currentTarget.childNodes[0].data.split("-")[1].trim(),n=0,r=this.vectorBusquedasGuardadas;n<r.length;n++){var o=r[n];if(o.nombre==t){var i=o.geometry.split(","),a=i[0].trim(),s=i[1].trim(),u=parseFloat(a),l=parseFloat(s);this.latLon={lat:u,lon:l,texto:t},this.eventoMarcador.emit(this.latLon)}}},e}(),iy=Kr({encapsulation:0,styles:[[""]],data:{}});function ay(e){return Vi(0,[(e()(),So(0,0,null,null,1,"a",[["class","dropdown-item"],["href","#"],["style","font-size: small;"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.busquedasGuardadas(n)&&r),r},null,null)),(e()(),Mi(1,null,[""," - ",""]))],null,function(e,t){e(t,1,0,t.context.index,t.context.$implicit)})}function sy(e){return Vi(0,[(e()(),So(0,0,null,null,1,"button",[["class","list-group-item list-group-item-action"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.atajar(n)&&r),r},null,null)),(e()(),Mi(1,null,[""," - ",""]))],null,function(e,t){e(t,1,0,t.context.index,t.context.$implicit)})}function uy(e){return Vi(0,[(e()(),So(0,0,null,null,15,"nav",[["class","navbar navbar-expand-sm navbar-ligth "],["style","background-color: white; height: 2.5rem; "]],null,null,null,null,null)),(e()(),So(1,0,null,null,3,"a",[["aria-expanded","false"],["aria-haspopup","true"],["class","nav-link dropdown-toggle"],["data-toggle","dropdown"],["href","#"],["id","navbarDropdown"],["role","button"]],null,null,null,null,null)),(e()(),Mi(-1,null,[" \xa0 "])),(e()(),So(3,0,null,null,1,"span",[["class","badge badge-pill badge-success"]],null,null,null,null,null)),(e()(),Mi(4,null,["",""])),(e()(),So(5,0,null,null,2,"div",[["aria-labelledby","navbarDropdown"],["class","dropdown-menu"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,ay)),di(7,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null),(e()(),So(8,0,[["direbuscar",1]],null,5,"input",[["aria-label","Search"],["class","form-control form-control-sm "],["data-placement","top"],["data-toggle","tooltip"],["placeholder","LocationIq"],["style","font-size:small; max-height: 2rem; max-width: 9rem; border-color: #00b300; left: 1px;"],["type","text"]],[[8,"title",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Xo(e,9)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,9).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xo(e,9)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xo(e,9)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.valorTexto=n)&&r),"keydown"===t&&(r=!1!==o.keyDownFunction(n)&&r),r},null,null)),di(9,16384,null,0,Uc,[Tn,In,[2,qc]],null,null),fi(1024,null,jc,function(e){return[e]},[Uc]),di(11,671744,null,0,kh,[[8,null],[8,null],[8,null],[6,jc]],{model:[0,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(13,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(14,0,null,null,1,"button",[["class","btn btn-sm btn-outline-success ml-2 my-sm-0"],["data-placement","top"],["data-toggle","tooltip"],["type","submit"]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.buscaLugar(Xo(e,8).value)&&r),r},null,null)),(e()(),Mi(-1,null,["Buscar"])),(e()(),So(16,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(17,0,null,null,2,"ul",[["class","list-group"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,sy)),di(19,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null)],function(e,t){var n=t.component;e(t,7,0,n.vectorBusquedas),e(t,11,0,n.valorTexto),e(t,19,0,n.listado)},function(e,t){var n=t.component;e(t,4,0,n.contador),e(t,8,0,_o(1,"",n.infoBuscar,""),Xo(t,13).ngClassUntouched,Xo(t,13).ngClassTouched,Xo(t,13).ngClassPristine,Xo(t,13).ngClassDirty,Xo(t,13).ngClassValid,Xo(t,13).ngClassInvalid,Xo(t,13).ngClassPending),e(t,14,0,_o(1,"",n.infoBuscar,""))})}var ly=function(){function e(e){this.http=e,this.terminadoInterno=new R,this.terminadoPublico=this.terminadoInterno.asObservable()}return e.prototype.getPartidos2015=function(){return this.http.get("./assets/partidos.geojson")},e.prototype.buscarGeoJsonPartidos=function(){return this.http.get("./assets/partidos.geojson")},e.prototype.getCircuitosElectorales=function(){return this.http.get("./assets/circuitosElectoralesBuenosAires.geojson")},e.prototype.getEscuelas=function(){return this.http.get("./assets/escuelas.geojson")},e.prototype.getWfsIgn=function(){return this.elJsonDelIGN=this.http.get("https://wms.ign.gob.ar/geoserver/ows?service=wfs&version=1.1.0&request=GetFeature&typeName=ign:departamento&outputFormat=application/json"),this.elJsonDelIGN},e.ngInjectableDef=pe({factory:function(){return new e(tt(Rp))},token:e,providedIn:"root"}),e}();function cy(e){return function(e){return new N(function(t){return{unsubscribe:e.onSnapshot(t)}})}(e).pipe(fe())}function hy(e){return cy(e).pipe(J(function(e){return{payload:e,type:"query"}}))}function dy(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new fy(e,t,n))}}var fy=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new py(e,this.accumulator,this.seed,this.hasSeed))},e}(),py=function(e){function t(t,n,r,o){var i=e.call(this,t)||this;return i.accumulator=n,i._seed=r,i.hasSeed=o,i.index=0,i}return o(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(D);function yy(e){return hy(e).pipe(J(function(e){return e.payload.docChanges().map(function(e){return{type:e.type,payload:e}})}))}function my(e,t){return hy(e).pipe(J(function(e){return e.payload.docChanges()}),dy(function(e,n){return function(e,t,n){return t.forEach(function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)||e.splice(t.newIndex,0,t);break;case"modified":(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))&&(t.oldIndex!==t.newIndex?(e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t)):e.splice(t.newIndex,1,t));break;case"removed":e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref)&&e.splice(t.oldIndex,1)}return e}(e,t))}),e}(e,n,t)},[]),J(function(e){return e.map(function(e){return{type:e.type,payload:e}})}))}var gy=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return o(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(Ph),vy=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(Mh))(gy),by=function(){function e(e,t){this.zone=e,this.platformId=t}return e.prototype.schedule=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.zone.runGuarded(function(){return vy.schedule.apply(vy,e)})},e.prototype.keepUnstableUntilFirst=function(e){return gl(this.platformId)?new N(function(t){var n=function(){},r=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);e.subscribe(function(e){"scheduled"===r.state&&r.invoke(),t.next(e)},function(e){"scheduled"===r.state&&r.invoke(),t.error(e)},function(){"scheduled"===r.state&&r.invoke(),t.complete()})}):e},e.prototype.runOutsideAngular=function(e){var t=this;return new N(function(n){return t.zone.runOutsideAngular(function(){return e.subscribe(function(e){return t.zone.run(function(){return n.next(e)})},function(e){return t.zone.run(function(){return n.error(e)})},function(){return t.zone.run(function(){return n.complete()})})})})},e}(),wy=function(e){return function(t){return new N(function(n){return t.subscribe(function(t){return e.run(function(){return n.next(t)})},function(t){return e.run(function(){return n.error(t)})},function(){return e.run(function(){return n.complete()})})})}},_y=function(){return(_y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Cy(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}var Ey=function(){function e(e,t,n){this.ref=e,this.query=t,this.afs=n}return e.prototype.stateChanges=function(e){return e&&0!==e.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(yy(this.query))).pipe(J(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}),Lh(function(e){return e.length>0})):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(yy(this.query)))},e.prototype.auditTrail=function(e){return this.stateChanges(e).pipe(dy(function(e,t){return e.concat(t)},[]))},e.prototype.snapshotChanges=function(e){var t=Cy(e),n=my(this.query,t),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)},e.prototype.valueChanges=function(e){void 0===e&&(e={});var t=hy(this.query),n=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(n).pipe(J(function(t){return t.payload.docs.map(function(t){var n;return e.idField?_y({},t.data(),((n={})[e.idField]=t.id,n)):t.data()})}))},e.prototype.get=function(e){return te(this.query.get(e)).pipe(wy(this.afs.scheduler.zone))},e.prototype.add=function(e){return this.ref.add(e)},e.prototype.doc=function(e){return new Sy(this.ref.doc(e),this.afs)},e}(),Sy=function(){function e(e,t){this.ref=e,this.afs=t}return e.prototype.set=function(e,t){return this.ref.set(e,t)},e.prototype.update=function(e){return this.ref.update(e)},e.prototype.delete=function(){return this.ref.delete()},e.prototype.collection=function(e,t){var n=Fy(this.ref.collection(e),t);return new Ey(n.ref,n.query,this.afs)},e.prototype.snapshotChanges=function(){var e=cy(this.ref).pipe(J(function(e){return{payload:e,type:"value"}})),t=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(t)},e.prototype.valueChanges=function(){return this.snapshotChanges().pipe(J(function(e){return e.payload.data()}))},e.prototype.get=function(e){return te(this.ref.get(e)).pipe(wy(this.afs.scheduler.zone))},e}(),Ty=function(){function e(e,t){this.query=e,this.afs=t}return e.prototype.stateChanges=function(e){return e&&0!==e.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(yy(this.query))).pipe(J(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}),Lh(function(e){return e.length>0})):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(yy(this.query)))},e.prototype.auditTrail=function(e){return this.stateChanges(e).pipe(dy(function(e,t){return e.concat(t)},[]))},e.prototype.snapshotChanges=function(e){var t=Cy(e),n=my(this.query,t),r=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(r)},e.prototype.valueChanges=function(){var e=hy(this.query),t=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(t).pipe(J(function(e){return e.payload.docs.map(function(e){return e.data()})}))},e.prototype.get=function(e){return te(this.query.get(e)).pipe(wy(this.afs.scheduler.zone))},e}(),Iy=n("Wcq6"),Dy=n.n(Iy),ky=new ye("angularfire2.app.options"),xy=new ye("angularfire2.app.nameOrConfig"),Ny=function(){};function Ay(e,t,n){var r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",Dy.a.apps.filter(function(e){return e&&e.name===r.name})[0]||t.runOutsideAngular(function(){return Dy.a.initializeApp(e,r)})}var Py=function(){function e(){}var t;return t=e,e.initializeApp=function(e,n){return{ngModule:t,providers:[{provide:ky,useValue:e},{provide:xy,useValue:n}]}},e}(),Oy=new ye("angularfire2.enableFirestorePersistence"),My=new ye("angularfire2.firestore.persistenceSettings"),Ry=new ye("angularfire2.firestore.settings"),Ly=parseInt(Dy.a.SDK_VERSION.split(".")[0]),Vy=Ly<5||5==Ly&&parseInt(Dy.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function Fy(e,t){return void 0===t&&(t=function(e){return e}),{query:t(e),ref:e}}var jy,By,qy=function(){function e(e,t,n,r,o,i,a){var s=this;this.scheduler=new by(i,o),this.firestore=i.runOutsideAngular(function(){var n=Ay(e,i,t).firestore();return n.settings(r||Vy),n}),this.persistenceEnabled$=n&&!gl(o)?i.runOutsideAngular(function(){try{return te(s.firestore.enablePersistence(a||void 0).then(function(){return!0},function(){return!1}))}catch(e){return vp(!1)}}):vp(!1)}return e.prototype.collection=function(e,t){var n=Fy("string"==typeof e?this.firestore.collection(e):e,t);return new Ey(n.ref,n.query,this)},e.prototype.collectionGroup=function(e,t){if(Ly<6)throw"collection group queries require Firebase JS SDK >= 6.0";var n=t||function(e){return e},r=this.firestore.collectionGroup(e);return new Ty(n(r),this)},e.prototype.doc=function(e){var t;return t="string"==typeof e?this.firestore.doc(e):e,new Sy(t,this)},e.prototype.createId=function(){return this.firestore.collection("_").doc().id},a([s(0,xe(ky)),s(1,Ne()),s(1,xe(xy)),s(2,Ne()),s(2,xe(Oy)),s(3,Ne()),s(3,xe(Ry)),s(4,xe(At)),s(6,Ne()),s(6,xe(My))],e)}(),Uy=function(){function e(e){this.afs=e,this.laColeccionPaso="provinciaba",this.laColeccionGenerales="provinciaGeneral",this.coleccionProvincias="provincias"}return e.prototype.saveMunicipio=function(e){return this.afs.collection(this.laColeccionPaso).add(e)},e.prototype.saveMunicipioGenerales=function(e){return this.afs.collection(this.laColeccionGenerales).add(e)},e.prototype.getMunicipios=function(){return this.municipios},e.prototype.getMunicipiosPaso=function(){return this.afs.collection(this.laColeccionPaso,function(e){return e.orderBy("idMuni","desc")}).get()},e.prototype.getMunicipiosGenerales=function(){return this.afs.collection(this.laColeccionGenerales,function(e){return e.orderBy("idMuni","desc")}).get()},e.prototype.editMunicipios=function(e,t){return this.afs.collection(this.laColeccionPaso).doc(e).update(t)},e.prototype.editMunicipiosGenerales=function(e,t){return this.afs.collection(this.laColeccionGenerales).doc(e).update(t)},e.ngInjectableDef=pe({factory:function(){return new e(tt(qy))},token:e,providedIn:"root"}),e}(),zy=function(){function e(){}return e.prototype.getPartidos=function(e,t){return this.capaPartidos=L.geoJson(e,{filter:function(e){return""==t||e.properties.nam===t||void 0},style:function(e){return{color:"rgba(51, 102, 0, 0.5)",weight:8.5,opacity:.4}},pane:"partidos"}),this.capaPartidos},e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Gy=function(){function e(){}return e.prototype.getEscuelas=function(e,t){var n={radius:4,fillColor:"#ff7800",color:"#000",weight:1,opacity:1,fillOpacity:.6},r={radius:8,fillColor:"#ff0800",color:"#ff0000",weight:1,opacity:.3,fillOpacity:.6};return this.capaEscuelas=L.geoJson(e,{pointToLayer:function(e,t){return L.circleMarker(t,n)},filter:function(e){return""==t||e.properties.partido===t||void 0},onEachFeature:function(e,t){t.bindPopup('\n        <table class="table table-striped table-borderless table-sm" style="font-family: \'Arial Narrow\'">\n          <thead class="thead-dark">\n            <tr>\n              <th scope="col" class="text-center">Nombre</th>\n              <th scope="col" class="text-center">Direccion</th>\n              <th scope="col" class="text-center">Partido</th>\n              <th scope="col" class="text-center">Tipo Organiz.</th>\n              <th scope="col" class="text-center">Gesti\xf3n</th>\n              <th scope="col" class="text-center">Modalidad</th>\n              <th scope="col" class="text-center">Nivel</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td class="text-center">'+e.properties.nombre+'</td>  \n              <td class="text-center">'+e.properties.direccion_calle+" nro "+e.properties.direccion_nro+'</td>\n              <td class="text-center">'+e.properties.partido+'</td>\n              <td class="text-center">'+e.properties.tipo_organiz+'</td>\n              <td class="text-center">'+e.properties.sector_gestion+'</td>\n              <td class="text-center">'+e.properties.modalidad+'</td>\n              <td class="text-center">'+e.properties.nivel+"</td>\n            </tr>\n          </tbody>\n        </table>\n      ",{maxWidth:400}),t.on({mouseover:function(n){t.setStyle(r);var o=n.target,i=L.tooltip({position:"bottom",noWrap:!0,offset:[0,-30],sticky:!0,opacity:.8}).setContent("<b>Nombre:</b>"+e.properties.nombre).setLatLng(n.latlng);o.bindTooltip(i)},mouseout:function(e){t.setStyle(n)}})}}),this.capaEscuelas},e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Wy=function(){function e(){}return e.prototype.getCircuitosDepurado=function(e,t){return this.capaCircuitos=L.geoJson(e,{filter:function(e){return""==t||e.properties.departamen===t||void 0},style:function(e){return{color:"rgb(255, 32, 0)",weight:.5,opacity:.6,fillColor:"#000000",fillOpacity:.1}},onEachFeature:function(e,t){var n="",r=0,o="";t.bindPopup('\n        <table class="table table-striped table-borderless table-sm" style="font-family: \'Arial Narrow\'">\n          <thead class="thead-dark">\n            <tr>\n              <th scope="col" class="text-center">Partido</th>\n              <th scope="col" class="text-center">Municipio</th>\n              <th scope="col" class="text-center">Circuito</th>\n              <th scope="col" class="text-center">Indec_d(?)</th>\n              <th scope="col" class="text-center">gid</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td class="text-center">'+e.properties.departamen+'</td>  \n              <td class="text-center">'+e.properties.cabecera+'</td>\n              <td class="text-center">'+e.properties.circuito+'</td>\n              <td class="text-center">'+e.properties.indec_d+'</td>\n              <td class="text-center">'+e.properties.gid+"</td>\n            </tr>\n          </tbody>\n        </table>\n      "),t.on({mouseover:function(i){n=i.target.options.color,r=i.target.options.weight,o=i.target.options.fillColor,t.setStyle({color:"rgba(0,255,0,0.5)",weight:4,fillColor:"#cc9900"});var a=i.target,s=L.tooltip({position:"bottom",noWrap:!0,offset:[0,-30],sticky:!0,opacity:.8}).setContent("<b>Pdo:</b>"+e.properties.departamen).setLatLng(i.latlng);a.bindTooltip(s)},mouseout:function(e){t.setStyle({color:n,weight:r,fillColor:o})}})},pane:"circuitos"}),this.capaCircuitos},e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Hy=function(){function e(){}return e.prototype.getWfs=function(e,t){return this.capaIgn=L.geoJson(e,{filter:function(e){return""==t||e.properties.gna===t||void 0},style:function(e){return{color:"rgba(51, 102, 0, 0.5)",weight:8.5,opacity:.4}},onEachFeature:function(e,t){var n="",r=0,o="";t.bindPopup('\n        <table class="table table-striped table-borderless table-sm" style="font-family: \'Arial Narrow\'">\n          <thead class="thead-dark">\n            <tr>\n              <th scope="col" class="text-center">Partido</th>\n              <th scope="col" class="text-center">C\xf3digo</th>\n              <th scope="col" class="text-center">Origen del dato</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td class="text-center">'+e.properties.fna+'</td>  \n              <td class="text-center">'+e.properties.in1+'</td>\n              <td class="text-center">'+e.properties.sag+"</td>\n            </tr>\n          </tbody>\n        </table>\n      "),t.on({mouseover:function(i){n=i.target.options.color,r=i.target.options.weight,o=i.target.options.fillColor,t.setStyle({color:"rgba(0,255,0,0.5)",weight:4,fillColor:"#cc9900"});var a=i.target,s=L.tooltip({position:"bottom",noWrap:!0,offset:[0,-30],sticky:!0,opacity:.8}).setContent("<b>Pdo:</b>"+e.properties.fna).setLatLng(i.latlng);a.bindTooltip(s)},mouseout:function(e){t.setStyle({color:n,weight:r,fillColor:o})}})},pane:"partidos"}),this.capaIgn},e.ngInjectableDef=pe({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Qy=function(e){return e[e["Sin datos"]=0]="Sin datos",e[e["Frente de todos"]=1]="Frente de todos",e[e["Juntos por el cambio"]=2]="Juntos por el cambio",e[e["Consenso federal"]=3]="Consenso federal",e[e.Otro=4]="Otro",e}({}),Ky=!1,$y=(n("vyr2"),function(){function e(e,t,n,r,o,i,a){this.servicioDatos=e,this.servicioMunicipios=t,this.modalService=n,this.servicioCapasPartido=r,this.servicioCircuitos=o,this.servicioEscuelas=i,this.servicioWfsIgn=a,this.edicion=!1,this.fpv=0,this.pro=0,this.cf=0,this.otro=0,this.espacios=[],this.arrayMunicipiosLeidos=[],this.arrayMunicipiosLeidosGenerales=[],this.listadoPartidos=[]}return e.prototype.ngOnInit=function(){this.armarTodo()},e.prototype.buscarPartido=function(){var e=this;this.listadoPartidos.length>0||this.servicioDatos.buscarGeoJsonPartidos().subscribe(function(t){var n=0;t.features.forEach(function(t){e.listadoPartidos[n]=t.properties.nam,n+=1,e.listadoPartidos.sort()})})},e.prototype.leerPartidos=function(){var e=this;jy.hasLayer(this.laCapaDeLosPartidos)&&jy.removeLayer(this.laCapaDeLosPartidos),jy.hasLayer(this.elPartidoFiltrado)&&jy.removeLayer(this.elPartidoFiltrado),this.servicioDatos.buscarGeoJsonPartidos().subscribe(function(t){e.laCapaDeLosPartidos=e.servicioCapasPartido.getPartidos(t,""),jy.addLayer(e.laCapaDeLosPartidos),jy.fitBounds(e.laCapaDeLosPartidos.getBounds())})},e.prototype.partidoElegido=function(){var e=this;jy.hasLayer(this.elPartidoFiltrado)&&jy.removeLayer(this.elPartidoFiltrado),jy.hasLayer(this.laCapaDeLosPartidos)&&jy.removeLayer(this.laCapaDeLosPartidos),this.servicioDatos.buscarGeoJsonPartidos().subscribe(function(t){e.elPartidoFiltrado=e.servicioCapasPartido.getPartidos(t,e.partidoSeleccionado),jy.addLayer(e.elPartidoFiltrado),jy.fitBounds(e.elPartidoFiltrado.getBounds())})},e.prototype.capaWFS=function(){var e=this;jy.hasLayer(this.layerWFS)&&jy.removeLayer(this.layerWFS),this.servicioDatos.getWfsIgn().subscribe(function(t){e.layerWFS=e.servicioWfsIgn.getWfs(t,"Partido"),jy.addLayer(e.layerWFS),jy.fitBounds(e.layerWFS.getBounds())})},e.prototype.leerCircuitos=function(){var e=this;jy.hasLayer(this.elCircuitoFiltrado)&&jy.removeLayer(this.elCircuitoFiltrado),jy.hasLayer(this.misCircuitos)&&jy.removeLayer(this.misCircuitos),this.servicioDatos.getCircuitosElectorales().subscribe(function(t){e.misCircuitos=e.servicioCircuitos.getCircuitosDepurado(t,""),jy.addLayer(e.misCircuitos),jy.fitBounds(e.misCircuitos.getBounds())})},e.prototype.circuito=function(){var e=this;jy.hasLayer(this.misCircuitos)&&jy.removeLayer(this.misCircuitos),jy.hasLayer(this.elCircuitoFiltrado)&&jy.removeLayer(this.elCircuitoFiltrado),this.servicioDatos.getCircuitosElectorales().subscribe(function(t){e.elCircuitoFiltrado=e.servicioCircuitos.getCircuitosDepurado(t,e.partidoSeleccionadoParaCircuito),jy.addLayer(e.elCircuitoFiltrado),jy.fitBounds(e.elCircuitoFiltrado.getBounds())})},e.prototype.escuelas=function(){var e=this;jy.hasLayer(this.laEscuelaFiltrada)&&jy.removeLayer(this.laEscuelaFiltrada),jy.hasLayer(this.laEscuelaFiltrada)&&jy.removeLayer(this.laEscuelaFiltrada),this.servicioDatos.getEscuelas().subscribe(function(t){e.laEscuelaFiltrada=e.servicioEscuelas.getEscuelas(t,e.partidoSeleccionadoParaEscuela),jy.addLayer(e.laEscuelaFiltrada),jy.fitBounds(e.laEscuelaFiltrada.getBounds())})},e.prototype.leerPartidos2019=function(){var e=this;this.servicioDatos.getPartidos2015().subscribe(function(t){By=t,e.eleccionesGenerales=!0;var n=JSON.parse(sessionStorage.getItem("municipiosGenerales"));jy.hasLayer(e.miPcia2019)&&(jy.removeLayer(e.miPcia2019),e.miPcia2019=""),e.miPcia2019=L.geoJson(By,{style:function(e){for(var t=0;t<n.length;t++)if(n[t].idMuni===e.properties.cca){switch(String(n[t].paso2019espacioPrimero)){case"1":return{color:"#000000",weight:.3,opacity:1,fillColor:"#0066ff",fillOpacity:.4};case"2":return{color:"#000000",weight:.3,opacity:1,fillColor:"#ffff66",fillOpacity:.4};case"3":return{color:"#000000",weight:.3,opacity:1,fillColor:"#33cc33",fillOpacity:.4};case"4":return{color:"#ffbf80",weight:.3,opacity:1,fillColor:"#ffbf80",fillOpacity:.4}}break}return{color:"#ccccb3",weight:3,opacity:1.5,fillColor:"#ccccb3",fillOpacity:.2}},onEachFeature:function(e,t){var r="",o=0,i="";t.bindPopup('\n              <table class="table table-striped table-borderless table-sm" style="font-family: \'Arial Narrow\'">\n                <thead class="thead-dark">\n                  <tr>\n                    <th scope="col" class="text-center">Municipio</th>\n                    <th scope="col" class="text-center">Intendente</th>\n                    <th scope="col" class="text-center">Esp. pol.</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr>\n                    <td class="text-center">'+e.properties.nam+'</td>  \n                    <td class="text-center">'+e.properties.actual_Int+'</td>\n                    <td class="text-center">'+e.properties.actual_Pdo+'</td>\n                  </tr>\n                  <tr>\n                    <td></td> \n                    <td></td>  \n                    <td><button class="mi-boton btn btn-secondary btn-sm ml-5"><i class="fa fa-edit"></i></button></td>\n                  </tr>\n                </tbody>\n              </table>\n            '),t.on("popupopen",function(){$(".mi-boton").on("click",function(t){t.preventDefault(),$("#elmuniid").val(e.properties.cca),$("#elmuni").text(e.properties.cca),$("#nombreOculto").val(e.properties.nam),$("#elmuniNombre").text(e.properties.nam),n=JSON.parse(sessionStorage.getItem("municipiosGenerales")),sessionStorage.removeItem("edicion"),0==n.length&&sessionStorage.setItem("edicion",JSON.stringify(!1));for(var r=0;r<n.length;r++){if(n[r].idMuni===e.properties.cca){$("#idOculto").val(n[r].id),$("#candidatoPrimero").val(n[r].paso2019candidatoPrimero),$("#candidatoSegundo").val(n[r].paso2019candidatoSegundo),$("#espacioPrimero").val(n[r].paso2019espacioPrimero),$("#espacioSegundo").val(n[r].paso2019espacioSegundo),$("#porcentajePrimero").val(n[r].paso2019porcPrimero),$("#porcentajeSegundo").val(n[r].paso2019porcSegundo),$("#votosEnBlanco").val(n[r].paso2019votosEnBlanco),$("#votosPositivos").val(n[r].paso2019votosPositivos),$("#obs").val(n[r].paso2019obs),$("#votosEnBlancoPorcentaje").val(n[r].paso2019porcVotosEnBlanco),$("#votosPositivosPorcentaje").val(n[r].paso2019porcVotosPositivos),n[r].paso2019recuperado?$("#recuperado").prop("checked",!0):$("#recuperado").prop("checked",!1),sessionStorage.setItem("edicion",JSON.stringify(!0));break}$("#idOculto").val(""),$("#candidatoPrimero").val(""),$("#candidatoSegundo").val(""),$("#espacioPrimero").val(""),$("#recuperado").prop("checked",!1),$("#espacioSegundo").val(""),$("#porcentajePrimero").val(0),$("#porcentajeSegundo").val(0),$("#votosEnBlanco").val(0),$("#votosPositivos").val(0),$("#obs").val(""),$("#votosEnBlancoPorcentaje").val(0),$("#votosPositivosPorcentaje").val(0),sessionStorage.setItem("edicion",JSON.stringify(!1))}$("#formularioPaso").modal("show")})}),t.on({mouseover:function(n){r=n.target.options.color,o=n.target.options.weight,i=n.target.options.fillColor,t.setStyle({color:"#cc9900",weight:2,fillColor:"#cc9900"});var a=n.target,s=L.tooltip({position:"bottom",noWrap:!0,offset:[0,-30],sticky:!0,opacity:.8}).setContent(e.properties.cca+", "+e.properties.nam).setLatLng(n.latlng).addTo(jy);a.bindTooltip(s)},mouseout:function(e){t.setStyle({color:r,weight:o,fillColor:i})}})}}),jy.addLayer(e.miPcia2019),e.encenderReferenciasGenerales2019(),e.encendidoInicialGenerales()})},e.prototype.leerPartidos2015=function(){var e=this;this.servicioDatos.getPartidos2015().subscribe(function(t){By=t,e.eleccionesGenerales=!1;var n,r=JSON.parse(sessionStorage.getItem("municipios"));jy.hasLayer(e.miPcia2015)?(jy.removeLayer(e.miPcia2015),e.miPcia2015="",n=!0):n=!1,e.miPcia2015=L.geoJson(t,{style:function(e){for(var t=0;t<r.length;t++)if(r[t].idMuni===e.properties.cca){switch(String(r[t].paso2019espacioPrimero)){case"1":return{color:"#000000",weight:.3,opacity:1,fillColor:"#0066ff",fillOpacity:.4};case"2":return{color:"#000000",weight:.3,opacity:1,fillColor:"#ffff66",fillOpacity:.4};case"3":return{color:"#000000",weight:.3,opacity:1,fillColor:"#33cc33",fillOpacity:.4};case"4":return{color:"#ffbf80",weight:.3,opacity:1,fillColor:"#ffbf80",fillOpacity:.4}}break}return{color:"#ccccb3",weight:3,opacity:1.5,fillColor:"#ccccb3",fillOpacity:.2}},onEachFeature:function(e,t){var n=this,r="",o=0,i="";t.bindPopup('\n              <table class="table table-striped table-borderless table-sm" style="font-family: \'Arial Narrow\'">\n                <thead class="thead-dark">\n                  <tr>\n                    <th scope="col" class="text-center">Municipio</th>\n                    <th scope="col" class="text-center">Intendente</th>\n                    <th scope="col" class="text-center">Esp. pol.</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr>\n                    <td class="text-center">'+e.properties.nam+'</td>  \n                    <td class="text-center">'+e.properties.actual_Int+'</td>\n                    <td class="text-center">'+e.properties.actual_Pdo+'</td>\n                  </tr>\n                  <tr>\n                    <td></td> \n                    <td></td>  \n                    <td><button class="mi-boton btn btn-secondary btn-sm ml-5"><i class="fa fa-edit"></i></button></td>\n                  </tr>\n                </tbody>\n              </table>\n            '),t.on("popupopen",function(){$(".mi-boton").on("click",function(t){t.preventDefault(),$("#elmuniid").val(e.properties.cca),$("#elmuni").text(e.properties.cca),$("#nombreOculto").val(e.properties.nam),$("#elmuniNombre").text(e.properties.nam),n.municipiosLosDatos=JSON.parse(sessionStorage.getItem("municipios")),sessionStorage.removeItem("edicion"),0==n.municipiosLosDatos.length&&sessionStorage.setItem("edicion",JSON.stringify(!1));for(var r=0;r<n.municipiosLosDatos.length;r++){if(n.municipiosLosDatos[r].idMuni===e.properties.cca){$("#idOculto").val(n.municipiosLosDatos[r].id),$("#candidatoPrimero").val(n.municipiosLosDatos[r].paso2019candidatoPrimero),$("#candidatoSegundo").val(n.municipiosLosDatos[r].paso2019candidatoSegundo),$("#espacioPrimero").val(n.municipiosLosDatos[r].paso2019espacioPrimero),$("#espacioSegundo").val(n.municipiosLosDatos[r].paso2019espacioSegundo),$("#porcentajePrimero").val(n.municipiosLosDatos[r].paso2019porcPrimero),$("#porcentajeSegundo").val(n.municipiosLosDatos[r].paso2019porcSegundo),$("#votosEnBlanco").val(n.municipiosLosDatos[r].paso2019votosEnBlanco),$("#votosPositivos").val(n.municipiosLosDatos[r].paso2019votosPositivos),$("#obs").val(n.municipiosLosDatos[r].paso2019obs),$("#votosEnBlancoPorcentaje").val(n.municipiosLosDatos[r].paso2019porcVotosEnBlanco),$("#votosPositivosPorcentaje").val(n.municipiosLosDatos[r].paso2019porcVotosPositivos),n.municipiosLosDatos[r].paso2019recuperado?$("#recuperado").prop("checked",!0):$("#recuperado").prop("checked",!1),sessionStorage.setItem("edicion",JSON.stringify(!0));break}$("#idOculto").val(""),$("#candidatoPrimero").val(""),$("#candidatoSegundo").val(""),$("#espacioPrimero").val(""),$("#recuperado").prop("checked",!1),$("#espacioSegundo").val(""),$("#porcentajePrimero").val(0),$("#porcentajeSegundo").val(0),$("#votosEnBlanco").val(0),$("#votosPositivos").val(0),$("#obs").val(""),$("#votosEnBlancoPorcentaje").val(0),$("#votosPositivosPorcentaje").val(0),sessionStorage.setItem("edicion",JSON.stringify(!1))}$("#formularioPaso").modal("show")})}),t.on({mouseover:function(n){r=n.target.options.color,o=n.target.options.weight,i=n.target.options.fillColor,t.setStyle({color:"#cc9900",weight:2,fillColor:"#cc9900"});var a=n.target,s=L.tooltip({position:"bottom",noWrap:!0,offset:[0,-30],sticky:!0,opacity:.8}).setContent(e.properties.cca+", "+e.properties.nam).setLatLng(n.latlng).addTo(jy);a.bindTooltip(s)},mouseout:function(e){t.setStyle({color:r,weight:o,fillColor:i})}})}}),n&&jy.addLayer(e.miPcia2015),e.encendidoInicialPaso()})},e.prototype.verCoordenadas=function(e){L.popup().setLatLng(e.latlng).setContent("Coordenadas: "+e.latlng).openOn(jy)},e.prototype.centrarMapa=function(e){jy.panTo(e.latlng)},e.prototype.acercar=function(e){jy.zoomIn()},e.prototype.alejar=function(e){jy.zoomOut()},e.prototype.ponerMarcador=function(e){var t=[];t[0]=e.lat,t[1]=e.lon,jy.setView(t,17);var n=L.marker(t,{icon:L.icon({iconSize:[35,40],iconAnchor:[20,40],iconUrl:"assets/images/location.png"})}).addTo(jy),r=L.popup({offset:L.point(-3,-33)});r.setContent("<h5><b>Ubicaci&oacute;n:</b></h5><hr><h6><p>"+e.texto+"</p></h6>"),r.setLatLng(t),r.openOn(jy),n.bindPopup(r)},e.prototype.hacerRecuentoPaso2019=function(e){var t=this;e.forEach(function(e){switch(String(e.paso2019espacioPrimero)){case"1":return t.fpv=t.fpv+1;case"2":return t.pro=t.pro+1;case"3":return t.cf=t.cf+1;case"4":return t.otro=t.otro+1}})},e.prototype.encendidoInicialPaso=function(){jy.addLayer(this.miPcia2015),jy.fitBounds(this.miPcia2015.getBounds()),this.encenderReferenciasPaso2019(),this.apagarReferenciasGenerales2019()},e.prototype.encendidoInicialGenerales=function(){jy.addLayer(this.miPcia2019),Ky||jy.fitBounds(this.miPcia2019.getBounds()),this.apagarReferenciasPaso2019(),this.encenderReferenciasGenerales2019()},e.prototype.elecciones2019Paso=function(){jy.hasLayer(this.miPcia2015)?(jy.removeLayer(this.miPcia2015),this.apagarReferenciasPaso2019()):(jy.hasLayer(this.miPcia2019)&&(jy.removeLayer(this.miPcia2019),this.apagarReferenciasGenerales2019()),this.miPcia2015?(jy.addLayer(this.miPcia2015),this.encenderReferenciasPaso2019()):this.leerPartidos2015())},e.prototype.elecciones2019Generales=function(){jy.hasLayer(this.miPcia2019)?(jy.removeLayer(this.miPcia2019),this.apagarReferenciasGenerales2019()):(jy.hasLayer(this.miPcia2015)&&(jy.removeLayer(this.miPcia2015),this.apagarReferenciasPaso2019()),this.miPcia2019?(jy.addLayer(this.miPcia2019),this.encenderReferenciasGenerales2019()):this.leerPartidos2019())},e.prototype.apagarReferenciasPaso2019=function(){var e;e=document.getElementsByClassName("footer");for(var t=0;t<e.length;t++)e[t].style.display="none"},e.prototype.apagarReferenciasGenerales2019=function(){var e;e=document.getElementsByClassName("footerGenerales");for(var t=0;t<e.length;t++)e[t].style.display="none"},e.prototype.encenderReferenciasPaso2019=function(){var e;e=document.getElementsByClassName("footer");for(var t=0;t<e.length;t++)e[t].style.display="block"},e.prototype.encenderReferenciasGenerales2019=function(){var e;e=document.getElementsByClassName("footerGenerales");for(var t=0;t<e.length;t++)e[t].style.display="block"},e.prototype.elecciones2019PasoResumenPcia=function(){this.resumenPaso2019=!this.resumenPaso2019},e.prototype.actualizar=function(){sessionStorage.clear(),Ky=!0,this.leerDatos()},e.prototype.submit=function(){var e=this;this.modeloPaso2019={id:$("#idOculto").val(),idMuni:$("#elmuniid").val(),nombrePartido:$("#nombreOculto").val(),paso2019candidatoPrimero:$("#candidatoPrimero").val(),paso2019candidatoSegundo:$("#candidatoSegundo").val(),paso2019recuperado:$("#recuperado").prop("checked"),paso2019espacioPrimero:$("#espacioPrimero").val(),paso2019espacioSegundo:$("#espacioSegundo").val(),paso2019porcPrimero:$("#porcentajePrimero").val(),paso2019porcSegundo:$("#porcentajeSegundo").val(),paso2019votosEnBlanco:$("#votosEnBlanco").val(),paso2019votosPositivos:$("#votosPositivos").val(),paso2019obs:$("#obs").val(),paso2019porcVotosEnBlanco:$("#votosEnBlancoPorcentaje").val(),paso2019porcVotosPositivos:$("#votosPositivosPorcentaje").val()},this.edicion=JSON.parse(sessionStorage.getItem("edicion")),this.edicion?this.eleccionesGenerales?this.servicioMunicipios.editMunicipiosGenerales(this.modeloPaso2019.id,this.modeloPaso2019).then(function(){console.log("edici\xf3n ok!"),$("#formularioPaso").modal("hide"),e.inicializarModelo()}):this.servicioMunicipios.editMunicipios(this.modeloPaso2019.id,this.modeloPaso2019).then(function(){console.log("edici\xf3n ok!"),$("#formularioPaso").modal("hide"),e.inicializarModelo()}):this.eleccionesGenerales?this.servicioMunicipios.saveMunicipioGenerales(this.modeloPaso2019).then(function(t){console.log("la respuesta:",t),$("#formularioPaso").modal("hide"),e.inicializarModelo()}).catch(function(e){console.log("error: ",e)}):this.servicioMunicipios.saveMunicipio(this.modeloPaso2019).then(function(t){console.log("la respuesta:",t),$("#formularioPaso").modal("hide"),e.inicializarModelo()}).catch(function(e){console.log("error: ",e)}),this.actualizar()},e.prototype.leerDatos=function(){var e=this;this.servicioMunicipios.getMunicipiosPaso().subscribe(function(t){e.arrayMunicipiosLeidos=[],t.docs.forEach(function(t){var n=t.data();e.arrayMunicipiosLeidos.push({id:t.id,idMuni:n.idMuni,nombrePartido:n.nombrePartido,paso2019candidatoPrimero:n.paso2019candidatoPrimero,paso2019candidatoSegundo:n.paso2019candidatoSegundo,paso2019recuperado:n.paso2019recuperado,paso2019espacioPrimero:n.paso2019espacioPrimero,paso2019espacioSegundo:n.paso2019espacioSegundo,paso2019porcPrimero:n.paso2019porcPrimero,paso2019porcSegundo:n.paso2019porcSegundo,paso2019votosEnBlanco:n.paso2019votosEnBlanco,paso2019votosPositivos:n.paso2019votosPositivos,paso2019obs:n.paso2019obs,paso2019porcVotosEnBlanco:n.paso2019porcVotosEnBlanco,paso2019porcVotosPositivos:n.paso2019porcVotosPositivos})}),sessionStorage.setItem("municipios",JSON.stringify(e.arrayMunicipiosLeidos)),e.hacerRecuentoPaso2019(e.arrayMunicipiosLeidos)}),this.servicioMunicipios.getMunicipiosGenerales().subscribe(function(t){e.arrayMunicipiosLeidosGenerales=[],t.docs.forEach(function(t){var n=t.data();e.arrayMunicipiosLeidosGenerales.push({id:t.id,idMuni:n.idMuni,nombrePartido:n.nombrePartido,paso2019candidatoPrimero:n.paso2019candidatoPrimero,paso2019candidatoSegundo:n.paso2019candidatoSegundo,paso2019recuperado:n.paso2019recuperado,paso2019espacioPrimero:n.paso2019espacioPrimero,paso2019espacioSegundo:n.paso2019espacioSegundo,paso2019porcPrimero:n.paso2019porcPrimero,paso2019porcSegundo:n.paso2019porcSegundo,paso2019votosEnBlanco:n.paso2019votosEnBlanco,paso2019votosPositivos:n.paso2019votosPositivos,paso2019obs:n.paso2019obs,paso2019porcVotosEnBlanco:n.paso2019porcVotosEnBlanco,paso2019porcVotosPositivos:n.paso2019porcVotosPositivos})}),sessionStorage.setItem("municipiosGenerales",JSON.stringify(e.arrayMunicipiosLeidosGenerales)),Ky&&(Ky=!1,jy.hasLayer(e.miPcia2019)&&(jy.removeLayer(e.miPcia2019),e.leerPartidos2019()),jy.hasLayer(e.miPcia2015)&&(jy.removeLayer(e.miPcia2015),e.leerPartidos2015()))})},e.prototype.inicializarModelo=function(){this.modeloPaso2019={id:"",idMuni:"",paso2019candidatoPrimero:"",paso2019candidatoSegundo:"",paso2019espacioPrimero:Qy["Sin datos"],paso2019espacioSegundo:Qy["Sin datos"],paso2019recuperado:!1,nombrePartido:"",paso2019porcPrimero:0,paso2019porcSegundo:0,paso2019votosEnBlanco:0,paso2019votosPositivos:0,paso2019obs:"",paso2019porcVotosEnBlanco:0,paso2019porcVotosPositivos:0}},e.prototype.armarTodo=function(){for(var e in this.inicializarModelo(),Qy)isNaN(Number(e))&&this.espacios.push({text:e,value:Qy[e]});var t=L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="http://mapbox.com">Mapbox</a>',id:"mapbox.streets"}),n=L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"terms and feedback"}),r=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:20}),o=L.tileLayer("http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],detectRetina:!0}),i=L.tileLayer("http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],detectRetina:!0}),a=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{maxZoom:22}),s=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}");(jy=L.map("map",{contextmenu:!0,contextmenuWidth:180,contextmenuItems:[{text:"Ver las coordenadas",callback:this.verCoordenadas,icon:"assets/images/coordenadas.png"},{text:"Centrar aqui",callback:this.centrarMapa,icon:"assets/images/banderita.png"},"-",{text:"Acercar",callback:this.acercar,icon:"assets/images/zoom-in.png"},{text:"Alejar",callback:this.alejar,icon:"assets/images/zoom-out.png"}],center:[-34.921136,-57.954712],zoom:8,zoomControl:!1,maxZoom:20}).addLayer(r)).createPane("circuitos"),jy.getPane("circuitos").style.zIndex=370,jy.createPane("colegios"),jy.getPane("colegios").style.zIndex=650,jy.createPane("partidos"),jy.getPane("partidos").style.zIndex=360,L.control.scale().addTo(jy),L.control.zoom({position:"bottomright"}).addTo(jy),L.control.layers({"Open Street Map":r,Mapbox:t,"Google callejero ":o,"Google hibrido":i,"ArcGis OnLine":n,"Esri sat":a,"Esri transportes":s},{},{}).addTo(jy),sessionStorage.clear(),this.leerDatos()},e}()),Yy=Kr({encapsulation:0,styles:[["#map[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;left:0}.footer[_ngcontent-%COMP%]{position:relative;z-index:2000;top:85%;background-color:#fff;text-align:center;display:none}.footerGenerales[_ngcontent-%COMP%]{position:relative;z-index:2000;top:85%;background-color:#fff;display:none}.fila[_ngcontent-%COMP%]{position:absolute;width:100%;height:0}.centradora[_ngcontent-%COMP%]{justify-content:center;align-items:center}.menu[_ngcontent-%COMP%]{z-index:2000;position:relative;background-color:rgba(225,228,228,.7);width:15em;top:2rem}.menu[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;right:15px}.dropdown-divider[_ngcontent-%COMP%]{border-top:1px solid #173c61;margin:15px}"]],data:{}});function Jy(e){return Vi(0,[(e()(),So(0,0,null,null,0,"i",[["class","fa fa-eye"]],null,null,null,null,null))],null,null)}function Zy(e){return Vi(0,[(e()(),So(0,0,null,null,0,"i",[["class","fa fa-eye-slash"]],null,null,null,null,null))],null,null)}function Xy(e){return Vi(0,[(e()(),So(0,0,null,null,0,"i",[["class","fa fa-eye"]],null,null,null,null,null))],null,null)}function em(e){return Vi(0,[(e()(),So(0,0,null,null,0,"i",[["class","fa fa-eye-slash"]],null,null,null,null,null))],null,null)}function tm(e){return Vi(0,[(e()(),So(0,0,null,null,3,"option",[],null,null,null,null,null)),di(1,147456,null,0,th,[In,Tn,[2,eh]],null,null),di(2,147456,null,0,oh,[In,Tn,[8,null]],null,null),(e()(),Mi(3,null,["",""]))],null,function(e,t){e(t,3,0,t.context.$implicit)})}function nm(e){return Vi(0,[(e()(),So(0,0,null,null,3,"option",[],null,null,null,null,null)),di(1,147456,null,0,th,[In,Tn,[2,eh]],null,null),di(2,147456,null,0,oh,[In,Tn,[8,null]],null,null),(e()(),Mi(3,null,["",""]))],null,function(e,t){e(t,3,0,t.context.$implicit)})}function rm(e){return Vi(0,[(e()(),So(0,0,null,null,3,"option",[],null,null,null,null,null)),di(1,147456,null,0,th,[In,Tn,[2,eh]],null,null),di(2,147456,null,0,oh,[In,Tn,[8,null]],null,null),(e()(),Mi(3,null,["",""]))],null,function(e,t){e(t,3,0,t.context.$implicit)})}function om(e){return Vi(0,[(e()(),So(0,0,null,null,3,"option",[],null,null,null,null,null)),di(1,147456,null,0,th,[In,Tn,[2,eh]],{value:[0,"value"]},null),di(2,147456,null,0,oh,[In,Tn,[8,null]],{value:[0,"value"]},null),(e()(),Mi(3,null,[" "," "]))],function(e,t){e(t,1,0,t.context.$implicit.value),e(t,2,0,t.context.$implicit.value)},function(e,t){e(t,3,0,t.context.$implicit.text)})}function im(e){return Vi(0,[(e()(),So(0,0,null,null,3,"option",[],null,null,null,null,null)),di(1,147456,null,0,th,[In,Tn,[2,eh]],{value:[0,"value"]},null),di(2,147456,null,0,oh,[In,Tn,[8,null]],{value:[0,"value"]},null),(e()(),Mi(3,null,[" "," "]))],function(e,t){e(t,1,0,t.context.$implicit.value),e(t,2,0,t.context.$implicit.value)},function(e,t){e(t,3,0,t.context.$implicit.text)})}function am(e){return Vi(0,[(e()(),So(0,0,null,null,517,"div",[["class","container-fluid"],["id","map"]],null,null,null,null,null)),(e()(),So(1,0,null,null,79,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(2,0,null,null,75,"div",[["class","col-1"]],null,null,null,null,null)),(e()(),So(3,0,null,null,74,"div",[["class","dropdown"]],null,null,null,null,null)),(e()(),So(4,0,null,null,1,"button",[["aria-expanded","false"],["aria-haspopup","true"],["class","btn btn-info"],["data-toggle","dropdown"],["id","dropdownMenuButton"],["style","position: relative; z-index: 2000; top:0.7rem; left: -0.3rem; width: 3.0rem; height: 3.0rem;"],["type","button"]],null,null,null,null,null)),(e()(),So(5,0,null,null,0,"i",[["class","fa fa-list"]],null,null,null,null,null)),(e()(),So(6,0,null,null,71,"div",[["class","dropdown-menu menu"]],null,null,null,null,null)),(e()(),So(7,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(8,0,null,null,2,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),So(9,0,null,null,1,"button",[["class","dropdown-item"],["data-target","#fila"],["data-toggle","collapse"]],null,null,null,null,null)),(e()(),Mi(-1,null,[" Geolocalizar "])),(e()(),So(11,0,null,null,1,"div",[["class","col-2"]],null,null,null,null,null)),(e()(),So(12,0,null,null,0,"i",[["class","fa fa-search"]],null,null,null,null,null)),(e()(),So(13,0,null,null,0,"div",[["class","dropdown-divider"]],null,null,null,null,null)),(e()(),So(14,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(15,0,null,null,2,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),So(16,0,null,null,1,"button",[["class","dropdown-item"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.elecciones2019Paso()&&r),r},null,null)),(e()(),Mi(-1,null,[" Elecc. Paso 2019 "])),(e()(),So(18,0,null,null,1,"div",[["class","col-2"]],null,null,null,null,null)),(e()(),So(19,0,null,null,0,"i",[["class","fa fa-eye-slash"]],null,null,null,null,null)),(e()(),So(20,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(21,0,null,null,2,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),So(22,0,null,null,1,"button",[["class","dropdown-item flip"],["data-target","#resumenPaso"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(e()(),Mi(-1,null,[" Resum\xe9n Paso 2019 "])),(e()(),So(24,0,null,null,1,"div",[["class","col-2"]],null,null,null,null,null)),(e()(),So(25,0,null,null,0,"i",[["class","fa fa-eye-slash"]],null,null,null,null,null)),(e()(),So(26,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(27,0,null,null,2,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),So(28,0,null,null,1,"button",[["class","dropdown-item"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.elecciones2019Generales()&&r),r},null,null)),(e()(),Mi(-1,null,["Elecc. Grales.2019"])),(e()(),So(30,0,null,null,1,"div",[["class","col-2"]],null,null,null,null,null)),(e()(),So(31,0,null,null,0,"i",[["class","fa fa-eye-slash"]],null,null,null,null,null)),(e()(),So(32,0,null,null,0,"div",[["class","dropdown-divider"]],null,null,null,null,null)),(e()(),So(33,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(34,0,null,null,2,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),So(35,0,null,null,1,"button",[["class","dropdown-item"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.leerCircuitos()&&r),r},null,null)),(e()(),Mi(-1,null,[" Circ. electorales (todos) "])),(e()(),So(37,0,null,null,4,"div",[["class","col-2"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,Jy)),di(39,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),Eo(16777216,null,null,1,null,Zy)),di(41,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),So(42,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(43,0,null,null,2,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),So(44,0,null,null,1,"button",[["class","dropdown-item"],["data-target","#buscaCircuito"],["data-toggle","collapse"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.buscarPartido()&&r),r},null,null)),(e()(),Mi(-1,null,[" Circ. electorales (buscar) "])),(e()(),So(46,0,null,null,4,"div",[["class","col-2"]],null,null,null,null,null)),(e()(),Eo(16777216,null,null,1,null,Xy)),di(48,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),Eo(16777216,null,null,1,null,em)),di(50,16384,null,0,cl,[xn,kn],{ngIf:[0,"ngIf"]},null),(e()(),So(51,0,null,null,0,"div",[["class","dropdown-divider"]],null,null,null,null,null)),(e()(),So(52,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(53,0,null,null,2,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),So(54,0,null,null,1,"button",[["class","dropdown-item"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.leerPartidos()&&r),r},null,null)),(e()(),Mi(-1,null,[" Part.Pcia. Bs. As. (todos) "])),(e()(),So(56,0,null,null,1,"div",[["class","col-2"]],null,null,null,null,null)),(e()(),So(57,0,null,null,0,"i",[["class","fa fa-eye-slash"]],null,null,null,null,null)),(e()(),So(58,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(59,0,null,null,2,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),So(60,0,null,null,1,"button",[["class","dropdown-item"],["data-target","#buscaPartido"],["data-toggle","collapse"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.buscarPartido()&&r),r},null,null)),(e()(),Mi(-1,null,[" Part.Pcia. Bs. As. (buscar) "])),(e()(),So(62,0,null,null,1,"div",[["class","col-2"]],null,null,null,null,null)),(e()(),So(63,0,null,null,0,"i",[["class","fa fa-search"]],null,null,null,null,null)),(e()(),So(64,0,null,null,0,"div",[["class","dropdown-divider"]],null,null,null,null,null)),(e()(),So(65,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(66,0,null,null,2,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),So(67,0,null,null,1,"button",[["class","dropdown-item"],["data-target","#buscaEscuela"],["data-toggle","collapse"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.buscarPartido()&&r),r},null,null)),(e()(),Mi(-1,null,[" Escuelas (buscar) "])),(e()(),So(69,0,null,null,1,"div",[["class","col-2"]],null,null,null,null,null)),(e()(),So(70,0,null,null,0,"i",[["class","fa fa-search"]],null,null,null,null,null)),(e()(),So(71,0,null,null,0,"div",[["class","dropdown-divider"]],null,null,null,null,null)),(e()(),So(72,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(73,0,null,null,2,"div",[["class","col-10"]],null,null,null,null,null)),(e()(),So(74,0,null,null,1,"button",[["class","dropdown-item"],["data-target","#capaWFS"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(e()(),Mi(-1,null,[" Capa WFS "])),(e()(),So(76,0,null,null,1,"div",[["class","col-2"]],null,null,null,null,null)),(e()(),So(77,0,null,null,0,"i",[["class","fa fa-tags"]],null,null,null,null,null)),(e()(),So(78,0,null,null,2,"div",[["class","col-2 col-sm-4 col-md-4 col-lg-4 col-xl-4 ml-5"],["style","z-index: 2000; position:relative; top: 0.7rem; background-color:rgba(225, 228, 228, 0.7); "]],null,null,null,null,null)),(e()(),So(79,0,null,null,1,"h3",[["class","text-center"],["style","padding-bottom: 3px; padding-top: 4.5px;"]],null,null,null,null,null)),(e()(),Mi(-1,null,[" Mapa electoral"])),(e()(),So(81,0,null,null,10,"div",[["class","container text-center collapse"],["id","fila"]],null,null,null,null,null)),(e()(),So(82,0,null,null,9,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(83,0,null,null,2,"div",[["class","col-6 mt-3 offset-1"],["style","z-index: 2000;"]],null,null,null,null,null)),(e()(),So(84,0,null,null,1,"app-usa-api",[],null,[[null,"eventoMarcador"]],function(e,t,n){var r=!0;return"eventoMarcador"===t&&(r=!1!==e.component.ponerMarcador(n)&&r),r},ny,Xp)),di(85,114688,null,0,Zp,[Jp],null,{eventoMarcador:"eventoMarcador"}),(e()(),So(86,0,null,null,5,"div",[["class","col-4 mt-3"],["style","z-index: 2000; position:relative;"]],null,null,null,null,null)),(e()(),So(87,0,null,null,2,"button",[["class","close"],["data-target","#fila"],["data-toggle","collapse"],["style","position: relative; right: 2vh; z-index:2100;"],["type","button"]],null,null,null,null,null)),(e()(),So(88,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Mi(-1,null,["\xd7"])),(e()(),So(90,0,null,null,1,"app-usa-api-location-iq",[],null,[[null,"eventoMarcador"]],function(e,t,n){var r=!0;return"eventoMarcador"===t&&(r=!1!==e.component.ponerMarcador(n)&&r),r},uy,iy)),di(91,49152,null,0,oy,[ry],null,{eventoMarcador:"eventoMarcador"}),(e()(),So(92,0,null,null,8,"div",[["class","row"],["style","position:relative; top: 100px;"]],null,null,null,null,null)),(e()(),So(93,0,null,null,7,"div",[["class","col"]],null,null,null,null,null)),(e()(),So(94,0,null,null,6,"div",[["class","row collapse"],["id","pepe"],["style","position: relative; left:0.1rem; top: 1rem;"]],null,null,null,null,null)),(e()(),So(95,0,null,null,2,"div",[["class","float-left"],["style","z-index: 2100;"]],null,null,null,null,null)),(e()(),So(96,0,null,null,1,"app-usa-api",[],null,[[null,"eventoMarcador"]],function(e,t,n){var r=!0;return"eventoMarcador"===t&&(r=!1!==e.component.ponerMarcador(n)&&r),r},ny,Xp)),di(97,114688,null,0,Zp,[Jp],null,{eventoMarcador:"eventoMarcador"}),(e()(),So(98,0,null,null,2,"div",[["class","float-left"],["style","z-index: 2100; position: absolute; left: 31.5rem;"]],null,null,null,null,null)),(e()(),So(99,0,null,null,1,"app-usa-api-location-iq",[],null,[[null,"eventoMarcador"]],function(e,t,n){var r=!0;return"eventoMarcador"===t&&(r=!1!==e.component.ponerMarcador(n)&&r),r},uy,iy)),di(100,49152,null,0,oy,[ry],null,{eventoMarcador:"eventoMarcador"}),(e()(),So(101,0,null,null,21,"div",[["class","card collapse"],["id","buscaPartido"],["style","position: relative; z-index:2000; width: 18rem;"]],null,null,null,null,null)),(e()(),So(102,0,null,null,20,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),So(103,0,null,null,2,"button",[["class","close"],["data-target","#buscaPartido"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(e()(),So(104,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Mi(-1,null,["\xd7"])),(e()(),So(106,0,null,null,1,"h5",[["class","card-title"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Buscar partidos"])),(e()(),So(108,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),So(109,0,null,null,1,"label",[["for","selectPartido"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Desplegar para seleccionar"])),(e()(),So(111,0,null,null,11,"select",[["class","form-control"],["id","selectPartido"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var r=!0,o=e.component;return"change"===t&&(r=!1!==Xo(e,112).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,112).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.partidoSeleccionado=n)&&r),"change"===t&&(r=!1!==o.partidoElegido()&&r),r},null,null)),di(112,16384,null,0,eh,[Tn,In],null,null),fi(1024,null,jc,function(e){return[e]},[eh]),di(114,671744,null,0,kh,[[8,null],[8,null],[8,null],[6,jc]],{model:[0,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(116,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(117,0,null,null,3,"option",[],null,null,null,null,null)),di(118,147456,null,0,th,[In,Tn,[2,eh]],null,null),di(119,147456,null,0,oh,[In,Tn,[8,null]],null,null),(e()(),Mi(-1,null,["Seleccionar un partido"])),(e()(),Eo(16777216,null,null,1,null,tm)),di(122,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null),(e()(),So(123,0,null,null,21,"div",[["class","card collapse"],["id","buscaCircuito"],["style","position: relative; z-index:2000; width: 18rem;"]],null,null,null,null,null)),(e()(),So(124,0,null,null,20,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),So(125,0,null,null,2,"button",[["class","close"],["data-target","#buscaCircuito"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(e()(),So(126,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Mi(-1,null,["\xd7"])),(e()(),So(128,0,null,null,1,"h5",[["class","card-title"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Buscar circuito electoral"])),(e()(),So(130,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),So(131,0,null,null,1,"label",[["for","selectCircuito"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Desplegar para selecc."])),(e()(),So(133,0,null,null,11,"select",[["class","form-control"],["id","selectCircuito"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var r=!0,o=e.component;return"change"===t&&(r=!1!==Xo(e,134).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,134).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.partidoSeleccionadoParaCircuito=n)&&r),"change"===t&&(r=!1!==o.circuito()&&r),r},null,null)),di(134,16384,null,0,eh,[Tn,In],null,null),fi(1024,null,jc,function(e){return[e]},[eh]),di(136,671744,null,0,kh,[[8,null],[8,null],[8,null],[6,jc]],{model:[0,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(138,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(139,0,null,null,3,"option",[],null,null,null,null,null)),di(140,147456,null,0,th,[In,Tn,[2,eh]],null,null),di(141,147456,null,0,oh,[In,Tn,[8,null]],null,null),(e()(),Mi(-1,null,["Seleccionar un partido"])),(e()(),Eo(16777216,null,null,1,null,nm)),di(144,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null),(e()(),So(145,0,null,null,21,"div",[["class","card collapse"],["id","buscaEscuela"],["style","position: relative; z-index:2000; width: 18rem;"]],null,null,null,null,null)),(e()(),So(146,0,null,null,20,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),So(147,0,null,null,2,"button",[["class","close"],["data-target","#buscaEscuela"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(e()(),So(148,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Mi(-1,null,["\xd7"])),(e()(),So(150,0,null,null,1,"h5",[["class","card-title"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Buscar escuelas por partido"])),(e()(),So(152,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),So(153,0,null,null,1,"label",[["for","selectEscuela"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Desplegar para selecc."])),(e()(),So(155,0,null,null,11,"select",[["class","form-control"],["id","selectEscuela"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var r=!0,o=e.component;return"change"===t&&(r=!1!==Xo(e,156).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,156).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.partidoSeleccionadoParaEscuela=n)&&r),"change"===t&&(r=!1!==o.escuelas()&&r),r},null,null)),di(156,16384,null,0,eh,[Tn,In],null,null),fi(1024,null,jc,function(e){return[e]},[eh]),di(158,671744,null,0,kh,[[8,null],[8,null],[8,null],[6,jc]],{model:[0,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(160,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(161,0,null,null,3,"option",[],null,null,null,null,null)),di(162,147456,null,0,th,[In,Tn,[2,eh]],null,null),di(163,147456,null,0,oh,[In,Tn,[8,null]],null,null),(e()(),Mi(-1,null,["Seleccionar un partido"])),(e()(),Eo(16777216,null,null,1,null,rm)),di(166,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null),(e()(),So(167,0,null,null,9,"div",[["class","card collapse"],["id","capaWFS"],["style","position: relative; z-index:2000; width: 18rem;"]],null,null,null,null,null)),(e()(),So(168,0,null,null,8,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),So(169,0,null,null,2,"button",[["class","close"],["data-target","#capaWFS"],["data-toggle","collapse"],["type","button"]],null,null,null,null,null)),(e()(),So(170,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Mi(-1,null,["\xd7"])),(e()(),So(172,0,null,null,1,"h5",[["class","card-title"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Capa WFS del IGN (Partidos)"])),(e()(),So(174,0,null,null,2,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),So(175,0,null,null,1,"button",[["class","btn btn-info"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.capaWFS()&&r),r},null,null)),(e()(),Mi(-1,null,["Cargar"])),(e()(),So(177,0,null,null,13,"div",[["class","footer container"]],null,null,null,null,null)),(e()(),So(178,0,null,null,12,"div",[["class","row fila"]],null,null,null,null,null)),(e()(),So(179,0,null,null,2,"div",[["class","col"]],null,null,null,null,null)),(e()(),So(180,0,null,null,1,"p",[["style","background-color: rgba(0,102,255,0.7)"]],null,null,null,null,null)),(e()(),Mi(181,null,["Frente de todos ",""])),(e()(),So(182,0,null,null,2,"div",[["class","col"]],null,null,null,null,null)),(e()(),So(183,0,null,null,1,"p",[["style","background-color: rgba(255,255,102,0.7)"]],null,null,null,null,null)),(e()(),Mi(184,null,["Juntos por el cambio ",""])),(e()(),So(185,0,null,null,2,"div",[["class","col"]],null,null,null,null,null)),(e()(),So(186,0,null,null,1,"p",[["style","background-color: rgba(51,204,51,0.7)"]],null,null,null,null,null)),(e()(),Mi(187,null,["Consenso Federal ",""])),(e()(),So(188,0,null,null,2,"div",[["class","col"]],null,null,null,null,null)),(e()(),So(189,0,null,null,1,"p",[["style","background-color: rgba(161, 159, 159, 0.7)"]],null,null,null,null,null)),(e()(),Mi(190,null,["Otros ",""])),(e()(),So(191,0,null,null,4,"div",[["class","footerGenerales centradoras"]],null,null,null,null,null)),(e()(),So(192,0,null,null,3,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(193,0,null,null,2,"div",[["class","col text-center"]],null,null,null,null,null)),(e()(),So(194,0,null,null,1,"h6",[["class","mt-2"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Datos NO reales, provisorios a modo ilustrativo."])),(e()(),So(196,0,null,null,33,"div",[["class","row"]],null,null,null,null,null)),(e()(),So(197,0,null,null,32,"div",[["class","col-8 col-md-3 ml-5"]],[[8,"hidden",0]],null,null,null,null)),(e()(),So(198,0,null,null,31,"div",[["class","card text-center mx-1"],["style","z-index: 999;"]],null,null,null,null,null)),(e()(),So(199,0,null,null,30,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),So(200,0,null,null,29,"table",[["class","table table-striped table-borderless table-sm"]],null,null,null,null,null)),(e()(),So(201,0,null,null,7,"thead",[["class","thead-dark"]],null,null,null,null,null)),(e()(),So(202,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(203,0,null,null,2,"th",[["class","pb-1"],["scope","col"]],null,null,null,null,null)),(e()(),So(204,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),Mi(-1,null,["Espacio pol\xedtico"])),(e()(),So(206,0,null,null,2,"th",[["class","pb-1"],["scope","col"]],null,null,null,null,null)),(e()(),So(207,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),Mi(-1,null,["Municipios"])),(e()(),So(209,0,null,null,20,"tbody",[],null,null,null,null,null)),(e()(),So(210,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),So(211,0,null,null,1,"td",[["class","text-left"],["style","background-color: rgba(0,102,255,0.5)"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Frente de todos"])),(e()(),So(213,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(214,null,["",""])),(e()(),So(215,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),So(216,0,null,null,1,"td",[["class","text-left"],["style","background-color: rgba(255,255,102,0.5)"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Juntos por el cambio"])),(e()(),So(218,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(219,null,["",""])),(e()(),So(220,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),So(221,0,null,null,1,"td",[["class","text-left"],["style","background-color: rgba(51,204,51,0.5)"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Consenso Federal "])),(e()(),So(223,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(224,null,["",""])),(e()(),So(225,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),So(226,0,null,null,1,"td",[["class","text-left"],["style","background-color: rgba(161, 159, 159, 0.5)"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Otros"])),(e()(),So(228,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(229,null,["",""])),(e()(),So(230,0,null,null,104,"div",[["class","collapse row mx-4 my-4"],["id","resumenPaso"]],null,null,null,null,null)),(e()(),So(231,0,null,null,103,"div",[["class","col-xs-3 col-md-3"]],null,null,null,null,null)),(e()(),So(232,0,null,null,2,"button",[["class","close"],["data-target","#resumenPaso"],["data-toggle","collapse"],["style","position:relative; z-index:2000; left:-20px;"],["type","button"]],null,null,null,null,null)),(e()(),So(233,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),Mi(-1,null,["\xd7"])),(e()(),So(235,0,null,null,99,"div",[["class","card text-center mx-1"],["style","z-index: 999;"]],null,null,null,null,null)),(e()(),So(236,0,null,null,98,"div",[["class","card-body"]],null,null,null,null,null)),(e()(),So(237,0,null,null,97,"table",[["class","table table-striped table-borderless table-sm"]],null,null,null,null,null)),(e()(),So(238,0,null,null,7,"thead",[["class","thead-dark"]],null,null,null,null,null)),(e()(),So(239,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(240,0,null,null,1,"th",[["class","pb-4"],["scope","col"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Espacio pol\xedtico"])),(e()(),So(242,0,null,null,1,"th",[["class","pb-3"],["scope","col"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Cantidad de votos"])),(e()(),So(244,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(e()(),Mi(-1,null,["% de votos v\xe1lidos"])),(e()(),So(246,0,null,null,88,"tbody",[],null,null,null,null,null)),(e()(),So(247,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(248,0,null,null,1,"td",[["class","text-left"],["style","background-color: rgba(0,102,255,0.5)"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Frente de todos"])),(e()(),So(250,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["11.622.085"])),(e()(),So(252,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["47,65"])),(e()(),So(254,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(255,0,null,null,1,"td",[["class","text-left"],["style","background-color: rgba(255,255,102,0.5)"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Juntos por el cambio"])),(e()(),So(257,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["7.824.961"])),(e()(),So(259,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["32,08"])),(e()(),So(261,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(262,0,null,null,1,"td",[["class","text-left"],["style","background-color: rgba(51,204,51,0.5)"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Consenso Federal "])),(e()(),So(264,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["2.006.964"])),(e()(),So(266,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["8,22"])),(e()(),So(268,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(269,0,null,null,1,"td",[["class","text-left"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Izquierda (Del Ca\xf1o)"])),(e()(),So(271,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["697.745"])),(e()(),So(273,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["2,86"])),(e()(),So(275,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(276,0,null,null,1,"td",[["class","text-left"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Frente NOS (G\xf3mez Centuri\xf3n)"])),(e()(),So(278,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["642.650"])),(e()(),So(280,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["2,63"])),(e()(),So(282,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(283,0,null,null,1,"td",[["class","text-left"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Unite (Jos\xe9 L. Espert)"])),(e()(),So(285,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["533.079"])),(e()(),So(287,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["2,18"])),(e()(),So(289,0,null,null,3,"tr",[],null,null,null,null,null)),(e()(),So(290,0,null,null,0,"td",[["class","table-primary"]],null,null,null,null,null)),(e()(),So(291,0,null,null,0,"td",[["class","table-primary"]],null,null,null,null,null)),(e()(),So(292,0,null,null,0,"td",[["class","table-primary"]],null,null,null,null,null)),(e()(),So(293,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(294,0,null,null,1,"td",[["class","text-left"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Votos afirmativos"])),(e()(),So(296,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["23.628.526"])),(e()(),So(298,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["96.88"])),(e()(),So(300,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(301,0,null,null,1,"td",[["class","text-left"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Votos en blanco"])),(e()(),So(303,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["758.944"])),(e()(),So(305,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["3.12"])),(e()(),So(307,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(308,0,null,null,1,"td",[["class","text-left"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Votos v\xe1lidos"])),(e()(),So(310,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["24.387.470"])),(e()(),So(312,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["98.78"])),(e()(),So(314,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(315,0,null,null,1,"td",[["class","text-left"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Participaci\xf3n"])),(e()(),So(317,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["24.687.487"])),(e()(),So(319,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["75.78"])),(e()(),So(321,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(322,0,null,null,1,"td",[["class","text-left"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Abstenciones"])),(e()(),So(324,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["7.898.275"])),(e()(),So(326,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["24.15"])),(e()(),So(328,0,null,null,6,"tr",[],null,null,null,null,null)),(e()(),So(329,0,null,null,1,"td",[["class","text-left"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Electores registrados"])),(e()(),So(331,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["32.621.468"])),(e()(),So(333,0,null,null,1,"td",[["class","text-right"]],null,null,null,null,null)),(e()(),Mi(-1,null,["100.00"])),(e()(),So(335,0,null,null,182,"div",[["class","modal fade"],["id","formularioPaso"]],null,null,null,null,null)),(e()(),So(336,0,null,null,181,"div",[["class","modal-dialog modal-dialog-scrollable"]],null,null,null,null,null)),(e()(),So(337,0,null,null,180,"div",[["class","modal-content"]],null,null,null,null,null)),(e()(),So(338,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(e()(),So(339,0,null,null,1,"h5",[["class","modal-title"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Elecciones 2019"])),(e()(),So(341,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(e()(),So(342,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(e()(),Mi(-1,null,["\xd7"])),(e()(),So(344,0,null,null,173,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),So(345,0,null,null,172,"form",[["class","form-inline"],["id","formularioPaso"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var r=!0,o=e.component;return"submit"===t&&(r=!1!==Xo(e,347).onSubmit(n)&&r),"reset"===t&&(r=!1!==Xo(e,347).onReset()&&r),"submit"===t&&(r=!1!==o.submit()&&r),r},null,null)),di(346,16384,null,0,xh,[],null,null),di(347,4210688,[["formularioPaso",4]],0,Sh,[[8,null],[8,null]],null,null),fi(2048,null,Nc,null,[Sh]),di(349,16384,null,0,yh,[[4,Nc]],null,null),(e()(),So(350,0,null,null,7,"div",[["class","alert alert-primary"],["role","alert"],["style","width: 100%"]],null,null,null,null,null)),(e()(),So(351,0,null,null,6,"h5",[["class","text-center"]],null,null,null,null,null)),(e()(),So(352,0,null,null,1,"i",[],null,null,null,null,null)),(e()(),Mi(-1,null,["Municipio: "])),(e()(),So(354,0,null,null,0,"i",[["id","elmuniNombre"]],null,null,null,null,null)),(e()(),So(355,0,null,null,1,"i",[],null,null,null,null,null)),(e()(),Mi(-1,null,[", Id Pcial.:"])),(e()(),So(357,0,null,null,0,"i",[["id","elmuni"]],null,null,null,null,null)),(e()(),So(358,0,null,null,0,"input",[["class","form-control"],["id","nombreOculto"],["name","nombreOculto"],["type","hidden"]],null,null,null,null,null)),(e()(),So(359,0,null,null,0,"input",[["class","form-control"],["id","elmuniid"],["name","elmuniid"],["type","hidden"]],null,null,null,null,null)),(e()(),So(360,0,null,null,0,"input",[["class","form-control"],["id","idOculto"],["name","idOculto"],["type","hidden"]],null,null,null,null,null)),(e()(),So(361,0,null,null,22,"div",[["class","form-row"]],null,null,null,null,null)),(e()(),So(362,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(363,0,null,null,9,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(364,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(e()(),So(365,0,null,null,1,"div",[["class","input-group-text form-control-sm"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Primero"])),(e()(),So(367,0,null,null,5,"input",[["class","form-control form-control-sm"],["id","candidatoPrimero"],["name","candidatoPrimero"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Xo(e,368)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,368).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xo(e,368)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xo(e,368)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019candidatoPrimero=n)&&r),r},null,null)),di(368,16384,null,0,Uc,[Tn,In,[2,qc]],null,null),fi(1024,null,jc,function(e){return[e]},[Uc]),di(370,671744,[["candidatoPrimero",4]],0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(372,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(373,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(374,0,null,null,9,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(375,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(e()(),So(376,0,null,null,1,"div",[["class","input-group-text form-control-sm"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Segundo"])),(e()(),So(378,0,null,null,5,"input",[["class","form-control form-control-sm"],["id","candidatoSegundo"],["name","candidatoSegundo"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Xo(e,379)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,379).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xo(e,379)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xo(e,379)._compositionEnd(n.target.value)&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019candidatoSegundo=n)&&r),r},null,null)),di(379,16384,null,0,Uc,[Tn,In,[2,qc]],null,null),fi(1024,null,jc,function(e){return[e]},[Uc]),di(381,671744,[["candidatoSegundo",4]],0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(383,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(384,0,null,null,0,"div",[["class","form-row my-1"]],null,null,null,null,null)),(e()(),So(385,0,null,null,26,"div",[["class","form-row"]],null,null,null,null,null)),(e()(),So(386,0,null,null,12,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(387,0,null,null,11,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(388,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(e()(),So(389,0,null,null,1,"div",[["class","input-group-text form-control-sm"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Esp.Pol. 1"])),(e()(),So(391,0,null,null,7,"select",[["class","form-control form-control-sm"],["id","espacioPrimero"],["name","espacioPrimero"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var r=!0,o=e.component;return"change"===t&&(r=!1!==Xo(e,392).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,392).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019espacioPrimero=n)&&r),r},null,null)),di(392,16384,null,0,eh,[Tn,In],null,null),fi(1024,null,jc,function(e){return[e]},[eh]),di(394,671744,null,0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(396,16384,null,0,ph,[[4,Qc]],null,null),(e()(),Eo(16777216,null,null,1,null,om)),di(398,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null),(e()(),So(399,0,null,null,12,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(400,0,null,null,11,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(401,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(e()(),So(402,0,null,null,1,"div",[["class","input-group-text form-control-sm"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Esp.Pol. 2"])),(e()(),So(404,0,null,null,7,"select",[["class","form-control form-control-sm"],["id","espacioSegundo"],["name","espacioSegundo"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var r=!0,o=e.component;return"change"===t&&(r=!1!==Xo(e,405).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,405).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019espacioSegundo=n)&&r),r},null,null)),di(405,16384,null,0,eh,[Tn,In],null,null),fi(1024,null,jc,function(e){return[e]},[eh]),di(407,671744,null,0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(409,16384,null,0,ph,[[4,Qc]],null,null),(e()(),Eo(16777216,null,null,1,null,im)),di(411,278528,null,0,ul,[xn,kn,Jn],{ngForOf:[0,"ngForOf"]},null),(e()(),So(412,0,null,null,0,"div",[["class","form-row my-1"]],null,null,null,null,null)),(e()(),So(413,0,null,null,24,"div",[["class","form-row"]],null,null,null,null,null)),(e()(),So(414,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(415,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(416,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(e()(),So(417,0,null,null,1,"div",[["class","input-group-text form-control-sm"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Porc. primero"])),(e()(),So(419,0,null,null,6,"input",[["class","form-control form-control-sm text-right"],["id","porcentajePrimero"],["name","porcentajePrimero"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Xo(e,420)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,420).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xo(e,420)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xo(e,420)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xo(e,421).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xo(e,421).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,421).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019porcPrimero=n)&&r),r},null,null)),di(420,16384,null,0,Uc,[Tn,In,[2,qc]],null,null),di(421,16384,null,0,Wc,[Tn,In],null,null),fi(1024,null,jc,function(e,t){return[e,t]},[Uc,Wc]),di(423,671744,null,0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(425,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(426,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(427,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(428,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(e()(),So(429,0,null,null,1,"div",[["class","input-group-text form-control-sm"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Porc. segundo"])),(e()(),So(431,0,null,null,6,"input",[["class","form-control form-control-sm text-right"],["id","porcentajeSegundo"],["name","porcentajeSegundo"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Xo(e,432)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,432).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xo(e,432)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xo(e,432)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xo(e,433).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xo(e,433).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,433).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019porcSegundo=n)&&r),r},null,null)),di(432,16384,null,0,Uc,[Tn,In,[2,qc]],null,null),di(433,16384,null,0,Wc,[Tn,In],null,null),fi(1024,null,jc,function(e,t){return[e,t]},[Uc,Wc]),di(435,671744,null,0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(437,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(438,0,null,null,0,"div",[["class","form-row my-1"]],null,null,null,null,null)),(e()(),So(439,0,null,null,24,"div",[["class","form-row"]],null,null,null,null,null)),(e()(),So(440,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(441,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(442,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(e()(),So(443,0,null,null,1,"div",[["class","input-group-text form-control-sm"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Votos en blanco"])),(e()(),So(445,0,null,null,6,"input",[["class","form-control form-control-sm text-right"],["id","votosEnBlanco"],["name","votosEnBlanco"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Xo(e,446)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,446).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xo(e,446)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xo(e,446)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xo(e,447).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xo(e,447).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,447).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019votosEnBlanco=n)&&r),r},null,null)),di(446,16384,null,0,Uc,[Tn,In,[2,qc]],null,null),di(447,16384,null,0,Wc,[Tn,In],null,null),fi(1024,null,jc,function(e,t){return[e,t]},[Uc,Wc]),di(449,671744,null,0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(451,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(452,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(453,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(454,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(e()(),So(455,0,null,null,1,"div",[["class","input-group-text form-control-sm"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Votos positivos"])),(e()(),So(457,0,null,null,6,"input",[["class","form-control form-control-sm text-right"],["id","votosPositivos"],["name","votosPositivos"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Xo(e,458)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,458).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xo(e,458)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xo(e,458)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xo(e,459).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xo(e,459).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,459).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019votosPositivos=n)&&r),r},null,null)),di(458,16384,null,0,Uc,[Tn,In,[2,qc]],null,null),di(459,16384,null,0,Wc,[Tn,In],null,null),fi(1024,null,jc,function(e,t){return[e,t]},[Uc,Wc]),di(461,671744,null,0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(463,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(464,0,null,null,0,"div",[["class","form-row my-1"]],null,null,null,null,null)),(e()(),So(465,0,null,null,24,"div",[["class","form-row"]],null,null,null,null,null)),(e()(),So(466,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(467,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(468,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(e()(),So(469,0,null,null,1,"div",[["class","input-group-text form-control-sm"]],null,null,null,null,null)),(e()(),Mi(-1,null,["% Votos en blanco"])),(e()(),So(471,0,null,null,6,"input",[["class","form-control form-control-sm text-right"],["id","votosEnBlancoPorcentaje"],["name","votosEnBlancoPorcentaje"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Xo(e,472)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,472).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xo(e,472)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xo(e,472)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xo(e,473).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xo(e,473).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,473).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019porcVotosEnBlanco=n)&&r),r},null,null)),di(472,16384,null,0,Uc,[Tn,In,[2,qc]],null,null),di(473,16384,null,0,Wc,[Tn,In],null,null),fi(1024,null,jc,function(e,t){return[e,t]},[Uc,Wc]),di(475,671744,null,0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(477,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(478,0,null,null,11,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(479,0,null,null,10,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(480,0,null,null,2,"div",[["class","input-group-prepend"]],null,null,null,null,null)),(e()(),So(481,0,null,null,1,"div",[["class","input-group-text form-control-sm"]],null,null,null,null,null)),(e()(),Mi(-1,null,["% Votos positivos"])),(e()(),So(483,0,null,null,6,"input",[["class","form-control form-control-sm text-right"],["id","votosPositivosPorcentaje"],["name","votosPositivosPorcentaje"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==Xo(e,484)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,484).onTouched()&&r),"compositionstart"===t&&(r=!1!==Xo(e,484)._compositionStart()&&r),"compositionend"===t&&(r=!1!==Xo(e,484)._compositionEnd(n.target.value)&&r),"change"===t&&(r=!1!==Xo(e,485).onChange(n.target.value)&&r),"input"===t&&(r=!1!==Xo(e,485).onChange(n.target.value)&&r),"blur"===t&&(r=!1!==Xo(e,485).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019porcVotosPositivos=n)&&r),r},null,null)),di(484,16384,null,0,Uc,[Tn,In,[2,qc]],null,null),di(485,16384,null,0,Wc,[Tn,In],null,null),fi(1024,null,jc,function(e,t){return[e,t]},[Uc,Wc]),di(487,671744,null,0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(489,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(490,0,null,null,0,"div",[["class","form-row my-1"]],null,null,null,null,null)),(e()(),So(491,0,null,null,16,"div",[["class","form-row"]],null,null,null,null,null)),(e()(),So(492,0,null,null,4,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(493,0,null,null,3,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(494,0,null,null,1,"label",[["for","obs"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Observaciones"])),(e()(),So(496,0,null,null,0,"textarea",[["class","form-control form-control-sm rounded-4"],["id","obs"],["rows","2"],["style","width: 14.5rem;"]],null,null,null,null,null)),(e()(),So(497,0,null,null,10,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(498,0,null,null,9,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(499,0,null,null,5,"input",[["class","form-check-input mt-4 ml-4"],["id","recuperado"],["name","recuperado"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(e,t,n){var r=!0,o=e.component;return"change"===t&&(r=!1!==Xo(e,500).onChange(n.target.checked)&&r),"blur"===t&&(r=!1!==Xo(e,500).onTouched()&&r),"ngModelChange"===t&&(r=!1!==(o.modeloPaso2019.paso2019recuperado=n)&&r),r},null,null)),di(500,16384,null,0,Bc,[Tn,In],null,null),fi(1024,null,jc,function(e){return[e]},[Bc]),di(502,671744,null,0,kh,[[2,Nc],[8,null],[8,null],[6,jc]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),fi(2048,null,Qc,null,[kh]),di(504,16384,null,0,ph,[[4,Qc]],null,null),(e()(),So(505,0,null,null,2,"label",[["class","ml-5 mt-4"],["for","recuperado"]],null,null,null,null,null)),(e()(),So(506,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),Mi(-1,null,["Recuperado"])),(e()(),So(508,0,null,null,0,"div",[["class","form-row my-4"]],null,null,null,null,null)),(e()(),So(509,0,null,null,8,"div",[["class","form-row ml-2"]],null,null,null,null,null)),(e()(),So(510,0,null,null,3,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(511,0,null,null,2,"div",[["class","input-group"]],null,null,null,null,null)),(e()(),So(512,0,null,null,1,"button",[["class","btn btn-secondary form-control-sm"],["data-dismiss","modal"],["type","button"]],null,null,null,null,null)),(e()(),Mi(-1,null,["Cerrar"])),(e()(),So(514,0,null,null,3,"div",[["class","col-sm-6"]],null,null,null,null,null)),(e()(),So(515,0,null,null,2,"div",[["class","input-group"],["style","display: block;"]],null,null,null,null,null)),(e()(),So(516,0,null,null,1,"button",[["class","btn btn-primary form-control-sm"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(e()(),Mi(-1,null,["Guardar "]))],function(e,t){var n=t.component;e(t,39,0,n.capaCircuitos),e(t,41,0,!n.capaCircuitos),e(t,48,0,n.capaCircuitos),e(t,50,0,!n.capaCircuitos),e(t,85,0),e(t,97,0),e(t,114,0,n.partidoSeleccionado),e(t,122,0,n.listadoPartidos),e(t,136,0,n.partidoSeleccionadoParaCircuito),e(t,144,0,n.listadoPartidos),e(t,158,0,n.partidoSeleccionadoParaEscuela),e(t,166,0,n.listadoPartidos),e(t,370,0,"candidatoPrimero",n.modeloPaso2019.paso2019candidatoPrimero),e(t,381,0,"candidatoSegundo",n.modeloPaso2019.paso2019candidatoSegundo),e(t,394,0,"espacioPrimero",n.modeloPaso2019.paso2019espacioPrimero),e(t,398,0,n.espacios),e(t,407,0,"espacioSegundo",n.modeloPaso2019.paso2019espacioSegundo),e(t,411,0,n.espacios),e(t,423,0,"porcentajePrimero",n.modeloPaso2019.paso2019porcPrimero),e(t,435,0,"porcentajeSegundo",n.modeloPaso2019.paso2019porcSegundo),e(t,449,0,"votosEnBlanco",n.modeloPaso2019.paso2019votosEnBlanco),e(t,461,0,"votosPositivos",n.modeloPaso2019.paso2019votosPositivos),e(t,475,0,"votosEnBlancoPorcentaje",n.modeloPaso2019.paso2019porcVotosEnBlanco),e(t,487,0,"votosPositivosPorcentaje",n.modeloPaso2019.paso2019porcVotosPositivos),e(t,502,0,"recuperado",n.modeloPaso2019.paso2019recuperado)},function(e,t){var n=t.component;e(t,111,0,Xo(t,116).ngClassUntouched,Xo(t,116).ngClassTouched,Xo(t,116).ngClassPristine,Xo(t,116).ngClassDirty,Xo(t,116).ngClassValid,Xo(t,116).ngClassInvalid,Xo(t,116).ngClassPending),e(t,133,0,Xo(t,138).ngClassUntouched,Xo(t,138).ngClassTouched,Xo(t,138).ngClassPristine,Xo(t,138).ngClassDirty,Xo(t,138).ngClassValid,Xo(t,138).ngClassInvalid,Xo(t,138).ngClassPending),e(t,155,0,Xo(t,160).ngClassUntouched,Xo(t,160).ngClassTouched,Xo(t,160).ngClassPristine,Xo(t,160).ngClassDirty,Xo(t,160).ngClassValid,Xo(t,160).ngClassInvalid,Xo(t,160).ngClassPending),e(t,181,0,n.fpv),e(t,184,0,n.pro),e(t,187,0,n.cf),e(t,190,0,n.otro),e(t,197,0,!n.resumenPaso2019),e(t,214,0,n.fpv),e(t,219,0,n.pro),e(t,224,0,n.cf),e(t,229,0,n.otro),e(t,345,0,Xo(t,349).ngClassUntouched,Xo(t,349).ngClassTouched,Xo(t,349).ngClassPristine,Xo(t,349).ngClassDirty,Xo(t,349).ngClassValid,Xo(t,349).ngClassInvalid,Xo(t,349).ngClassPending),e(t,367,0,Xo(t,372).ngClassUntouched,Xo(t,372).ngClassTouched,Xo(t,372).ngClassPristine,Xo(t,372).ngClassDirty,Xo(t,372).ngClassValid,Xo(t,372).ngClassInvalid,Xo(t,372).ngClassPending),e(t,378,0,Xo(t,383).ngClassUntouched,Xo(t,383).ngClassTouched,Xo(t,383).ngClassPristine,Xo(t,383).ngClassDirty,Xo(t,383).ngClassValid,Xo(t,383).ngClassInvalid,Xo(t,383).ngClassPending),e(t,391,0,Xo(t,396).ngClassUntouched,Xo(t,396).ngClassTouched,Xo(t,396).ngClassPristine,Xo(t,396).ngClassDirty,Xo(t,396).ngClassValid,Xo(t,396).ngClassInvalid,Xo(t,396).ngClassPending),e(t,404,0,Xo(t,409).ngClassUntouched,Xo(t,409).ngClassTouched,Xo(t,409).ngClassPristine,Xo(t,409).ngClassDirty,Xo(t,409).ngClassValid,Xo(t,409).ngClassInvalid,Xo(t,409).ngClassPending),e(t,419,0,Xo(t,425).ngClassUntouched,Xo(t,425).ngClassTouched,Xo(t,425).ngClassPristine,Xo(t,425).ngClassDirty,Xo(t,425).ngClassValid,Xo(t,425).ngClassInvalid,Xo(t,425).ngClassPending),e(t,431,0,Xo(t,437).ngClassUntouched,Xo(t,437).ngClassTouched,Xo(t,437).ngClassPristine,Xo(t,437).ngClassDirty,Xo(t,437).ngClassValid,Xo(t,437).ngClassInvalid,Xo(t,437).ngClassPending),e(t,445,0,Xo(t,451).ngClassUntouched,Xo(t,451).ngClassTouched,Xo(t,451).ngClassPristine,Xo(t,451).ngClassDirty,Xo(t,451).ngClassValid,Xo(t,451).ngClassInvalid,Xo(t,451).ngClassPending),e(t,457,0,Xo(t,463).ngClassUntouched,Xo(t,463).ngClassTouched,Xo(t,463).ngClassPristine,Xo(t,463).ngClassDirty,Xo(t,463).ngClassValid,Xo(t,463).ngClassInvalid,Xo(t,463).ngClassPending),e(t,471,0,Xo(t,477).ngClassUntouched,Xo(t,477).ngClassTouched,Xo(t,477).ngClassPristine,Xo(t,477).ngClassDirty,Xo(t,477).ngClassValid,Xo(t,477).ngClassInvalid,Xo(t,477).ngClassPending),e(t,483,0,Xo(t,489).ngClassUntouched,Xo(t,489).ngClassTouched,Xo(t,489).ngClassPristine,Xo(t,489).ngClassDirty,Xo(t,489).ngClassValid,Xo(t,489).ngClassInvalid,Xo(t,489).ngClassPending),e(t,499,0,Xo(t,504).ngClassUntouched,Xo(t,504).ngClassTouched,Xo(t,504).ngClassPristine,Xo(t,504).ngClassDirty,Xo(t,504).ngClassValid,Xo(t,504).ngClassInvalid,Xo(t,504).ngClassPending),e(t,516,0,!Xo(t,347).form.valid)})}var sm=function(){function e(){}return e.prototype.ngOnInit=function(){},e}(),um=Kr({encapsulation:0,styles:[[""]],data:{}});function lm(e){return Vi(0,[(e()(),So(0,0,null,null,1,"app-mapa",[],null,null,null,am,Yy)),di(1,114688,null,0,$y,[ly,Uy,Gd,zy,Wy,Gy,Hy],null,null)],function(e,t){e(t,1,0)},null)}var cm=Kr({encapsulation:0,styles:[[""]],data:{}});function hm(e){return Vi(0,[(e()(),So(0,0,null,null,1,"app-webapp",[],null,null,null,lm,um)),di(1,114688,null,0,sm,[],null,null)],function(e,t){e(t,1,0)},null)}var dm=Uo("app-root",wu,function(e){return Vi(0,[(e()(),So(0,0,null,null,1,"app-root",[],null,null,null,hm,cm)),di(1,114688,null,0,wu,[],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),fm=function(){};new ye("Location Initialized"),new ye("appBaseHref");var pm=function(){function e(){}return e.prototype.createSubscription=function(e,t){return e.subscribe({next:t,error:function(e){throw e}})},e.prototype.dispose=function(e){e.unsubscribe()},e.prototype.onDestroy=function(e){e.unsubscribe()},e}();function ym(e){return function(t,n){var r=e(t,n);return 1==r.length?"0"+r:r}}function mm(e){return function(t,n){return e(t,n).split(" ")[0]}}function gm(e,t,n){return new Intl.DateTimeFormat(t,n).format(e).replace(/[\u200e\u200f]/g,"")}function vm(e){var t={hour:"2-digit",hour12:!1,timeZoneName:e};return function(e,n){var r=gm(e,n,t);return r?r.substring(3):""}}function bm(e,t){return e.hour12=t,e}function wm(e,t){var n={};return n[e]=2===t?"2-digit":"numeric",n}function _m(e,t){var n={};return n[e]=t<4?t>1?"short":"narrow":"long",n}function Cm(e){return Object.assign.apply(Object,[{}].concat(e))}function Em(e){return function(t,n){return gm(t,n,e)}}new(function(){function e(){}return e.prototype.createSubscription=function(e,t){return e.then(t,function(e){throw e})},e.prototype.dispose=function(e){},e.prototype.onDestroy=function(e){},e}()),new pm,Em(Cm([wm("year",1),_m("month",3),wm("day",1),wm("hour",1),wm("minute",1),wm("second",1)])),Em(Cm([wm("year",1),wm("month",1),wm("day",1),wm("hour",1),wm("minute",1)])),Em(Cm([wm("year",1),_m("month",4),_m("weekday",4),wm("day",1)])),Em(Cm([wm("year",1),_m("month",4),wm("day",1)])),Em(Cm([wm("year",1),_m("month",3),wm("day",1)])),Em(Cm([wm("year",1),wm("month",1),wm("day",1)])),Em(Cm([wm("hour",1),wm("second",1),wm("minute",1)])),Em(Cm([wm("hour",1),wm("minute",1)])),Em(wm("year",4)),Em(wm("year",2)),Em(wm("year",1)),Em(_m("month",4)),Em(_m("month",3)),Em(wm("month",2)),Em(wm("month",1)),Em(_m("month",4)),Em(_m("month",1)),Em(wm("day",2)),Em(wm("day",1)),ym(mm(Em(bm(wm("hour",2),!1)))),mm(Em(bm(wm("hour",1),!1))),ym(mm(Em(bm(wm("hour",2),!0)))),mm(Em(bm(wm("hour",1),!0))),Em(wm("hour",2)),Em(wm("hour",1)),ym(Em(wm("minute",2))),Em(wm("minute",1)),ym(Em(wm("second",2))),Em(wm("second",1)),Em(wm("second",3)),Em(_m("weekday",4)),Em(_m("weekday",3)),Em(_m("weekday",2)),Em(_m("weekday",1)),Em(bm(wm("hour",1),!0)),vm("short"),vm("long"),Em({}),Em({}),Em(_m("era",1)),Em(_m("era",2)),Em(_m("era",3)),Em(_m("era",4)),new Map,new ot("4.1.3");var Sm=function(){},Tm=(n("6Joi"),function(){function e(){}var t;return t=e,e.enablePersistence=function(e){return{ngModule:t,providers:[{provide:Oy,useValue:!0},{provide:My,useValue:e}]}},e}()),Im=function(e,t,n){return new Ga(bu,[wu],function(e){return function(e){for(var t={},n=[],r=!1,o=0;o<e.length;o++){var i=e[o];i.token===ft&&!0===i.value&&(r=!0),1073741824&i.flags&&n.push(i.token),i.index=o,t[Wr(i.token)]=i}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}([Oo(512,Gt,Wt,[[8,[lf,qf,cp,fp,Qf,Yf,np,gp,dm]],[3,Gt],Qt]),Oo(5120,rr,ar,[[3,rr]]),Oo(4608,ol,il,[rr,[2,rl]]),Oo(4608,Rt,Rt,[]),Oo(5120,Dt,kt,[]),Oo(5120,Jn,or,[]),Oo(5120,Zn,ir,[]),Oo(4608,vc,bc,[yl]),Oo(6144,Ar,null,[vc]),Oo(4608,hc,fc,[]),Oo(5120,Fl,function(e,t,n,r,o,i,a,s){return[new lc(e,t,n),new gc(r),new pc(o,i,a,s)]},[yl,en,At,yl,yl,hc,Ot,[2,dc]]),Oo(4608,jl,jl,[Fl,en]),Oo(135680,Ul,Ul,[yl]),Oo(4608,$l,$l,[jl,Ul]),Oo(6144,En,null,[$l]),Oo(6144,ql,null,[Ul]),Oo(4608,ln,ln,[en]),Oo(4608,Wp,Hp,[yl,At,zp]),Oo(4608,Qp,Qp,[Wp,Gp]),Oo(5120,Vp,function(e){return[e]},[Qp]),Oo(4608,qp,qp,[]),Oo(6144,Bp,null,[qp]),Oo(4608,Up,Up,[Bp]),Oo(6144,wp,null,[Up]),Oo(4608,bp,Kp,[wp,je]),Oo(4608,Rp,Rp,[bp]),Oo(4608,Kc,Kc,[]),Oo(4608,fm,fm,[]),Oo(4608,Gd,Gd,[Gt,je,zd,Md]),Oo(5120,Ny,Ay,[ky,en,[2,xy]]),Oo(4608,qy,qy,[ky,[2,xy],[2,Oy],[2,Ry],At,en,[2,My]]),Oo(4608,Jp,Jp,[Rp]),Oo(4608,Uy,Uy,[qy]),Oo(1073742336,pl,pl,[]),Oo(1024,dt,Dc,[]),Oo(1024,Tt,function(e){return[(t=e,Rl("probe",Vl),Rl("coreTokens",i({},Ll,(t||[]).reduce(function(e,t){return e[t.name]=t.token,e},{}))),function(){return Vl})];var t},[[2,mn]]),Oo(512,It,It,[[2,Tt]]),Oo(131584,_n,_n,[en,Ot,je,dt,Gt,It]),Oo(1073742336,sr,sr,[_n]),Oo(1073742336,kc,kc,[[3,kc]]),Oo(1073742336,$p,$p,[]),Oo(1073742336,Yp,Yp,[]),Oo(1073742336,Nh,Nh,[]),Oo(1073742336,Ah,Ah,[]),Oo(1073742336,Sm,Sm,[]),Oo(1073742336,Zh,Zh,[]),Oo(1073742336,td,td,[]),Oo(1073742336,nd,nd,[]),Oo(1073742336,rd,rd,[]),Oo(1073742336,od,od,[]),Oo(1073742336,Pd,Pd,[]),Oo(1073742336,Od,Od,[]),Oo(1073742336,Wd,Wd,[]),Oo(1073742336,Hd,Hd,[]),Oo(1073742336,Kd,Kd,[]),Oo(1073742336,$d,$d,[]),Oo(1073742336,Yd,Yd,[]),Oo(1073742336,Jd,Jd,[]),Oo(1073742336,Zd,Zd,[]),Oo(1073742336,ef,ef,[]),Oo(1073742336,rf,rf,[]),Oo(1073742336,of,of,[]),Oo(1073742336,Py,Py,[]),Oo(1073742336,Tm,Tm,[]),Oo(1073742336,bu,bu,[]),Oo(256,ft,!0,[]),Oo(256,zp,"XSRF-TOKEN",[]),Oo(256,Gp,"X-XSRF-TOKEN",[]),Oo(256,ky,{apiKey:"AIzaSyBBLjXy4C9SWDNm2XmczSppIh3xL6ZSt9I",authDomain:"argengis-60763.firebaseapp.com",databaseURL:"https://argengis-60763.firebaseio.com",projectId:"argengis-60763",storageBucket:"argengis-60763.appspot.com",messagingSenderId:"944972773597",appId:"1:944972773597:web:edc500e7cc508693"},[]),Oo(256,xy,"argengis-mh",[])])})}();(function(){if(fn)throw new Error("Cannot enable prod mode after platform setup.");dn=!1})(),Ic().bootstrapModuleFactory(Im).catch(function(e){return console.error(e)})},zVF4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("+7AZ"),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],o=0;o<e.length;o+=3){var i=e[o],a=o+1<e.length,s=a?e[o+1]:0,u=o+2<e.length,l=u?e[o+2]:0,c=(15&s)<<2|l>>6,h=63&l;u||(h=64,a||(c=64)),r.push(n[i>>2],n[(3&i)<<4|s>>4],n[c],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){var i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){var a=((7&o)<<18|(63&(i=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{i=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],o=0;o<e.length;){var i=n[e.charAt(o++)],a=o<e.length?n[e.charAt(o)]:0,s=++o<e.length?n[e.charAt(o)]:64,u=++o<e.length?n[e.charAt(o)]:64;if(++o,null==i||null==a||null==s||null==u)throw Error();r.push(i<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},l=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=c(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var f="FirebaseError",p=function(e){function t(n,r){var o=e.call(this,r)||this;return o.code=n,o.name=f,Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,y.prototype.create),o}return r.__extends(t,e),t}(Error),y=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},o=this.service+"/"+e,i=this.errors[e],a=i?function(e,t){return e.replace(m,function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"})}(i,r):"Error",s=new p(o,this.serviceName+": "+a+" ("+o+")."),u=0,l=Object.keys(r);u<l.length;u++){var c=l[u];"_"!==c.slice(-1)&&(c in s&&console.warn('Overwriting FirebaseError base field "'+c+'" can cause unexpected behavior.'),s[c]=r[c])}return s},e}(),m=/\{\$([^}]+)}/g;function g(e){return JSON.parse(e)}var v=function(e){var t={},n={},r={},o="";try{var i=e.split(".");t=g(l(i[0])||""),n=g(l(i[1])||""),o=i[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:o}},b=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var o,i,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^s&(u^l),i=1518500249):(o=s^u^l,i=1859775393):r<60?(o=s&u|l&(s|u),i=2400959708):(o=s^u^l,i=3395469782);var h=(a<<5|a>>>27)+o+c+i+n[r]&4294967295;c=l,l=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,o=this.buf_,i=this.inbuf_;r<t;){if(0===i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(o[i]=e.charCodeAt(r),++r,++i===this.blockSize){this.compress_(o),i=0;break}}else for(;r<t;)if(o[i]=e[r],++r,++i===this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[n]>>o&255,++r;return e},e}(),w=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,o=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var o=r[n];if(o in e&&"function"==typeof e[o])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(e){}}),this.observers.push(r),i},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function _(){}function C(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+r+" argument "}t.CONSTANTS=o,t.Deferred=h,t.ErrorFactory=y,t.FirebaseError=p,t.Sha1=b,t.assert=i,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}},t.base64=u,t.base64Decode=l,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new w(e,t);return n.subscribe.bind(n)},t.decode=v,t.deepCopy=function(e){return c(void 0,e)},t.deepExtend=c,t.errorPrefix=C,t.getUA=d,t.isAdmin=function(e){var t=v(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=v(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=v(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,o=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),o=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},t.issuedAtTime=function(e){var t=v(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=g,t.map=function(e,t,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,o=Object.entries(e);r<o.length;r++){var i=o[r];n(i[0],i[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;i(++r<e.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(e.charCodeAt(r)-56320)}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var o;if(r<t?o="at least "+t:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(e,t,r)+"must be a valid firebase namespace.")}}},[[0,0]]]);